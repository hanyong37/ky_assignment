  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "contracts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "start_date" date, "end_date" date, "cycle_month" integer, "first_charge_date" date, "cycle_price" decimal(10,2), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "invoices" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "start_date" date, "end_date" date, "total" decimal(10,2), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "lineitmes" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "start_date" date, "end_date" date, "unit" varchar, "total" decimal(10,2), "unit_price" decimal(10,2), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "rent_phases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "start_date" date, "end_date" date, "price" decimal(10,2), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES ('20160824092523')[0m
  [1m[35m (0.6ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.8ms)[0m  [1m[32mINSERT INTO schema_migrations (version) VALUES ('20160824085619'), ('20160824092220'), ('20160824092345');

[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2016-08-24 09:33:15 UTC], ["updated_at", 2016-08-24 09:33:15 UTC]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.1ms)[0m  [1m[31mDELETE FROM "contracts"[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 09:35:09.360133', '2016-08-24 09:35:09.360133', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 09:35:09.360133', '2016-08-24 09:35:09.360133', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "invoices"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:35:09.368445', '2016-08-24 09:35:09.368445', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:35:09.368445', '2016-08-24 09:35:09.368445', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "lineitmes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 09:35:09.370853', '2016-08-24 09:35:09.370853', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 09:35:09.370853', '2016-08-24 09:35:09.370853', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "rent_phases"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:35:09.373775', '2016-08-24 09:35:09.373775', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:35:09.373775', '2016-08-24 09:35:09.373775', 298486374)[0m
  [1m[35m (2.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------
ContractTest: test_the_truth
----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.9ms)[0m  [1m[31mDELETE FROM "contracts"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 09:36:25.728319', '2016-08-24 09:36:25.728319', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 09:36:25.728319', '2016-08-24 09:36:25.728319', 298486374)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "invoices"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:36:25.738431', '2016-08-24 09:36:25.738431', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:36:25.738431', '2016-08-24 09:36:25.738431', 298486374)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "lineitmes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 09:36:25.743230', '2016-08-24 09:36:25.743230', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 09:36:25.743230', '2016-08-24 09:36:25.743230', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "rent_phases"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:36:25.747463', '2016-08-24 09:36:25.747463', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:36:25.747463', '2016-08-24 09:36:25.747463', 298486374)[0m
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------
InvoiceTest: test_the_truth
---------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------
ContractTest: test_the_truth
----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM "contracts"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 09:38:25.005517', '2016-08-24 09:38:25.005517', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 09:38:25.005517', '2016-08-24 09:38:25.005517', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "invoices"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:38:25.013952', '2016-08-24 09:38:25.013952', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:38:25.013952', '2016-08-24 09:38:25.013952', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "lineitmes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 09:38:25.016513', '2016-08-24 09:38:25.016513', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 09:38:25.016513', '2016-08-24 09:38:25.016513', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "rent_phases"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:38:25.019606', '2016-08-24 09:38:25.019606', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:38:25.019606', '2016-08-24 09:38:25.019606', 298486374)[0m
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------
InvoiceTest: test_the_truth
---------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------
ContractTest: test_the_truth
----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
ContractTest: test_create_new_contract
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.9ms)[0m  [1m[31mDELETE FROM "contracts"[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 09:51:28.878054', '2016-08-24 09:51:28.878054', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 09:51:28.878054', '2016-08-24 09:51:28.878054', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "invoices"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:51:28.889371', '2016-08-24 09:51:28.889371', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:51:28.889371', '2016-08-24 09:51:28.889371', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "lineitmes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 09:51:28.892445', '2016-08-24 09:51:28.892445', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 09:51:28.892445', '2016-08-24 09:51:28.892445', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "rent_phases"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:51:28.895451', '2016-08-24 09:51:28.895451', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:51:28.895451', '2016-08-24 09:51:28.895451', 298486374)[0m
  [1m[35m (3.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
InvoiceTest: test_the_truth
---------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
ContractTest: test_create_new_contract
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_contract_with_mutiple_cycles
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
ContractTest: test_test_validation
----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ContractTest: test_generate_contract_with_one_cycle
---------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_invoice_with_multiple_cycles
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ContractTest: test_generate_invoice_with_one_cycle
--------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM "contracts"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 09:54:22.281056', '2016-08-24 09:54:22.281056', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 09:54:22.281056', '2016-08-24 09:54:22.281056', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "invoices"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:54:22.291184', '2016-08-24 09:54:22.291184', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:54:22.291184', '2016-08-24 09:54:22.291184', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "lineitmes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 09:54:22.293145', '2016-08-24 09:54:22.293145', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 09:54:22.293145', '2016-08-24 09:54:22.293145', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "rent_phases"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:54:22.294892', '2016-08-24 09:54:22.294892', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 09:54:22.294892', '2016-08-24 09:54:22.294892', 298486374)[0m
  [1m[35m (3.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
ContractTest: test_test_validation
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ContractTest: test_generate_contract_with_one_cycle
---------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ContractTest: test_generate_invoice_with_one_cycle
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
ContractTest: test_create_new_contract
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_invoice_with_multiple_cycles
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_contract_with_mutiple_cycles
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------
InvoiceTest: test_the_truth
---------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.2ms)[0m  [1m[31mDELETE FROM "contracts"[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 15:49:44.268351', '2016-08-24 15:49:44.268351', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 15:49:44.268351', '2016-08-24 15:49:44.268351', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "invoices"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 15:49:44.281693', '2016-08-24 15:49:44.281693', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 15:49:44.281693', '2016-08-24 15:49:44.281693', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "lineitmes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 15:49:44.285773', '2016-08-24 15:49:44.285773', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 15:49:44.285773', '2016-08-24 15:49:44.285773', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "rent_phases"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 15:49:44.288338', '2016-08-24 15:49:44.288338', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 15:49:44.288338', '2016-08-24 15:49:44.288338', 298486374)[0m
  [1m[35m (1.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------
InvoiceTest: test_the_truth
---------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_invoice_with_multiple_cycles
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
ContractTest: test_create_new_contract
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ContractTest: test_generate_contract_with_one_cycle
---------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ContractTest: test_generate_invoice_with_one_cycle
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_contract_with_mutiple_cycles
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
ContractTest: test_test_validation
----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM "contracts"[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 16:10:45.336750', '2016-08-24 16:10:45.336750', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 16:10:45.336750', '2016-08-24 16:10:45.336750', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "invoices"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 16:10:45.347766', '2016-08-24 16:10:45.347766', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 16:10:45.347766', '2016-08-24 16:10:45.347766', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "lineitmes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 16:10:45.351030', '2016-08-24 16:10:45.351030', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 16:10:45.351030', '2016-08-24 16:10:45.351030', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "rent_phases"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 16:10:45.353569', '2016-08-24 16:10:45.353569', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 16:10:45.353569', '2016-08-24 16:10:45.353569', 298486374)[0m
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
ContractTest: test_find_a_fixture_contract
------------------------------------------
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", nil], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
ContractTest: test_test_validation
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_invoice_with_multiple_cycles
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_contract_with_mutiple_cycles
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ContractTest: test_generate_contract_with_one_cycle
---------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ContractTest: test_generate_invoice_with_one_cycle
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------
InvoiceTest: test_the_truth
---------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "contracts"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 16:11:34.796922', '2016-08-24 16:11:34.796922', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 16:11:34.796922', '2016-08-24 16:11:34.796922', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "invoices"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 16:11:34.805365', '2016-08-24 16:11:34.805365', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 16:11:34.805365', '2016-08-24 16:11:34.805365', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "lineitmes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 16:11:34.807874', '2016-08-24 16:11:34.807874', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 16:11:34.807874', '2016-08-24 16:11:34.807874', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "rent_phases"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 16:11:34.810589', '2016-08-24 16:11:34.810589', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 16:11:34.810589', '2016-08-24 16:11:34.810589', 298486374)[0m
  [1m[35m (2.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------
InvoiceTest: test_the_truth
---------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ContractTest: test_generate_invoice_with_one_cycle
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ContractTest: test_generate_contract_with_one_cycle
---------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_contract_with_mutiple_cycles
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_invoice_with_multiple_cycles
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
ContractTest: test_test_validation
----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
ContractTest: test_find_a_fixture_contract
------------------------------------------
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" ORDER BY "contracts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "contracts"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 16:14:03.694793', '2016-08-24 16:14:03.694793', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 16:14:03.694793', '2016-08-24 16:14:03.694793', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "invoices"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 16:14:03.702905', '2016-08-24 16:14:03.702905', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 16:14:03.702905', '2016-08-24 16:14:03.702905', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "lineitmes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 16:14:03.705394', '2016-08-24 16:14:03.705394', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 16:14:03.705394', '2016-08-24 16:14:03.705394', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "rent_phases"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 16:14:03.707810', '2016-08-24 16:14:03.707810', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 16:14:03.707810', '2016-08-24 16:14:03.707810', 298486374)[0m
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------
InvoiceTest: test_the_truth
---------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_contract_with_mutiple_cycles
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_invoice_with_multiple_cycles
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ContractTest: test_generate_contract_with_one_cycle
---------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
ContractTest: test_find_a_fixture_contract
------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ContractTest: test_generate_invoice_with_one_cycle
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
ContractTest: test_test_validation
----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "contracts"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 16:14:13.591345', '2016-08-24 16:14:13.591345', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "cycle_month", "first_charge_date", "cycle_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 1, '2016-08-24', 9.99, '2016-08-24 16:14:13.591345', '2016-08-24 16:14:13.591345', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "invoices"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 16:14:13.599688', '2016-08-24 16:14:13.599688', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 16:14:13.599688', '2016-08-24 16:14:13.599688', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "lineitmes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 16:14:13.602106', '2016-08-24 16:14:13.602106', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 'MyString', 9.99, 9.99, '2016-08-24 16:14:13.602106', '2016-08-24 16:14:13.602106', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "rent_phases"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 16:14:13.606210', '2016-08-24 16:14:13.606210', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("start_date", "end_date", "price", "created_at", "updated_at", "id") VALUES ('2016-08-24', '2016-08-24', 9.99, '2016-08-24 16:14:13.606210', '2016-08-24 16:14:13.606210', 298486374)[0m
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
ContractTest: test_test_validation
----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_invoice_with_multiple_cycles
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ContractTest: test_generate_invoice_with_one_cycle
--------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
ContractTest: test_find_a_fixture_contract
------------------------------------------
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" ORDER BY "contracts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_contract_with_mutiple_cycles
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ContractTest: test_generate_contract_with_one_cycle
---------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------
InvoiceTest: test_the_truth
---------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mContract Load (0.8ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" ORDER BY "contracts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "contracts"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices"[0m
  [1m[36mContract Load (0.6ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT "contracts".* FROM "contracts"[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" ORDER BY "contracts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "contracts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "start_date" date, "end_date" date, "customer_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "customers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "invoices" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "start_date" date, "end_date" date, "due_date" date, "total" decimal(10,2), "customer_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "lineitmes" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "desc" varchar, "start_date" date, "end_date" date, "unit" varchar, "total" decimal(10,2), "unit_price" decimal(10,2), "invoice_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "rent_phases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "start_date" date, "end_date" date, "cycle" integer, "monthly_price" decimal(10,2), "contract_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES ('20160825031348')[0m
  [1m[35m (0.5ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO schema_migrations (version) VALUES ('20160825030724'), ('20160825030753'), ('20160825031008'), ('20160825031038');

[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2016-08-25 03:47:40 UTC], ["updated_at", 2016-08-25 03:47:40 UTC]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.9ms)[0m  [1m[31mDELETE FROM "contracts"[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "created_at", "updated_at", "id") VALUES ('chenxi', '2016-08-25 03:51:24.287355', '2016-08-25 03:51:24.287355', 980190962)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "invoices"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "customer_id", "created_at", "updated_at", "id") VALUES ('MyString', '2016-08-25', '2016-08-25', '2016-08-25', 9.99, 'MyString', '2016-08-25 03:51:24.295390', '2016-08-25 03:51:24.295390', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "customer_id", "created_at", "updated_at", "id") VALUES ('MyString', '2016-08-25', '2016-08-25', '2016-08-25', 9.99, 'MyString', '2016-08-25 03:51:24.295390', '2016-08-25 03:51:24.295390', 298486374)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "lineitmes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "id") VALUES ('MyString', '2016-08-25', '2016-08-25', 'MyString', 9.99, 9.99, 'MyString', '2016-08-25 03:51:24.299055', '2016-08-25 03:51:24.299055', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "id") VALUES ('MyString', '2016-08-25', '2016-08-25', 'MyString', 9.99, 9.99, 'MyString', '2016-08-25 03:51:24.299055', '2016-08-25 03:51:24.299055', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "rent_phases"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mContract Load (2.9ms)[0m  [1m[34mSELECT "contracts".* FROM "contracts"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (1.8ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:08:27 UTC], ["updated_at", 2016-08-25 05:08:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:08:27 UTC], ["updated_at", 2016-08-25 05:08:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:09:37 UTC], ["updated_at", 2016-08-25 05:09:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:09:37 UTC], ["updated_at", 2016-08-25 05:09:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mContract Load (2.4ms)[0m  [1m[34mSELECT "contracts".* FROM "contracts"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "customers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "chenxi"], ["created_at", 2016-08-25 05:30:56 UTC], ["updated_at", 2016-08-25 05:30:56 UTC]]
  [1m[35m (1.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "haha"], ["start_date", Tue, 09 Sep 2008], ["end_date", Wed, 09 Sep 2009], ["customer_id", "1"], ["created_at", 2016-08-25 05:31:08 UTC], ["updated_at", 2016-08-25 05:31:08 UTC]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "chenxi"], ["created_at", 2016-08-25 05:32:47 UTC], ["updated_at", 2016-08-25 05:32:47 UTC]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "chenxaai"], ["created_at", 2016-08-25 05:33:02 UTC], ["updated_at", 2016-08-25 05:33:02 UTC]]
  [1m[35m (8.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "chenxaai"], ["created_at", 2016-08-25 05:34:03 UTC], ["updated_at", 2016-08-25 05:34:03 UTC]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "chenxi"], ["created_at", 2016-08-25 05:35:41 UTC], ["updated_at", 2016-08-25 05:35:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:35:41 UTC], ["updated_at", 2016-08-25 05:35:41 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:35:41 UTC], ["updated_at", 2016-08-25 05:35:41 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "chenxi"], ["created_at", 2016-08-25 05:37:25 UTC], ["updated_at", 2016-08-25 05:37:25 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:37:25 UTC], ["updated_at", 2016-08-25 05:37:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:37:25 UTC], ["updated_at", 2016-08-25 05:37:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (8.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "chenxi"], ["created_at", 2016-08-25 05:37:52 UTC], ["updated_at", 2016-08-25 05:37:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:37:52 UTC], ["updated_at", 2016-08-25 05:37:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:37:52 UTC], ["updated_at", 2016-08-25 05:37:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "chenxi"], ["created_at", 2016-08-25 05:50:05 UTC], ["updated_at", 2016-08-25 05:50:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:50:05 UTC], ["updated_at", 2016-08-25 05:50:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:50:05 UTC], ["updated_at", 2016-08-25 05:50:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "customers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "chenxi"], ["created_at", 2016-08-25 05:52:34 UTC], ["updated_at", 2016-08-25 05:52:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:53:25 UTC], ["updated_at", 2016-08-25 05:53:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:53:25 UTC], ["updated_at", 2016-08-25 05:53:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (10.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "chenxi"], ["created_at", 2016-08-25 05:54:28 UTC], ["updated_at", 2016-08-25 05:54:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:54:53 UTC], ["updated_at", 2016-08-25 05:54:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:54:53 UTC], ["updated_at", 2016-08-25 05:54:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "chenxi"], ["created_at", 2016-08-25 05:55:25 UTC], ["updated_at", 2016-08-25 05:55:25 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:55:50 UTC], ["updated_at", 2016-08-25 05:55:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:55:50 UTC], ["updated_at", 2016-08-25 05:55:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:57:03 UTC], ["updated_at", 2016-08-25 05:57:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:57:03 UTC], ["updated_at", 2016-08-25 05:57:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (8.0ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:57:33 UTC], ["updated_at", 2016-08-25 05:57:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:57:33 UTC], ["updated_at", 2016-08-25 05:57:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (8.6ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:57:40 UTC], ["updated_at", 2016-08-25 05:57:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:57:40 UTC], ["updated_at", 2016-08-25 05:57:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:58:40 UTC], ["updated_at", 2016-08-25 05:58:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:58:40 UTC], ["updated_at", 2016-08-25 05:58:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:59:24 UTC], ["updated_at", 2016-08-25 05:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:59:24 UTC], ["updated_at", 2016-08-25 05:59:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:59:44 UTC], ["updated_at", 2016-08-25 05:59:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 05:59:44 UTC], ["updated_at", 2016-08-25 05:59:44 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 06:01:47 UTC], ["updated_at", 2016-08-25 06:01:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", 2016-08-25 06:01:47 UTC], ["updated_at", 2016-08-25 06:01:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["customer_id", "1"], ["created_at", 2016-08-25 06:03:41 UTC], ["updated_at", 2016-08-25 06:03:41 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f9526858820,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:03:41 UTC], ["updated_at", 2016-08-25 06:03:41 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f9526242cd8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:03:41 UTC], ["updated_at", 2016-08-25 06:03:41 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (10.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["customer_id", "1"], ["created_at", 2016-08-25 06:05:21 UTC], ["updated_at", 2016-08-25 06:05:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fbd43fc4d30,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:05:21 UTC], ["updated_at", 2016-08-25 06:05:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fbd43faf098,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:05:21 UTC], ["updated_at", 2016-08-25 06:05:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (1.0ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["customer_id", "1"], ["created_at", 2016-08-25 06:06:20 UTC], ["updated_at", 2016-08-25 06:06:20 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc58186b278,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:06:20 UTC], ["updated_at", 2016-08-25 06:06:20 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc584c93960,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:06:20 UTC], ["updated_at", 2016-08-25 06:06:20 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.4ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (9.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["customer_id", "1"], ["created_at", 2016-08-25 06:07:24 UTC], ["updated_at", 2016-08-25 06:07:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc75d0ed978,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:07:24 UTC], ["updated_at", 2016-08-25 06:07:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc75d0dec70,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:07:24 UTC], ["updated_at", 2016-08-25 06:07:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["customer_id", "1"], ["created_at", 2016-08-25 06:08:10 UTC], ["updated_at", 2016-08-25 06:08:10 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f97475b0a50,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:08:10 UTC], ["updated_at", 2016-08-25 06:08:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f974478f540,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:08:10 UTC], ["updated_at", 2016-08-25 06:08:10 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["customer_id", "1"], ["created_at", 2016-08-25 06:08:18 UTC], ["updated_at", 2016-08-25 06:08:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd11dd36b70,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:08:18 UTC], ["updated_at", 2016-08-25 06:08:18 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd11dd3e0f0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:08:18 UTC], ["updated_at", 2016-08-25 06:08:18 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (8.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["customer_id", "1"], ["created_at", 2016-08-25 06:09:17 UTC], ["updated_at", 2016-08-25 06:09:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ff240110ff0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:09:17 UTC], ["updated_at", 2016-08-25 06:09:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff240118110,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:09:17 UTC], ["updated_at", 2016-08-25 06:09:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["customer_id", "1"], ["created_at", 2016-08-25 06:09:53 UTC], ["updated_at", 2016-08-25 06:09:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f9c27436370,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:09:53 UTC], ["updated_at", 2016-08-25 06:09:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f9c2743d008,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:09:53 UTC], ["updated_at", 2016-08-25 06:09:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["customer_id", "1"], ["created_at", 2016-08-25 06:10:12 UTC], ["updated_at", 2016-08-25 06:10:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f969844c2b8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:10:12 UTC], ["updated_at", 2016-08-25 06:10:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f969845fed0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:10:12 UTC], ["updated_at", 2016-08-25 06:10:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["customer_id", "1"], ["created_at", 2016-08-25 06:10:27 UTC], ["updated_at", 2016-08-25 06:10:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa92fc3f020,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:10:27 UTC], ["updated_at", 2016-08-25 06:10:27 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa92fc45858,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:10:27 UTC], ["updated_at", 2016-08-25 06:10:27 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (9.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mContract Load (2.2ms)[0m  [1m[34mSELECT "contracts".* FROM "contracts"[0m
  [1m[36mContract Load (0.4ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" ORDER BY "contracts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mRentPhase Load (0.8ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 06:29:43 UTC], ["updated_at", 2016-08-25 06:29:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8e2cac8f48,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:29:43 UTC], ["updated_at", 2016-08-25 06:29:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8e29470158,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:29:43 UTC], ["updated_at", 2016-08-25 06:29:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 06:29:43 UTC], ["updated_at", 2016-08-25 06:29:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8e2b010b38,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:29:43 UTC], ["updated_at", 2016-08-25 06:29:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8e2cadbdc8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:29:43 UTC], ["updated_at", 2016-08-25 06:29:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 06:30:40 UTC], ["updated_at", 2016-08-25 06:30:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fda9412b580,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:30:40 UTC], ["updated_at", 2016-08-25 06:30:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fda96503cf0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:30:40 UTC], ["updated_at", 2016-08-25 06:30:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 06:30:40 UTC], ["updated_at", 2016-08-25 06:30:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fda9313ac98,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:30:40 UTC], ["updated_at", 2016-08-25 06:30:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fda93141278,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 06:30:40 UTC], ["updated_at", 2016-08-25 06:30:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mContract Load (0.7ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" ORDER BY "contracts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:11:08 UTC], ["updated_at", 2016-08-25 07:11:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fabcda91278,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:11:08 UTC], ["updated_at", 2016-08-25 07:11:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fabc9a88ff0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:11:08 UTC], ["updated_at", 2016-08-25 07:11:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:11:08 UTC], ["updated_at", 2016-08-25 07:11:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fabcdaa9918,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:11:08 UTC], ["updated_at", 2016-08-25 07:11:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fabcdab0678,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:11:08 UTC], ["updated_at", 2016-08-25 07:11:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:14:29 UTC], ["updated_at", 2016-08-25 07:14:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fba2d495158,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:14:29 UTC], ["updated_at", 2016-08-25 07:14:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fba2d49f3b0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:14:29 UTC], ["updated_at", 2016-08-25 07:14:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:14:29 UTC], ["updated_at", 2016-08-25 07:14:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fba2a9205e0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:14:29 UTC], ["updated_at", 2016-08-25 07:14:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fba2a1a98c0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:14:29 UTC], ["updated_at", 2016-08-25 07:14:29 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:15:00 UTC], ["updated_at", 2016-08-25 07:15:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb17d582470,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:15:00 UTC], ["updated_at", 2016-08-25 07:15:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb17d588c30,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:15:00 UTC], ["updated_at", 2016-08-25 07:15:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:15:00 UTC], ["updated_at", 2016-08-25 07:15:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb17b225c70,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:15:00 UTC], ["updated_at", 2016-08-25 07:15:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb17b22c1d8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:15:00 UTC], ["updated_at", 2016-08-25 07:15:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:17:37 UTC], ["updated_at", 2016-08-25 07:17:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fee792b1a28,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:17:37 UTC], ["updated_at", 2016-08-25 07:17:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fee79786508,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:17:37 UTC], ["updated_at", 2016-08-25 07:17:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mRentPhase Load (0.3ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:17:37 UTC], ["updated_at", 2016-08-25 07:17:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fee7979cc90,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:17:37 UTC], ["updated_at", 2016-08-25 07:17:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fee79261b18,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:17:37 UTC], ["updated_at", 2016-08-25 07:17:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:18:16 UTC], ["updated_at", 2016-08-25 07:18:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fbbf5e23ef8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:18:16 UTC], ["updated_at", 2016-08-25 07:18:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fbbf276dbc0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:18:16 UTC], ["updated_at", 2016-08-25 07:18:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:18:16 UTC], ["updated_at", 2016-08-25 07:18:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fbbf5e3a608,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:18:16 UTC], ["updated_at", 2016-08-25 07:18:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fbbf5e41520,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:18:16 UTC], ["updated_at", 2016-08-25 07:18:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:18:41 UTC], ["updated_at", 2016-08-25 07:18:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa62e872a68,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:18:41 UTC], ["updated_at", 2016-08-25 07:18:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa62c038e58,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:18:41 UTC], ["updated_at", 2016-08-25 07:18:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:18:41 UTC], ["updated_at", 2016-08-25 07:18:41 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa62e9003b8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:18:41 UTC], ["updated_at", 2016-08-25 07:18:41 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa62e912cc0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:18:41 UTC], ["updated_at", 2016-08-25 07:18:41 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.3ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (2.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:26:33 UTC], ["updated_at", 2016-08-25 07:26:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fe9f40fba00,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:26:33 UTC], ["updated_at", 2016-08-25 07:26:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe9f40f0470,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:26:33 UTC], ["updated_at", 2016-08-25 07:26:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:28:57 UTC], ["updated_at", 2016-08-25 07:28:57 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fe9f43df140,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:28:57 UTC], ["updated_at", 2016-08-25 07:28:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe9f43d44c0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:28:57 UTC], ["updated_at", 2016-08-25 07:28:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:29:41 UTC], ["updated_at", 2016-08-25 07:29:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fdced41c5b8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:29:41 UTC], ["updated_at", 2016-08-25 07:29:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fdced9f2c30,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:29:42 UTC], ["updated_at", 2016-08-25 07:29:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (10.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:32:17 UTC], ["updated_at", 2016-08-25 07:32:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fdced8327d8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:32:17 UTC], ["updated_at", 2016-08-25 07:32:17 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fdced828a30,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:32:17 UTC], ["updated_at", 2016-08-25 07:32:17 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:33:03 UTC], ["updated_at", 2016-08-25 07:33:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc7668a3678,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:33:03 UTC], ["updated_at", 2016-08-25 07:33:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc766898840,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:33:03 UTC], ["updated_at", 2016-08-25 07:33:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:33:03 UTC], ["updated_at", 2016-08-25 07:33:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc763ff38e0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:33:03 UTC], ["updated_at", 2016-08-25 07:33:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc763fe8760,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:33:03 UTC], ["updated_at", 2016-08-25 07:33:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (2.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:38:11 UTC], ["updated_at", 2016-08-25 07:38:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f9f36cbddb0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:38:11 UTC], ["updated_at", 2016-08-25 07:38:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f9f371a0e40,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:38:11 UTC], ["updated_at", 2016-08-25 07:38:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:38:24 UTC], ["updated_at", 2016-08-25 07:38:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f9f369b1a68,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:38:24 UTC], ["updated_at", 2016-08-25 07:38:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f9f369a2e78,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:38:24 UTC], ["updated_at", 2016-08-25 07:38:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:39:20 UTC], ["updated_at", 2016-08-25 07:39:20 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa58da68238,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:39:20 UTC], ["updated_at", 2016-08-25 07:39:20 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa58da7ae60,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:39:20 UTC], ["updated_at", 2016-08-25 07:39:20 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Load (0.3ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:39:29 UTC], ["updated_at", 2016-08-25 07:39:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa58d800e78,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:39:29 UTC], ["updated_at", 2016-08-25 07:39:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa58afe7108,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:39:29 UTC], ["updated_at", 2016-08-25 07:39:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:39:43 UTC], ["updated_at", 2016-08-25 07:39:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd719f325d0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:39:43 UTC], ["updated_at", 2016-08-25 07:39:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd719f29bd8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:39:43 UTC], ["updated_at", 2016-08-25 07:39:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (9.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:39:43 UTC], ["updated_at", 2016-08-25 07:39:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd71914a878,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:39:43 UTC], ["updated_at", 2016-08-25 07:39:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd719140670,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:39:43 UTC], ["updated_at", 2016-08-25 07:39:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:46:22 UTC], ["updated_at", 2016-08-25 07:46:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fafb3b1b6c8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:46:22 UTC], ["updated_at", 2016-08-25 07:46:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fafb5082b88,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:46:22 UTC], ["updated_at", 2016-08-25 07:46:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:46:22 UTC], ["updated_at", 2016-08-25 07:46:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fafb611b350,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:46:22 UTC], ["updated_at", 2016-08-25 07:46:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fafb6122830,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:46:22 UTC], ["updated_at", 2016-08-25 07:46:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:48:01 UTC], ["updated_at", 2016-08-25 07:48:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7feb2da0b8e0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:48:01 UTC], ["updated_at", 2016-08-25 07:48:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7feb2da118f8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:48:01 UTC], ["updated_at", 2016-08-25 07:48:01 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 07:48:01 UTC], ["updated_at", 2016-08-25 07:48:01 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7feb2a90b218,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:48:01 UTC], ["updated_at", 2016-08-25 07:48:01 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7feb2e241de8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 07:48:01 UTC], ["updated_at", 2016-08-25 07:48:01 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:22:04 UTC], ["updated_at", 2016-08-25 08:22:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f950cc02788,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:22:04 UTC], ["updated_at", 2016-08-25 08:22:04 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f950cc08570,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:22:04 UTC], ["updated_at", 2016-08-25 08:22:04 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (2.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:22:04 UTC], ["updated_at", 2016-08-25 08:22:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f950d1f9060,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:22:04 UTC], ["updated_at", 2016-08-25 08:22:04 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f950d1ea038,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:22:04 UTC], ["updated_at", 2016-08-25 08:22:04 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (2.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:23:01 UTC], ["updated_at", 2016-08-25 08:23:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8e95aa96e8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:23:01 UTC], ["updated_at", 2016-08-25 08:23:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8e96ab4010,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:23:01 UTC], ["updated_at", 2016-08-25 08:23:01 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:23:01 UTC], ["updated_at", 2016-08-25 08:23:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8e921737c0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:23:01 UTC], ["updated_at", 2016-08-25 08:23:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8e9205dc28,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:23:01 UTC], ["updated_at", 2016-08-25 08:23:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:23:44 UTC], ["updated_at", 2016-08-25 08:23:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fe27e87ba50,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:23:44 UTC], ["updated_at", 2016-08-25 08:23:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe27e881ab8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:23:44 UTC], ["updated_at", 2016-08-25 08:23:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:23:44 UTC], ["updated_at", 2016-08-25 08:23:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fe27e89acc0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:23:44 UTC], ["updated_at", 2016-08-25 08:23:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe27e8a18e0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:23:44 UTC], ["updated_at", 2016-08-25 08:23:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:25:44 UTC], ["updated_at", 2016-08-25 08:25:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f886e359d70,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:25:44 UTC], ["updated_at", 2016-08-25 08:25:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f886e34b3d8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:25:44 UTC], ["updated_at", 2016-08-25 08:25:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:45:40 UTC], ["updated_at", 2016-08-25 08:45:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fe4b955f640,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:45:40 UTC], ["updated_at", 2016-08-25 08:45:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe4b95656a8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:45:40 UTC], ["updated_at", 2016-08-25 08:45:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:45:40 UTC], ["updated_at", 2016-08-25 08:45:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fe4bb052da8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:45:40 UTC], ["updated_at", 2016-08-25 08:45:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe4bb059d38,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:45:40 UTC], ["updated_at", 2016-08-25 08:45:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:46:01 UTC], ["updated_at", 2016-08-25 08:46:01 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb1ef1f10a0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:46:01 UTC], ["updated_at", 2016-08-25 08:46:01 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb1ef2035e8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:46:01 UTC], ["updated_at", 2016-08-25 08:46:01 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (9.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:52:09 UTC], ["updated_at", 2016-08-25 08:52:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb1ed02bee8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:52:09 UTC], ["updated_at", 2016-08-25 08:52:09 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb1ebe61578,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:52:09 UTC], ["updated_at", 2016-08-25 08:52:09 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:52:18 UTC], ["updated_at", 2016-08-25 08:52:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc18f4268c0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:52:18 UTC], ["updated_at", 2016-08-25 08:52:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc18f42d698,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:52:18 UTC], ["updated_at", 2016-08-25 08:52:18 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:52:18 UTC], ["updated_at", 2016-08-25 08:52:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc18f4bc528,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:52:18 UTC], ["updated_at", 2016-08-25 08:52:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc18f4ae040,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:52:18 UTC], ["updated_at", 2016-08-25 08:52:18 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:53:18 UTC], ["updated_at", 2016-08-25 08:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f87ed0ea138,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:53:18 UTC], ["updated_at", 2016-08-25 08:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f87ed0dbac0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:53:18 UTC], ["updated_at", 2016-08-25 08:53:18 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:53:18 UTC], ["updated_at", 2016-08-25 08:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f87e9f3b588,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:53:18 UTC], ["updated_at", 2016-08-25 08:53:18 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f87e9f2b110,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:53:18 UTC], ["updated_at", 2016-08-25 08:53:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:53:50 UTC], ["updated_at", 2016-08-25 08:53:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f838c918888,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:53:50 UTC], ["updated_at", 2016-08-25 08:53:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f838fb76140,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:53:50 UTC], ["updated_at", 2016-08-25 08:53:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (8.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:53:50 UTC], ["updated_at", 2016-08-25 08:53:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f838c8334e0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:53:50 UTC], ["updated_at", 2016-08-25 08:53:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f838b2080a8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:53:50 UTC], ["updated_at", 2016-08-25 08:53:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:56:47 UTC], ["updated_at", 2016-08-25 08:56:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fea56b6ca90,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:56:47 UTC], ["updated_at", 2016-08-25 08:56:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fea530ab0f0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:56:47 UTC], ["updated_at", 2016-08-25 08:56:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:56:47 UTC], ["updated_at", 2016-08-25 08:56:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fea528f45c8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:56:47 UTC], ["updated_at", 2016-08-25 08:56:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fea528a2ea8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:56:47 UTC], ["updated_at", 2016-08-25 08:56:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:57:45 UTC], ["updated_at", 2016-08-25 08:57:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f966540d6e0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:57:45 UTC], ["updated_at", 2016-08-25 08:57:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f96649206b0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:57:45 UTC], ["updated_at", 2016-08-25 08:57:45 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:57:45 UTC], ["updated_at", 2016-08-25 08:57:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f966194c9e8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:57:45 UTC], ["updated_at", 2016-08-25 08:57:45 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f9660a427e0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:57:45 UTC], ["updated_at", 2016-08-25 08:57:45 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:58:02 UTC], ["updated_at", 2016-08-25 08:58:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa605171918,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:58:02 UTC], ["updated_at", 2016-08-25 08:58:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa605178628,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:58:02 UTC], ["updated_at", 2016-08-25 08:58:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:58:02 UTC], ["updated_at", 2016-08-25 08:58:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa6021b69a8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:58:02 UTC], ["updated_at", 2016-08-25 08:58:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa6051e3d38,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:58:02 UTC], ["updated_at", 2016-08-25 08:58:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-08-25 08:58:54 UTC], ["updated_at", 2016-08-25 08:58:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc3cc164558,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:58:54 UTC], ["updated_at", 2016-08-25 08:58:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc3cddabd60,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:58:54 UTC], ["updated_at", 2016-08-25 08:58:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (8.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:58:54 UTC], ["updated_at", 2016-08-25 08:58:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc3caa8bc00,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:58:54 UTC], ["updated_at", 2016-08-25 08:58:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc3caa50fd8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:58:54 UTC], ["updated_at", 2016-08-25 08:58:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-08-25 08:59:19 UTC], ["updated_at", 2016-08-25 08:59:19 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb57f893b68,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:59:19 UTC], ["updated_at", 2016-08-25 08:59:19 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7fb57f899c48,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:59:19 UTC], ["updated_at", 2016-08-25 08:59:19 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (9.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:59:19 UTC], ["updated_at", 2016-08-25 08:59:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb57f99a278,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:59:19 UTC], ["updated_at", 2016-08-25 08:59:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb57c0428b8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:59:19 UTC], ["updated_at", 2016-08-25 08:59:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-08-25 08:59:53 UTC], ["updated_at", 2016-08-25 08:59:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fbc82160c88,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:59:53 UTC], ["updated_at", 2016-08-25 08:59:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7fbc81151e28,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:59:53 UTC], ["updated_at", 2016-08-25 08:59:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (8.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 08:59:53 UTC], ["updated_at", 2016-08-25 08:59:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fbc85cbd588,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:59:53 UTC], ["updated_at", 2016-08-25 08:59:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fbc821009f0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 08:59:53 UTC], ["updated_at", 2016-08-25 08:59:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 09:00:15 UTC], ["updated_at", 2016-08-25 09:00:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7faa8990f278,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:00:15 UTC], ["updated_at", 2016-08-25 09:00:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7faa899159e8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:00:15 UTC], ["updated_at", 2016-08-25 09:00:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (8.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-08-25 09:00:15 UTC], ["updated_at", 2016-08-25 09:00:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7faa8d547010,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:00:15 UTC], ["updated_at", 2016-08-25 09:00:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7faa8d54d9b0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:00:15 UTC], ["updated_at", 2016-08-25 09:00:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-08-25 09:00:25 UTC], ["updated_at", 2016-08-25 09:00:25 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa4f357fdd8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:00:25 UTC], ["updated_at", 2016-08-25 09:00:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7fa4f3586ac0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:00:25 UTC], ["updated_at", 2016-08-25 09:00:25 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (8.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 09:00:25 UTC], ["updated_at", 2016-08-25 09:00:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa4f6a599c8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:00:25 UTC], ["updated_at", 2016-08-25 09:00:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa4f3023f10,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:00:25 UTC], ["updated_at", 2016-08-25 09:00:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 09:04:00 UTC], ["updated_at", 2016-08-25 09:04:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ff63c50d180,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:04:00 UTC], ["updated_at", 2016-08-25 09:04:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff63c4fe6d0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:04:00 UTC], ["updated_at", 2016-08-25 09:04:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-08-25 09:04:00 UTC], ["updated_at", 2016-08-25 09:04:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 26 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ff63c424b10,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:04:00 UTC], ["updated_at", 2016-08-25 09:04:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7ff63c416290,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:04:00 UTC], ["updated_at", 2016-08-25 09:04:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-08-25 09:05:26 UTC], ["updated_at", 2016-08-25 09:05:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fce5c7c7ab8,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:05:26 UTC], ["updated_at", 2016-08-25 09:05:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7fce5c7cdad0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:05:26 UTC], ["updated_at", 2016-08-25 09:05:26 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 09:05:26 UTC], ["updated_at", 2016-08-25 09:05:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fce5f8aa6d0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:05:26 UTC], ["updated_at", 2016-08-25 09:05:26 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fce5c062908,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:05:26 UTC], ["updated_at", 2016-08-25 09:05:26 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-08-25 09:06:23 UTC], ["updated_at", 2016-08-25 09:06:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8554936e18,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:06:23 UTC], ["updated_at", 2016-08-25 09:06:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7f85573ea858,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:06:23 UTC], ["updated_at", 2016-08-25 09:06:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 09:06:24 UTC], ["updated_at", 2016-08-25 09:06:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8555065ea0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:06:24 UTC], ["updated_at", 2016-08-25 09:06:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f855502c1a0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:06:24 UTC], ["updated_at", 2016-08-25 09:06:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Mar 2017], ["created_at", 2016-08-25 09:06:46 UTC], ["updated_at", 2016-08-25 09:06:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f9eae7b30a0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:06:46 UTC], ["updated_at", 2016-08-25 09:06:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Mar 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7f9eae7b8f00,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:06:46 UTC], ["updated_at", 2016-08-25 09:06:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 09:06:47 UTC], ["updated_at", 2016-08-25 09:06:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f9eaf092270,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:06:47 UTC], ["updated_at", 2016-08-25 09:06:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f9eab18f780,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:06:47 UTC], ["updated_at", 2016-08-25 09:06:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Mar 2017], ["created_at", 2016-08-25 09:10:14 UTC], ["updated_at", 2016-08-25 09:10:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fcebebfcf18,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:10:14 UTC], ["updated_at", 2016-08-25 09:10:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Mar 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7fcebf1782d0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:10:14 UTC], ["updated_at", 2016-08-25 09:10:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "2"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 09:10:14 UTC], ["updated_at", 2016-08-25 09:10:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fcebeccf1c0,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:10:14 UTC], ["updated_at", 2016-08-25 09:10:14 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fcebc067f88,'0.9E3',9(18)>], ["contract_id", "2"], ["created_at", 2016-08-25 09:10:14 UTC], ["updated_at", 2016-08-25 09:10:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "contracts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "start_date" date, "end_date" date, "customer_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "customers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "invoices" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "start_date" date, "end_date" date, "due_date" date, "total" decimal(10,2), "contract_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "lineitmes" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "desc" varchar, "start_date" date, "end_date" date, "unit" varchar, "total" decimal(10,2), "unit_price" decimal(10,2), "invoice_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "rent_phases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "start_date" date, "end_date" date, "cycle" integer, "monthly_price" decimal(10,2), "contract_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES ('20160825092036')[0m
  [1m[35m (0.4ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO schema_migrations (version) VALUES ('20160825030753'), ('20160825031008'), ('20160825031038'), ('20160825031348');

[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2016-08-25 09:29:29 UTC], ["updated_at", 2016-08-25 09:29:29 UTC]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 09:29:29 UTC], ["updated_at", 2016-08-25 09:29:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7feeac950b58,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 09:29:29 UTC], ["updated_at", 2016-08-25 09:29:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7feeac941dd8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 09:29:29 UTC], ["updated_at", 2016-08-25 09:29:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Mar 2017], ["created_at", 2016-08-25 09:29:29 UTC], ["updated_at", 2016-08-25 09:29:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7feeac85ba90,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 09:29:29 UTC], ["updated_at", 2016-08-25 09:29:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Mar 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7feeac851428,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 09:29:29 UTC], ["updated_at", 2016-08-25 09:29:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Mar 2017], ["created_at", 2016-08-25 10:02:54 UTC], ["updated_at", 2016-08-25 10:02:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f881dd65298,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:02:54 UTC], ["updated_at", 2016-08-25 10:02:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Mar 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7f881e8a36c8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:02:54 UTC], ["updated_at", 2016-08-25 10:02:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:02:54 UTC], ["updated_at", 2016-08-25 10:02:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 10:02:54 UTC], ["updated_at", 2016-08-25 10:02:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f881dd8f638,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:02:54 UTC], ["updated_at", 2016-08-25 10:02:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f881e9006c0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:02:54 UTC], ["updated_at", 2016-08-25 10:02:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Mar 2017], ["created_at", 2016-08-25 10:03:47 UTC], ["updated_at", 2016-08-25 10:03:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa3d58538d0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:03:47 UTC], ["updated_at", 2016-08-25 10:03:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Mar 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7fa3d54b6718,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:03:47 UTC], ["updated_at", 2016-08-25 10:03:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:03:47 UTC], ["updated_at", 2016-08-25 10:03:47 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 10:04:31 UTC], ["updated_at", 2016-08-25 10:04:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f9856306ad8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:04:31 UTC], ["updated_at", 2016-08-25 10:04:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f985630c758,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:04:31 UTC], ["updated_at", 2016-08-25 10:04:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Mar 2017], ["created_at", 2016-08-25 10:04:31 UTC], ["updated_at", 2016-08-25 10:04:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f98528909a8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:04:31 UTC], ["updated_at", 2016-08-25 10:04:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Mar 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7f98528a3670,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:04:31 UTC], ["updated_at", 2016-08-25 10:04:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:04:31 UTC], ["updated_at", 2016-08-25 10:04:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Mar 2017], ["created_at", 2016-08-25 10:05:22 UTC], ["updated_at", 2016-08-25 10:05:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb21935ef58,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:05:22 UTC], ["updated_at", 2016-08-25 10:05:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Mar 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7fb21cb7f0b8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:05:22 UTC], ["updated_at", 2016-08-25 10:05:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:05:22 UTC], ["updated_at", 2016-08-25 10:05:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:05:22 UTC], ["updated_at", 2016-08-25 10:05:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 25 Nov 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:05:22 UTC], ["updated_at", 2016-08-25 10:05:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sat, 26 Nov 2016], ["end_date", Wed, 25 Jan 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:05:22 UTC], ["updated_at", 2016-08-25 10:05:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:05:22 UTC], ["updated_at", 2016-08-25 10:05:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 10:05:22 UTC], ["updated_at", 2016-08-25 10:05:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb21d032a88,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:05:22 UTC], ["updated_at", 2016-08-25 10:05:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb21cb9f750,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:05:22 UTC], ["updated_at", 2016-08-25 10:05:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 10:06:31 UTC], ["updated_at", 2016-08-25 10:06:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ff944c83120,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:31 UTC], ["updated_at", 2016-08-25 10:06:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff944c89228,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:31 UTC], ["updated_at", 2016-08-25 10:06:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Mar 2017], ["created_at", 2016-08-25 10:06:31 UTC], ["updated_at", 2016-08-25 10:06:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ff941a559c8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:31 UTC], ["updated_at", 2016-08-25 10:06:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Mar 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7ff941a5c5e8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:31 UTC], ["updated_at", 2016-08-25 10:06:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:31 UTC], ["updated_at", 2016-08-25 10:06:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:31 UTC], ["updated_at", 2016-08-25 10:06:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 25 Nov 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:31 UTC], ["updated_at", 2016-08-25 10:06:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sat, 26 Nov 2016], ["end_date", Wed, 25 Jan 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:31 UTC], ["updated_at", 2016-08-25 10:06:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:31 UTC], ["updated_at", 2016-08-25 10:06:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Mar 2017], ["created_at", 2016-08-25 10:06:59 UTC], ["updated_at", 2016-08-25 10:06:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fe13e9db5a8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:59 UTC], ["updated_at", 2016-08-25 10:06:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Mar 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7fe13f1565f8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:59 UTC], ["updated_at", 2016-08-25 10:06:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:59 UTC], ["updated_at", 2016-08-25 10:06:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:59 UTC], ["updated_at", 2016-08-25 10:06:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 25 Nov 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:59 UTC], ["updated_at", 2016-08-25 10:06:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sat, 26 Nov 2016], ["end_date", Wed, 25 Jan 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:59 UTC], ["updated_at", 2016-08-25 10:06:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:59 UTC], ["updated_at", 2016-08-25 10:06:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 10:06:59 UTC], ["updated_at", 2016-08-25 10:06:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fe13f19d2f0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:59 UTC], ["updated_at", 2016-08-25 10:06:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe13f18e6d8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:06:59 UTC], ["updated_at", 2016-08-25 10:06:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Mar 2017], ["created_at", 2016-08-25 10:07:21 UTC], ["updated_at", 2016-08-25 10:07:21 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ff7c0a3ab00,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:07:21 UTC], ["updated_at", 2016-08-25 10:07:21 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Mar 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7ff7c4da28c0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:07:21 UTC], ["updated_at", 2016-08-25 10:07:21 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:07:21 UTC], ["updated_at", 2016-08-25 10:07:21 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:07:21 UTC], ["updated_at", 2016-08-25 10:07:21 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 25 Nov 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:07:21 UTC], ["updated_at", 2016-08-25 10:07:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sat, 26 Nov 2016], ["end_date", Wed, 25 Jan 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:07:21 UTC], ["updated_at", 2016-08-25 10:07:21 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:07:22 UTC], ["updated_at", 2016-08-25 10:07:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 10:07:22 UTC], ["updated_at", 2016-08-25 10:07:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ff7c174db30,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:07:22 UTC], ["updated_at", 2016-08-25 10:07:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff7c173fd28,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:07:22 UTC], ["updated_at", 2016-08-25 10:07:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Mar 2017], ["created_at", 2016-08-25 10:08:42 UTC], ["updated_at", 2016-08-25 10:08:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fbba6979dc0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:08:42 UTC], ["updated_at", 2016-08-25 10:08:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Mar 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7fbba69805d0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:08:42 UTC], ["updated_at", 2016-08-25 10:08:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:08:42 UTC], ["updated_at", 2016-08-25 10:08:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:08:42 UTC], ["updated_at", 2016-08-25 10:08:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 25 Nov 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:08:42 UTC], ["updated_at", 2016-08-25 10:08:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sat, 26 Nov 2016], ["end_date", Wed, 25 Jan 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:08:42 UTC], ["updated_at", 2016-08-25 10:08:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:08:42 UTC], ["updated_at", 2016-08-25 10:08:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 10:08:42 UTC], ["updated_at", 2016-08-25 10:08:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fbba6477bb0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:08:42 UTC], ["updated_at", 2016-08-25 10:08:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fbba646da48,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:08:42 UTC], ["updated_at", 2016-08-25 10:08:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Mar 2018], ["created_at", 2016-08-25 10:09:26 UTC], ["updated_at", 2016-08-25 10:09:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fcfdde98338,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:26 UTC], ["updated_at", 2016-08-25 10:09:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sat, 24 Mar 2018], ["cycle", 3], ["monthly_price", #<BigDecimal:7fcfdb5ff110,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:26 UTC], ["updated_at", 2016-08-25 10:09:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:26 UTC], ["updated_at", 2016-08-25 10:09:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:26 UTC], ["updated_at", 2016-08-25 10:09:26 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:26 UTC], ["updated_at", 2016-08-25 10:09:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:26 UTC], ["updated_at", 2016-08-25 10:09:26 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:26 UTC], ["updated_at", 2016-08-25 10:09:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Jun 2017], ["end_date", Mon, 25 Sep 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:26 UTC], ["updated_at", 2016-08-25 10:09:26 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Tue, 26 Sep 2017], ["end_date", Mon, 25 Dec 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:26 UTC], ["updated_at", 2016-08-25 10:09:26 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Tue, 26 Dec 2017], ["end_date", Sat, 24 Mar 2018], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:26 UTC], ["updated_at", 2016-08-25 10:09:26 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 10:09:26 UTC], ["updated_at", 2016-08-25 10:09:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fcfdde82e48,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:26 UTC], ["updated_at", 2016-08-25 10:09:26 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fcfdde73678,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:26 UTC], ["updated_at", 2016-08-25 10:09:26 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 10:09:52 UTC], ["updated_at", 2016-08-25 10:09:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ff0a7a2aef0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:52 UTC], ["updated_at", 2016-08-25 10:09:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff0a7a30f80,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:52 UTC], ["updated_at", 2016-08-25 10:09:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 10:09:52 UTC], ["updated_at", 2016-08-25 10:09:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ff0a504b648,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:52 UTC], ["updated_at", 2016-08-25 10:09:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff0a3c26168,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:52 UTC], ["updated_at", 2016-08-25 10:09:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.3ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:52 UTC], ["updated_at", 2016-08-25 10:09:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:52 UTC], ["updated_at", 2016-08-25 10:09:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:52 UTC], ["updated_at", 2016-08-25 10:09:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:52 UTC], ["updated_at", 2016-08-25 10:09:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:52 UTC], ["updated_at", 2016-08-25 10:09:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:09:52 UTC], ["updated_at", 2016-08-25 10:09:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 10:11:55 UTC], ["updated_at", 2016-08-25 10:11:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa40a8e6970,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:11:55 UTC], ["updated_at", 2016-08-25 10:11:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa40a8ece10,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:11:55 UTC], ["updated_at", 2016-08-25 10:11:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 10:11:55 UTC], ["updated_at", 2016-08-25 10:11:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa40a8fcb58,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:11:55 UTC], ["updated_at", 2016-08-25 10:11:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa40a90ff78,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 10:11:55 UTC], ["updated_at", 2016-08-25 10:11:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:11:55 UTC], ["updated_at", 2016-08-25 10:11:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:11:55 UTC], ["updated_at", 2016-08-25 10:11:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["contract_id", "1"], ["created_at", 2016-08-25 10:11:55 UTC], ["updated_at", 2016-08-25 10:11:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:11:55 UTC], ["updated_at", 2016-08-25 10:11:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:11:55 UTC], ["updated_at", 2016-08-25 10:11:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["contract_id", "1"], ["created_at", 2016-08-25 10:11:55 UTC], ["updated_at", 2016-08-25 10:11:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:05:59 UTC], ["updated_at", 2016-08-25 12:05:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa65d9b1288,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:05:59 UTC], ["updated_at", 2016-08-25 12:05:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa65d9bb878,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:05:59 UTC], ["updated_at", 2016-08-25 12:05:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:05:59 UTC], ["updated_at", 2016-08-25 12:05:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:05:59 UTC], ["updated_at", 2016-08-25 12:05:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:05:59 UTC], ["updated_at", 2016-08-25 12:05:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:05:59 UTC], ["updated_at", 2016-08-25 12:05:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:05:59 UTC], ["updated_at", 2016-08-25 12:05:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:05:59 UTC], ["updated_at", 2016-08-25 12:05:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:05:59 UTC], ["updated_at", 2016-08-25 12:05:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa65b11e370,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:05:59 UTC], ["updated_at", 2016-08-25 12:05:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa65b114668,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:05:59 UTC], ["updated_at", 2016-08-25 12:05:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:11:02 UTC], ["updated_at", 2016-08-25 12:11:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fdf73653470,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:11:02 UTC], ["updated_at", 2016-08-25 12:11:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fdf73648d40,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:11:02 UTC], ["updated_at", 2016-08-25 12:11:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:11:02 UTC], ["updated_at", 2016-08-25 12:11:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:11:02 UTC], ["updated_at", 2016-08-25 12:11:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:11:02 UTC], ["updated_at", 2016-08-25 12:11:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:11:02 UTC], ["updated_at", 2016-08-25 12:11:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:11:02 UTC], ["updated_at", 2016-08-25 12:11:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:11:02 UTC], ["updated_at", 2016-08-25 12:11:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:11:02 UTC], ["updated_at", 2016-08-25 12:11:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fdf7453e660,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:11:02 UTC], ["updated_at", 2016-08-25 12:11:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fdf7452d590,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:11:02 UTC], ["updated_at", 2016-08-25 12:11:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:21:56 UTC], ["updated_at", 2016-08-25 12:21:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8b463a4ae8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:21:56 UTC], ["updated_at", 2016-08-25 12:21:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8b463afe70,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:21:56 UTC], ["updated_at", 2016-08-25 12:21:56 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:21:56 UTC], ["updated_at", 2016-08-25 12:21:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:21:56 UTC], ["updated_at", 2016-08-25 12:21:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:21:56 UTC], ["updated_at", 2016-08-25 12:21:56 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:21:56 UTC], ["updated_at", 2016-08-25 12:21:56 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:21:56 UTC], ["updated_at", 2016-08-25 12:21:56 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:21:56 UTC], ["updated_at", 2016-08-25 12:21:56 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:21:56 UTC], ["updated_at", 2016-08-25 12:21:56 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8b463cfa40,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:21:56 UTC], ["updated_at", 2016-08-25 12:21:56 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8b463c5d88,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:21:56 UTC], ["updated_at", 2016-08-25 12:21:56 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:22:46 UTC], ["updated_at", 2016-08-25 12:22:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa3cbac8700,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:22:46 UTC], ["updated_at", 2016-08-25 12:22:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa3cbab8918,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:22:46 UTC], ["updated_at", 2016-08-25 12:22:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:22:46 UTC], ["updated_at", 2016-08-25 12:22:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:22:46 UTC], ["updated_at", 2016-08-25 12:22:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:22:46 UTC], ["updated_at", 2016-08-25 12:22:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:22:46 UTC], ["updated_at", 2016-08-25 12:22:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:22:46 UTC], ["updated_at", 2016-08-25 12:22:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:22:46 UTC], ["updated_at", 2016-08-25 12:22:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:22:46 UTC], ["updated_at", 2016-08-25 12:22:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa3c8b0b7b0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:22:46 UTC], ["updated_at", 2016-08-25 12:22:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa3c96d3ed0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:22:46 UTC], ["updated_at", 2016-08-25 12:22:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:24:44 UTC], ["updated_at", 2016-08-25 12:24:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa5854c4618,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:24:44 UTC], ["updated_at", 2016-08-25 12:24:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa5854d7948,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:24:44 UTC], ["updated_at", 2016-08-25 12:24:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.5ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:24:44 UTC], ["updated_at", 2016-08-25 12:24:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:24:44 UTC], ["updated_at", 2016-08-25 12:24:44 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:24:44 UTC], ["updated_at", 2016-08-25 12:24:44 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:24:44 UTC], ["updated_at", 2016-08-25 12:24:44 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:24:44 UTC], ["updated_at", 2016-08-25 12:24:44 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:24:44 UTC], ["updated_at", 2016-08-25 12:24:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:24:44 UTC], ["updated_at", 2016-08-25 12:24:44 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa5854c4c30,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:24:44 UTC], ["updated_at", 2016-08-25 12:24:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa5854b6158,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:24:44 UTC], ["updated_at", 2016-08-25 12:24:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:25:57 UTC], ["updated_at", 2016-08-25 12:25:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ff9b6c2f8f0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:25:57 UTC], ["updated_at", 2016-08-25 12:25:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff9b711a298,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:25:57 UTC], ["updated_at", 2016-08-25 12:25:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:25:57 UTC], ["updated_at", 2016-08-25 12:25:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:25:57 UTC], ["updated_at", 2016-08-25 12:25:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:25:57 UTC], ["updated_at", 2016-08-25 12:25:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:25:57 UTC], ["updated_at", 2016-08-25 12:25:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:25:57 UTC], ["updated_at", 2016-08-25 12:25:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:25:57 UTC], ["updated_at", 2016-08-25 12:25:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:25:57 UTC], ["updated_at", 2016-08-25 12:25:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ff9b6c1fc48,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:25:57 UTC], ["updated_at", 2016-08-25 12:25:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff9b6c150b8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:25:57 UTC], ["updated_at", 2016-08-25 12:25:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:26:36 UTC], ["updated_at", 2016-08-25 12:26:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd3a71921e8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:36 UTC], ["updated_at", 2016-08-25 12:26:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd3a7199308,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:36 UTC], ["updated_at", 2016-08-25 12:26:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:36 UTC], ["updated_at", 2016-08-25 12:26:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:36 UTC], ["updated_at", 2016-08-25 12:26:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:36 UTC], ["updated_at", 2016-08-25 12:26:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:36 UTC], ["updated_at", 2016-08-25 12:26:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:36 UTC], ["updated_at", 2016-08-25 12:26:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:36 UTC], ["updated_at", 2016-08-25 12:26:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:26:36 UTC], ["updated_at", 2016-08-25 12:26:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd3a6cea370,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:36 UTC], ["updated_at", 2016-08-25 12:26:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd3a7182ce8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:36 UTC], ["updated_at", 2016-08-25 12:26:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:26:48 UTC], ["updated_at", 2016-08-25 12:26:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb4b71095a0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:48 UTC], ["updated_at", 2016-08-25 12:26:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb4b31619e8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:48 UTC], ["updated_at", 2016-08-25 12:26:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:48 UTC], ["updated_at", 2016-08-25 12:26:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:48 UTC], ["updated_at", 2016-08-25 12:26:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:48 UTC], ["updated_at", 2016-08-25 12:26:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:48 UTC], ["updated_at", 2016-08-25 12:26:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:48 UTC], ["updated_at", 2016-08-25 12:26:48 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:48 UTC], ["updated_at", 2016-08-25 12:26:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:26:48 UTC], ["updated_at", 2016-08-25 12:26:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb4b70f2d00,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:48 UTC], ["updated_at", 2016-08-25 12:26:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb4b70e39b8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:26:48 UTC], ["updated_at", 2016-08-25 12:26:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:29:45 UTC], ["updated_at", 2016-08-25 12:29:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f885e82aa58,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:29:45 UTC], ["updated_at", 2016-08-25 12:29:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f885e831768,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:29:45 UTC], ["updated_at", 2016-08-25 12:29:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:29:45 UTC], ["updated_at", 2016-08-25 12:29:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:29:45 UTC], ["updated_at", 2016-08-25 12:29:45 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:29:45 UTC], ["updated_at", 2016-08-25 12:29:45 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:29:45 UTC], ["updated_at", 2016-08-25 12:29:45 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:29:45 UTC], ["updated_at", 2016-08-25 12:29:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:29:45 UTC], ["updated_at", 2016-08-25 12:29:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:29:45 UTC], ["updated_at", 2016-08-25 12:29:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f885e4276b8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:29:45 UTC], ["updated_at", 2016-08-25 12:29:45 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f885e41c2b8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:29:45 UTC], ["updated_at", 2016-08-25 12:29:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:30:18 UTC], ["updated_at", 2016-08-25 12:30:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb1e6962428,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:30:18 UTC], ["updated_at", 2016-08-25 12:30:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb1e6968cd8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:30:18 UTC], ["updated_at", 2016-08-25 12:30:18 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:30:18 UTC], ["updated_at", 2016-08-25 12:30:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:30:18 UTC], ["updated_at", 2016-08-25 12:30:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["contract_id", "1"], ["created_at", 2016-08-25 12:30:18 UTC], ["updated_at", 2016-08-25 12:30:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:30:18 UTC], ["updated_at", 2016-08-25 12:30:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:30:18 UTC], ["updated_at", 2016-08-25 12:30:18 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", ""], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["contract_id", "1"], ["created_at", 2016-08-25 12:30:18 UTC], ["updated_at", 2016-08-25 12:30:18 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 12:30:18 UTC], ["updated_at", 2016-08-25 12:30:18 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb1e63d3610,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:30:18 UTC], ["updated_at", 2016-08-25 12:30:18 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb1e69585e0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 12:30:18 UTC], ["updated_at", 2016-08-25 12:30:18 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 13:09:35 UTC], ["updated_at", 2016-08-25 13:09:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb40a76da70,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:09:35 UTC], ["updated_at", 2016-08-25 13:09:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb40bebe710,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:09:35 UTC], ["updated_at", 2016-08-25 13:09:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb40bc8d7c0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fb40bc84e68,'0.2959E2',18(36)>], ["created_at", 2016-08-25 13:09:36 UTC], ["updated_at", 2016-08-25 13:09:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 13:09:36 UTC], ["updated_at", 2016-08-25 13:09:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb40bc346e8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:09:36 UTC], ["updated_at", 2016-08-25 13:09:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb40b0d35b0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:09:36 UTC], ["updated_at", 2016-08-25 13:09:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 13:11:40 UTC], ["updated_at", 2016-08-25 13:11:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fccef1cbbf0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:11:40 UTC], ["updated_at", 2016-08-25 13:11:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fccef1d1b68,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:11:40 UTC], ["updated_at", 2016-08-25 13:11:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fccef29b828,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fccef299d48,'0.2959E2',18(36)>], ["created_at", 2016-08-25 13:11:40 UTC], ["updated_at", 2016-08-25 13:11:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 13:11:40 UTC], ["updated_at", 2016-08-25 13:11:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fccef248290,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:11:40 UTC], ["updated_at", 2016-08-25 13:11:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fccef23a2d0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:11:40 UTC], ["updated_at", 2016-08-25 13:11:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 13:14:00 UTC], ["updated_at", 2016-08-25 13:14:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f839aaae9f0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:14:00 UTC], ["updated_at", 2016-08-25 13:14:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f839d194b50,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:14:00 UTC], ["updated_at", 2016-08-25 13:14:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 13:14:00 UTC], ["updated_at", 2016-08-25 13:14:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8399a69d38,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:14:00 UTC], ["updated_at", 2016-08-25 13:14:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8399a704f8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:14:00 UTC], ["updated_at", 2016-08-25 13:14:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7f839d226d48,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:14:00 UTC], ["updated_at", 2016-08-25 13:14:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f839d1e4c18,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f839d1de7c8,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 13:14:00 UTC], ["updated_at", 2016-08-25 13:14:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[] => 周期:[trial month] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f839d1d60a0,'0.9E3',9(18)>], ["updated_at", 2016-08-25 13:14:00 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7f839d1bcfd8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:14:00 UTC], ["updated_at", 2016-08-25 13:14:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "不足月"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f839d1b7c68,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f839d1b6430,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 13:14:00 UTC], ["updated_at", 2016-08-25 13:14:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[] => 周期:[trial month] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f839d1a7840,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 13:14:00 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7f8399620240,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:20:03 UTC], ["updated_at", 2016-08-25 13:20:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f839a59ddd0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f839a59c458,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 13:20:03 UTC], ["updated_at", 2016-08-25 13:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f839960a008,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8399608550,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 13:20:03 UTC], ["updated_at", 2016-08-25 13:20:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f83995fa180,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f83995f8768,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 13:20:03 UTC], ["updated_at", 2016-08-25 13:20:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[] => 周期:[normal month] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f83995e9718,'0.36E4',9(18)>], ["updated_at", 2016-08-25 13:20:03 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7f83995ca7f0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:20:03 UTC], ["updated_at", 2016-08-25 13:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f83995c0f70,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f83995bb570,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 13:20:03 UTC], ["updated_at", 2016-08-25 13:20:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7f83995b0fd0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f83995ab558,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 13:20:03 UTC], ["updated_at", 2016-08-25 13:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7f83995a13f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f839a977668,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 13:20:03 UTC], ["updated_at", 2016-08-25 13:20:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[] => 周期:[normal month] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f8399593ea8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 13:20:03 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7f839a58d6d8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:20:03 UTC], ["updated_at", 2016-08-25 13:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7f8399580088,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f839a586928,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 13:20:03 UTC], ["updated_at", 2016-08-25 13:20:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7f839a57c720,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f839a96ec98,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 13:20:03 UTC], ["updated_at", 2016-08-25 13:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7f839a574818,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f839a56ed78,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 13:20:03 UTC], ["updated_at", 2016-08-25 13:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[] => 周期:[normal month] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f839a30f3e8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 13:20:03 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7f8399579170,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:20:03 UTC], ["updated_at", 2016-08-25 13:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7f839955f2e8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f839955d330,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 13:20:03 UTC], ["updated_at", 2016-08-25 13:20:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7f839955ace8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8399559348,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 13:20:03 UTC], ["updated_at", 2016-08-25 13:20:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "不足月"], ["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7f839a376d40,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f839a3743d8,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 13:20:03 UTC], ["updated_at", 2016-08-25 13:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[] => 周期:[normal month] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7f839a544398,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 13:20:03 UTC], ["id", 6]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (9.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fe14eab3a88,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe14e2b6128,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7fe14e384b68,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe14e306f10,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fe14e305548,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[] => 周期:[trial month] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fe14b095fe0,'0.9E3',9(18)>], ["updated_at", 2016-08-25 13:21:38 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7fe14ead9378,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "不足月"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fe14eacb750,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fe14eac8be0,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[] => 周期:[trial month] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fe14eac2560,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 13:21:38 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7fe14e2e6f58,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fe14e2ddc28,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe14e2dc378,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fe14e2ce4a8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe14e2ccc48,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fe14e2be940,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe14e2bcfa0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[] => 周期:[normal month] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fe14eab20e8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 13:21:38 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7fe14eaaa280,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fe14ea9b8c0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe14ea99e08,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fe14ea8b9c0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe14ea89e18,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fe14ea7b7f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe14ea79ce8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[] => 周期:[normal month] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fe14ea6ae78,'0.36E4',9(18)>], ["updated_at", 2016-08-25 13:21:38 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7fe14b8cc010,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fe14ea63dd0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe14ea61b48,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fe14e2976b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe14e2954c8,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fe14e286798,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe14e284df8,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[] => 周期:[normal month] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fe14e2756a0,'0.36E4',9(18)>], ["updated_at", 2016-08-25 13:21:38 UTC], ["id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7fe14e256d18,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fe14e24d150,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe14e247688,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fe14e23cf08,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe14b08f438,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "不足月"], ["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fe14e234948,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fe14e22eef8,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 13:21:38 UTC], ["updated_at", 2016-08-25 13:21:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[] => 周期:[normal month] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fe14e21fca0,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 13:21:38 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (10.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 13:27:28 UTC], ["updated_at", 2016-08-25 13:27:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fe14a563f28,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:27:28 UTC], ["updated_at", 2016-08-25 13:27:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe14a559e60,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:27:28 UTC], ["updated_at", 2016-08-25 13:27:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 13:28:44 UTC], ["updated_at", 2016-08-25 13:28:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd6ca480578,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:28:44 UTC], ["updated_at", 2016-08-25 13:28:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd6ca48aaa0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:28:44 UTC], ["updated_at", 2016-08-25 13:28:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7fd6ce302198,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:28:44 UTC], ["updated_at", 2016-08-25 13:28:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "足月"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd6ce23b200,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd6ce2397c0,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 13:28:44 UTC], ["updated_at", 2016-08-25 13:28:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLineitme Load (1.6ms)[0m  [1m[34mSELECT "lineitmes".* FROM "lineitmes"[0m
  [1m[36mLineitme Load (0.1ms)[0m  [1m[34mSELECT "lineitmes".* FROM "lineitmes"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[trial month] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fd6cc01f090,'0.9E3',9(18)>], ["updated_at", 2016-08-25 13:36:25 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7fd6ca1e3bd0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:36:25 UTC], ["updated_at", 2016-08-25 13:36:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitmes" ("desc", "start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["desc", "不足月"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fd6ccd5a160,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fd6ccd586a8,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 13:36:25 UTC], ["updated_at", 2016-08-25 13:36:25 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "contracts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "start_date" date, "end_date" date, "customer_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "customers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "invoices" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "start_date" date, "end_date" date, "due_date" date, "total" decimal(10,2), "contract_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "lineitmes" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "desc" varchar, "start_date" date, "end_date" date, "unit" varchar, "total" decimal(10,2), "unit_price" decimal(10,2), "invoice_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "rent_phases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "start_date" date, "end_date" date, "cycle" integer, "monthly_price" decimal(10,2), "contract_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES ('20160825092036')[0m
  [1m[35m (0.6ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO schema_migrations (version) VALUES ('20160825030753'), ('20160825031008'), ('20160825031038');

[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2016-08-25 13:46:25 UTC], ["updated_at", 2016-08-25 13:46:25 UTC]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "contracts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "start_date" date, "end_date" date, "customer_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "customers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "invoices" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "start_date" date, "end_date" date, "due_date" date, "total" decimal(10,2), "contract_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "lineitems" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "start_date" date, "end_date" date, "unit" varchar, "total" decimal(10,2), "unit_price" decimal(10,2), "invoice_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "lineitmes" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "desc" varchar, "start_date" date, "end_date" date, "unit" varchar, "total" decimal(10,2), "unit_price" decimal(10,2), "invoice_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "rent_phases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "start_date" date, "end_date" date, "cycle" integer, "monthly_price" decimal(10,2), "contract_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES ('20160825134548')[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO schema_migrations (version) VALUES ('20160825030753'), ('20160825031008'), ('20160825031038'), ('20160825092036');

[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2016-08-25 13:46:46 UTC], ["updated_at", 2016-08-25 13:46:46 UTC]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 13:46:46 UTC], ["updated_at", 2016-08-25 13:46:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f809f05adf8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:46:46 UTC], ["updated_at", 2016-08-25 13:46:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f809f04bbc8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:46:46 UTC], ["updated_at", 2016-08-25 13:46:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7f809dd07e40,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:46:47 UTC], ["updated_at", 2016-08-25 13:46:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 13:47:29 UTC], ["updated_at", 2016-08-25 13:47:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fce2c681f80,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:47:29 UTC], ["updated_at", 2016-08-25 13:47:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fce2c688830,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:47:29 UTC], ["updated_at", 2016-08-25 13:47:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7fce2a0f6478,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:47:29 UTC], ["updated_at", 2016-08-25 13:47:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 13:48:17 UTC], ["updated_at", 2016-08-25 13:48:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fdf0beb1d28,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:48:17 UTC], ["updated_at", 2016-08-25 13:48:17 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fdf0c983ee0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:48:17 UTC], ["updated_at", 2016-08-25 13:48:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7fdf0e6b9f00,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:48:17 UTC], ["updated_at", 2016-08-25 13:48:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (9.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (9.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "contracts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "start_date" date, "end_date" date, "customer_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "customers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "invoices" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "start_date" date, "end_date" date, "due_date" date, "total" decimal(10,2), "contract_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "lineitems" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "start_date" date, "end_date" date, "unit" varchar, "total" decimal(10,2), "unit_price" decimal(10,2), "invoice_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "desc" varchar)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "lineitmes" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "desc" varchar, "start_date" date, "end_date" date, "unit" varchar, "total" decimal(10,2), "unit_price" decimal(10,2), "invoice_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "rent_phases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "start_date" date, "end_date" date, "cycle" integer, "monthly_price" decimal(10,2), "contract_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES ('20160825135113')[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO schema_migrations (version) VALUES ('20160825030753'), ('20160825031008'), ('20160825031038'), ('20160825092036'), ('20160825134548');

[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2016-08-25 13:54:55 UTC], ["updated_at", 2016-08-25 13:54:55 UTC]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 13:54:55 UTC], ["updated_at", 2016-08-25 13:54:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc05fad5850,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:54:55 UTC], ["updated_at", 2016-08-25 13:54:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc05fadcbc8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:54:55 UTC], ["updated_at", 2016-08-25 13:54:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "rent_phases" WHERE "rent_phases"."contract_id" = ? LIMIT ?[0m  [["contract_id", "1"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7fc05fc07ae8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:54:55 UTC], ["updated_at", 2016-08-25 13:54:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fc05fb54998,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fc05fb36a10,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 13:54:55 UTC], ["updated_at", 2016-08-25 13:54:55 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.3ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[trial month] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fc05b902270,'0.9E3',9(18)>], ["updated_at", 2016-08-25 13:55:33 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7fc05b6fb9b8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 13:55:33 UTC], ["updated_at", 2016-08-25 13:55:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fc05b6f0e50,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fc05b6e1860,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 13:55:33 UTC], ["updated_at", 2016-08-25 13:55:33 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:07:57 UTC], ["updated_at", 2016-08-25 14:07:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ffcee0628e8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:07:57 UTC], ["updated_at", 2016-08-25 14:07:57 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ffcee068978,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:07:57 UTC], ["updated_at", 2016-08-25 14:07:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (2.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fac77039910,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fac77040c10,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7fac73115680,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fac76d76250,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fac76d55a00,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[trial month] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fac76d44de0,'0.9E3',9(18)>], ["updated_at", 2016-08-25 14:23:34 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7fac738aa940,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fac76d2cfd8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fac76d1ee38,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[trial month] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fac76d0f348,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 14:23:34 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7fac76cefa20,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fac76ce5ed0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fac76cd6ca0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fac76ccca20,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fac77062d38,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fac77059080,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fac77052dc0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fac77048488,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:23:34 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7fac76cac5b8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fac7702a2a8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fac7701ac90,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fac76ca46d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fac76c961f0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fac76c87bf0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fac76c7d6f0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fac76c6e6c8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:23:34 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7fac76c4d608,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fac76c3f878,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fac76c34658,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fac76c260d0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fac76c17a80,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fac770111b8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fac77002b68,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fac7296bb78,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:23:34 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7fac72950e40,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fac72943628,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fac76c0f718,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fac74fd3518,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fac76c042a0,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fac74fcad28,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fac74fc03c8,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:23:34 UTC], ["updated_at", 2016-08-25 14:23:34 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fac74fb0860,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 14:23:34 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (50.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
ContractTest: test_generate_all_invoices_of_one_contract
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ffcb79be130,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ffcb79c4080,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7ffcb38e2fa8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ffcb7339d50,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7ffcb7318358,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[trial month] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7ffcb79f4aa0,'0.9E3',9(18)>], ["updated_at", 2016-08-25 14:25:35 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7ffcb730a820,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7ffcb73010e0,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7ffcb72f24c8,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[trial month] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7ffcb72e32c0,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 14:25:35 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7ffcb72c3420,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7ffcb72b8bb0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffcb72aa5d8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7ffcb72a0790,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffcb79cea08,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7ffcb72986d0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffcb728a940,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7ffcb79bfc60,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:25:35 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7ffcb79ac200,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7ffcb408d988,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffcb407f248,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7ffcb4074bb8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffcb40665e0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7ffcb405c6d0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffcb7271b98,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7ffcb7262d28,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:25:35 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7ffcb7241308,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7ffcb7232970,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffcb79a4a28,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7ffcb7995ac8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffcb7987450,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7ffcb797ccd0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffcb796e540,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7ffcb795f4c8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:25:35 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7ffcb7944858,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7ffcb7936870,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffcb722ab80,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7ffcb720add0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffcb7200358,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7ffcb71eb020,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7ffcb71e0260,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:25:35 UTC], ["updated_at", 2016-08-25 14:25:35 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7ffcb71d0680,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 14:25:35 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (4.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
ContractTest: test_generate_contract
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ff0bc902fe0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff0c0033140,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7ff0bc87dd40,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ff0c00d3320,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7ff0c00bbc48,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[trial month] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7ff0c00abeb0,'0.9E3',9(18)>], ["updated_at", 2016-08-25 14:27:40 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7ff0c0098d88,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7ff0bfd15ff8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7ff0bfd0c070,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[trial month] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7ff0c0089770,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 14:27:40 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7ff0bfcf6130,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7ff0bfceca90,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff0bfce5240,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7ff0bfcdef80,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff0c00637c8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7ff0c0059958,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff0c004bbf0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7ff0c0041628,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:27:40 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7ff0bfcd6e20,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7ff0bfccce70,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff0c0021ff8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7ff0bfcbf478,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff0bfcafb18,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7ff0bfca5550,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff0bfc96fa0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7ff0bfc8e828,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:27:40 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7ff0bfc6d2b8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7ff0bfc5cfd0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff0bfc4e110,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7ff0bfc478b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff0bfc3c8c0,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7ff0bfc2db68,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff0bfc1f450,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7ff0bfc14320,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:27:40 UTC], ["id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7ff0bfbf5808,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7ff0bfbe7cd0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff0bfbdd528,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7ff0bfbce870,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff0bd966968,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7ff0bd95ebc8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7ff0bcfef600,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:27:40 UTC], ["updated_at", 2016-08-25 14:27:40 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7ff0bd956d38,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 14:27:40 UTC], ["id", 6]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (4.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa8b5920558,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa8b5587ab8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7fa8b5996c30,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8b55dce28,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fa8b55c6358,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[trial month] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fa8b55b5dc8,'0.9E3',9(18)>], ["updated_at", 2016-08-25 14:32:47 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7fa8b5958fe8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fa8b5953958,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fa8b18289d8,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[trial month] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fa8b59420b8,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 14:32:47 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7fa8b5930228,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8b5586dc0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8b5928c58,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8b5919e10,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8b590bd10,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8b557c140,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8b556d668,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fa8b555e780,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:32:47 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7fa8b553fbc8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fa8b55362a8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8b5527b90,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fa8b5517c68,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8b5507f20,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fa8b54fce90,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8b54edf58,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fa8b54df250,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:32:47 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7fa8b54c4130,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fa8b54b66e8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8b54ae920,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fa8b549d8c8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8b548f048,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fa8b5484210,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8b5903ed0,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fa8b5457a58,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:32:47 UTC], ["id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7fa8b5436808,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fa8b58f8c10,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8b58e98a0,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fa8b58db818,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8b58d18b8,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC], ["desc", "足月"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fa8b58c3808,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fa8b542d848,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:32:47 UTC], ["updated_at", 2016-08-25 14:32:47 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fa8b58ba3c0,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 14:32:47 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:36:40 UTC], ["updated_at", 2016-08-25 14:36:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fcb35394330,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:36:40 UTC], ["updated_at", 2016-08-25 14:36:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fcb353a7958,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:36:40 UTC], ["updated_at", 2016-08-25 14:36:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:37:08 UTC], ["updated_at", 2016-08-25 14:37:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ff16a8624b0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:08 UTC], ["updated_at", 2016-08-25 14:37:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff16cb16c18,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:08 UTC], ["updated_at", 2016-08-25 14:37:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd7c730bd20,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd7c83322a8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7fd7c3a1b218,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd7c83eb848,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd7c83cb8b8,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[trial month] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fd7c73423e8,'0.9E3',9(18)>], ["updated_at", 2016-08-25 14:37:51 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7fd7c73281c8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fd7c83b2728,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fd7c83a84a8,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[trial month] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd7c83988f0,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 14:37:51 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7fd7c837a198,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fd7c83703f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7c8361968,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fd7c8352aa8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7c8348c38,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fd7c8342ef0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7c73191a0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd7c833a368,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:37:51 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7fd7c83233c0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fd7c8319988,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7c72faa98,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fd7c72eb840,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7c72e1228,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fd7c72d2bb0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7c72c86d8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fd7c72b9778,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:37:51 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7fd7c72982d0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fd7c8311f08,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7c8302b20,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fd7c82f8c88,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7c82ea110,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fd7c5827888,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7c581d0e0,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fd7c82d9fb8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:37:51 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7fd7c82bb518,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fd7c82b1a68,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7c82a2b58,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fd7c40ba998,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7c827b008,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fd7c826b8b0,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fd7c728b3f0,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:37:51 UTC], ["updated_at", 2016-08-25 14:37:51 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fd7c727b310,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 14:37:51 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (13.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "trial month"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd857310470,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "normal month"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd8559f6f70,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7fd855a464a8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd855a35338,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd857351808,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[trial month] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fd852a02120,'0.9E3',9(18)>], ["updated_at", 2016-08-25 14:37:59 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7fd85733b8f0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fd855a06060,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fd8573301f8,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[trial month] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd857321c98,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 14:37:59 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7fd8559efd38,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8573120b8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd8573030b8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8572f8a00,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd8572e8b50,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC], ["desc", "足月"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8572da5a0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd8572d2918,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd8572c1000,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:37:59 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7fd8572a2268,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fd857293fb0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd8572831b0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fd857278828,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd85726a098,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fd85725aff8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd857250648,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fd857241620,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:37:59 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7fd857222608,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fd857218a68,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd85720a3f0,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fd8571fbaf8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd8571f0f18,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fd8571e07f8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd8559cd620,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fd8571d0e98,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:37:59 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7fd8559afc10,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fd8559a62f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd85599c340,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC], ["desc", "足月"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fd85598e380,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd8559844c0,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fd8571ba5a8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fd8571ab508,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:37:59 UTC], ["updated_at", 2016-08-25 14:37:59 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[normal month] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fd8571a09a0,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 14:37:59 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (10.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8b4e829098,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8b4e819b48,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7f8b4be00bb8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f8b4bc9ab98,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f8b4bc6bca8,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f8b4bc5a660,'0.9E3',9(18)>], ["updated_at", 2016-08-25 14:41:35 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7f8b4c554018,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f8b4bc33f10,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f8b4bc19de0,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f8b4bc09c10,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 14:41:35 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7f8b4bbd2558,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f8b4bbc3008,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8b4bbb2de8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f8b4bb9abd0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8b4bb82a58,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f8b4bb71910,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8b4bb5a080,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f8b4bb38f48,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:41:35 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7f8b4c53f938,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f8b4bb034b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8b4bae33b8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7f8b4bacb650,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8b4bab2600,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7f8b4ba88f08,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8b4ba69478,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f8b4ba49998,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:41:35 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7f8b4ba1b1d8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7f8b4ba12808,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8b4b9fbf68,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7f8b4c515390,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8b4c50d960,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7f8b4b9b8330,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8b4b999b60,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f8b4b979608,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:41:35 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7f8b4b951fb8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7f8b4c84ea98,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8b4c80efb0,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7f8b4c4c68a8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8b4c49c9e0,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7f8b4c4657d8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f8b4c427848,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:41:35 UTC], ["updated_at", 2016-08-25 14:41:35 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7f8b4c3ffed8,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 14:41:35 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (3.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb0c28bdba0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb0c10edf48,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7fb0c4394ff0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0c42fc340,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fb0c5b44fb0,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC], ["desc", "足月"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fb0c42f5900,'0.9E3',9(18)>], ["updated_at", 2016-08-25 14:43:00 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7fb0c28d73c0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fb0c28cd028,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fb0c42d7338,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fb0c42ccdc0,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 14:43:00 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7fb0c42aeff0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0c28bd358,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0c5b2e670,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0c5b24738,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0c5b0fe00,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0c5b058d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0c28b7390,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fb0c28ac378,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:43:00 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7fb0c288d9a0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0c2077ce8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0c5aef3f8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0c5ae4138,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0c5ad5548,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0c5ac6750,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0c5abc2f0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fb0c5aad1d8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:43:00 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7fb0c5a8e148,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0c5a84530,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0c5a75fd0,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0c5a67890,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0c5a5c940,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0c5a4c568,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0c5a34800,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC], ["desc", "足月"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fb0c206d338,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:43:00 UTC], ["id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7fb0c4297a80,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0c428d7b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0c28778d0,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0c286d8a8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0c427fb38,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fb0c5a0d8e0,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fb0c59fe6b0,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:43:00 UTC], ["updated_at", 2016-08-25 14:43:00 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fb0c426fcd8,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 14:43:00 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (27.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f88e4c978a8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f88e4c9e810,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7f88e4dd61d8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f88e50d1e50,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f88e4cfddb0,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f88e2955cc8,'0.9E3',9(18)>], ["updated_at", 2016-08-25 14:46:30 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7f88e4cd42f8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f88e109ef68,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f88e108fc98,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f88e1084d20,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 14:46:30 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7f88e4caf750,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f88e4ca5cf0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f88e4c97da8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f88e50b8e50,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f88e4c8e000,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f88e107f690,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f88e4c87c28,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f88e4c7cc38,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:46:30 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7f88e4c5e0a8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f88e4c54800,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f88e4c46188,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7f88e4c37110,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f88e4c26108,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7f88e4c17e50,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f88e4c0d2c0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f88e4bfe018,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:46:30 UTC], ["id", 4]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7f88e4bde7e0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7f88e4bd4bf0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f88e4bc65a0,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7f88e4bb7e10,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f88e4bad578,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7f88e4b9e9b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f88e4b8fe38,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f88e4b762d0,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:46:30 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7f88e4b55d78,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7f88e50a3f28,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f88e5093c18,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7f88e5089bf0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f88e507bd20,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7f88e5071be0,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f88e4b47c78,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:46:30 UTC], ["updated_at", 2016-08-25 14:46:30 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7f88e4b3c210,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 14:46:30 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (11.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fe8ecc6da90,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe8ea0ee9f0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7fe8ecd55570,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe8ed8285b0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fe8ed8083a0,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fe8eccacce0,'0.9E3',9(18)>], ["updated_at", 2016-08-25 14:47:02 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7fe8ecca6a20,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fe8ecc9c778,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fe8ecc8eb00,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fe8ecc845b0,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 14:47:02 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7fe8ecc76820,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fe8ecc6cbb8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe8ecc5dfa0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fe8e8a1b0e8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe8ecc46fd0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fe8ecc3caa8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe8e8a12448,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fe8e8a035b0,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:47:02 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7fe8e89e89b8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fe8ecc2e368,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe8ecc1e558,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fe8ecc0f288,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe8ecbffec8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fe8ea7c5620,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe8ea7b7138,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fe8ea7ad7a0,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:47:02 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7fe8ea78ced8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fe8ea77f490,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe8ea774e00,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fe8ea766698,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe8ecbf7340,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fe8ecbe6ea0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe8ecbc7578,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fe8ecbbdb40,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:47:02 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7fe8ecb96220,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fe8ecb8c4a0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe8ecb7e490,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fe8ecb74490,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe8ecb66868,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fe8ecb5c610,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fe8ecb4d250,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:47:02 UTC], ["updated_at", 2016-08-25 14:47:02 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fe8ea74e700,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 14:47:02 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f9764119fb0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f9766988370,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.4ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7f97671b15b0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f97669c01a8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f97669a9228,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f9767178d78,'0.9E3',9(18)>], ["updated_at", 2016-08-25 14:48:37 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7f976715b4f8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f9767150850,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f97671427c8,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f9762b1c1e0,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 14:48:37 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7f976713a780,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f97669890e0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f97671326e8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f976697b3c8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9762b0c358,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC], ["desc", "足月"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f9767128e18,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f976711a9f8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f976710ba48,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:48:37 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7f9766968f48,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f976695b910,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9762b079c0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7f97670fbd78,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f97669494e0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7f9766939e50,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f976692b580,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f97670f04a0,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:48:37 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7f9762add648,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7f9762acfac0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9762ac53b8,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7f9762ab6d40,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f97670e84d0,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7f97670d90c0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f97670c9350,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f97670a9348,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:48:37 UTC], ["id", 5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7f9767088dc8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7f976691a5f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f976707bad8,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7f9767071a10,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9767063c30,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7f97670597a8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f976704b928,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:48:37 UTC], ["updated_at", 2016-08-25 14:48:37 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7f9766910050,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 14:48:37 UTC], ["id", 6]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (3.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc15e3e40c8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc15e8727e8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.3ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7fc15e8e0450,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fc15e407820,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fc15e3f7a88,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fc15e8b81f8,'0.9E3',9(18)>], ["updated_at", 2016-08-25 14:51:30 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7fc15e899f00,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fc15e8904f0,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fc15e882800,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fc15e3ec2a0,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 14:51:30 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7fc15e869d28,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fc15e3e4230,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc15e861718,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fc15e3ceac0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc15e3bf110,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fc15e3b4b48,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc15e3a6688,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fc15e397660,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:51:30 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7fc15e858cd0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fc15e84a680,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc15e37dfa8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fc15e83b2e8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc15e8302d0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fc15e821938,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc15e8134f0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fc15e8082a8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:51:30 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7fc15a7e52c0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fc15a7d77b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc15a7cd0d0,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fc15a7be620,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc15a7af3a0,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fc15c13a978,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc15e357290,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fc15e347570,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:51:30 UTC], ["id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7fc15a79dba0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fc15a78ff00,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc15a785f28,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fc15a77dc38,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc15a776258,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fc15b164120,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fc15e31cd20,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:51:30 UTC], ["updated_at", 2016-08-25 14:51:30 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fc15e30e180,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 14:51:30 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (23.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8cb9087878,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8cb9fbd298,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7f8cba535180,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f8cba44f7e8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f8cba424e58,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f8cba40f378,'0.9E3',9(18)>], ["updated_at", 2016-08-25 14:52:39 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7f8cba3d4ed0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f8cba3c5610,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f8cba3bc7e0,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f8cb9e11548,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 14:52:39 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7f8cba3853f8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f8cb9df90d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8cb9de8fa8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f8cb9dd2758,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8cba36ec48,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f8cba357b88,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8cb9dba4a0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f8cba33c1a8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:52:39 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7f8cb9d9aa10,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f8cba31c1f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8cb9d78488,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7f8cba2de648,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8cb9d53480,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7f8cba2cfb70,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8cba2be208,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f8cb9095e28,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:52:39 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7f8cb9d2bb88,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7f8cb9d0a820,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8cb9cf8800,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7f8cb9cd3780,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8cb9cbb298,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7f8cb9ca90e8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8cb9c92b90,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f8cb9c783f8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:52:39 UTC], ["id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7f8cba81d078,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7f8cb9c28ad8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8cb9bf0480,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7f8cb9bab6c8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8cb9b79060,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7f8cba297978,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f8cba265b30,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:52:39 UTC], ["updated_at", 2016-08-25 14:52:39 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7f8cba226fc0,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 14:52:39 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (3.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc1d7bda2e0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc1d7be1478,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.4ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7fc1d41eaa80,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fc1d50acfc8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fc1d8109018,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fc1d7c49960,'0.9E3',9(18)>], ["updated_at", 2016-08-25 14:53:42 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7fc1d7c28058,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fc1d7c19878,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fc1d7c0bb88,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fc1d7c01548,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 14:53:42 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7fc1d7be37c8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fc1d7bd9cf0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc1d7bcb0d8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fc1d7bc04d0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc1d80f9190,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fc1d80ea2d0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc1d80dbd20,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fc1d80d0c68,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:53:42 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7fc1d80b21c8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fc1d80a8628,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc1d8098110,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fc1d509c510,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc1d8089520,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fc1d807a548,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc1d8070110,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fc1d8060fa8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:53:42 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7fc1d41c1f18,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fc1d7bb84d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc1d7ba9e88,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fc1d7b9b798,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc1d7b90a78,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fc1d7b80330,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc1d7b60940,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fc1d7b50978,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:53:42 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7fc1d7b2a9f8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fc1d7b20930,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc1d7b12970,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC], ["desc", "足月"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fc1d7b08970,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc1d7af24e0,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fc1d7ae3cd8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fc1d7ad9c10,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:53:42 UTC], ["updated_at", 2016-08-25 14:53:42 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fc1d7aca850,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 14:53:42 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (11.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:54:20 UTC], ["updated_at", 2016-08-25 14:54:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f9e9b9dff58,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:54:20 UTC], ["updated_at", 2016-08-25 14:54:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f9e9e9fb7f0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:54:20 UTC], ["updated_at", 2016-08-25 14:54:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7f9e9f2f6aa8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f9e9f2ad5b0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f9e9f28d760,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f9e9f27e468,'0.9E3',9(18)>], ["updated_at", 2016-08-25 14:54:21 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7f9e9f25cc00,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f9e9f24e358,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f9e9ea23f48,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f9e9ea198e0,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 14:54:21 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7f9e9e9fbc50,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f9e9aa12670,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9e9f247da0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f9e9e9e9280,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9e9f23e278,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f9e9e9d2e68,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9e9c8c0888,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f9e9e9c9930,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:54:21 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7f9e9e9aadc8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f9e9f235380,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9e9aa09ae8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7f9e9f21e3d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9e9e9a3870,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.8ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7f9e9e9984c0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9e9e98a078,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f9e9e97a6a0,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:54:21 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7f9e9e95b5c0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7f9e9e951ae8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9e9e943510,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7f9e9e938c50,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9e9e92a150,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7f9e9e91b6c8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9e9c8b2f58,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f9e9e902f88,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:54:21 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7f9e9c8a9ef8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7f9e9c89b380,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9e9c891380,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7f9e9c883528,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9e9e8f9578,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7f9e9f1ee610,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f9e9f1e4700,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:54:21 UTC], ["updated_at", 2016-08-25 14:54:21 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7f9e9e8d97c8,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 14:54:21 UTC], ["id", 6]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc4f8219f70,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc4f89708c8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["total", #<BigDecimal:7fc4f61cb778,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fc4f89b1b70,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fc4f5a09e90,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fc4f8242bc8,'0.9E3',9(18)>], ["updated_at", 2016-08-25 14:54:59 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["total", #<BigDecimal:7fc4f59f8cf8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fc4f8222580,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fc4f89a0848,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fc4f8992248,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 14:54:59 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["total", #<BigDecimal:7fc4f8978668,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fc4f821ae70,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc4f820bfb0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fc4f82016c8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc4f8962188,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fc4f89531d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc4f8948c88,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fc4f8939d00,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:54:59 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["total", #<BigDecimal:7fc4f892b390,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fc4f8921930,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc4f8910d60,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fc4f8901f90,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc4f81eb288,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fc4f81e0108,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc4f59e9640,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fc4f59da500,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:54:59 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["total", #<BigDecimal:7fc4f81bb560,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fc4f88f1ac8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc4f88e33d8,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fc4f59d0ac8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc4f59c20e0,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fc4f81aabe8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc4f81a2998,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fc4f59bb420,'0.36E4',9(18)>], ["updated_at", 2016-08-25 14:54:59 UTC], ["id", 5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["total", #<BigDecimal:7fc4f61a1608,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fc4f8172e00,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc4f8168f18,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fc4f88c30b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc4f88b91a0,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fc4f88ab1b8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fc4f8158cd0,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 14:54:59 UTC], ["updated_at", 2016-08-25 14:54:59 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fc4f8149938,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 14:54:59 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (3.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "contracts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "start_date" date, "end_date" date, "customer_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "customers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "invoices" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "start_date" date, "end_date" date, "due_date" date, "total" decimal(10,2), "rent_phase_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "lineitems" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "start_date" date, "end_date" date, "unit" varchar, "total" decimal(10,2), "unit_price" decimal(10,2), "invoice_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "desc" varchar)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "lineitmes" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "desc" varchar, "start_date" date, "end_date" date, "unit" varchar, "total" decimal(10,2), "unit_price" decimal(10,2), "invoice_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "rent_phases" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "start_date" date, "end_date" date, "cycle" integer, "monthly_price" decimal(10,2), "contract_id" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES ('20160825150301')[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO schema_migrations (version) VALUES ('20160825030753'), ('20160825031008'), ('20160825031038'), ('20160825092036'), ('20160825134548'), ('20160825135113');

[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2016-08-25 15:11:25 UTC], ["updated_at", 2016-08-25 15:11:25 UTC]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:11:25 UTC], ["updated_at", 2016-08-25 15:11:25 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd1e7c465d8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:11:25 UTC], ["updated_at", 2016-08-25 15:11:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd1e7c55088,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:11:25 UTC], ["updated_at", 2016-08-25 15:11:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:12:34 UTC], ["updated_at", 2016-08-25 15:12:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd4fff3f508,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:12:34 UTC], ["updated_at", 2016-08-25 15:12:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd4fff4dd38,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:12:34 UTC], ["updated_at", 2016-08-25 15:12:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (8.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:14:09 UTC], ["updated_at", 2016-08-25 15:14:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f84fe0213d8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:14:09 UTC], ["updated_at", 2016-08-25 15:14:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f84fcabc1a0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:14:09 UTC], ["updated_at", 2016-08-25 15:14:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:14:56 UTC], ["updated_at", 2016-08-25 15:14:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd353aa0ea0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:14:56 UTC], ["updated_at", 2016-08-25 15:14:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd354285990,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:14:56 UTC], ["updated_at", 2016-08-25 15:14:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:19:19 UTC], ["updated_at", 2016-08-25 15:19:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd9bfac0f30,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:19:19 UTC], ["updated_at", 2016-08-25 15:19:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd9bbafeb40,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:19:19 UTC], ["updated_at", 2016-08-25 15:19:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fd9bfb10b48,'0.9E3',9(18)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:19:19 UTC], ["updated_at", 2016-08-25 15:19:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd9bfae0fd8,'0.2959E2',18(27)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:19:19 UTC], ["updated_at", 2016-08-25 15:19:19 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd9bfa99908,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:19:19 UTC], ["updated_at", 2016-08-25 15:19:19 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fd9be3991e0,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:19:19 UTC], ["updated_at", 2016-08-25 15:19:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fd9bfa182e0,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:19:19 UTC], ["updated_at", 2016-08-25 15:19:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fd9bf9c23e0,'0.358356E4',18(27)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:19:19 UTC], ["updated_at", 2016-08-25 15:19:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:23:30 UTC], ["updated_at", 2016-08-25 15:23:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc95f979250,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:23:30 UTC], ["updated_at", 2016-08-25 15:23:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc95f564408,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:23:30 UTC], ["updated_at", 2016-08-25 15:23:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fc95f998ad8,'0.9E3',9(18)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:23:30 UTC], ["updated_at", 2016-08-25 15:23:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fc95f9802a8,'0.2959E2',18(27)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:23:30 UTC], ["updated_at", 2016-08-25 15:23:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fc95f527df0,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:23:30 UTC], ["updated_at", 2016-08-25 15:23:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fc95f932968,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:23:30 UTC], ["updated_at", 2016-08-25 15:23:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fc95f4ee870,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:23:30 UTC], ["updated_at", 2016-08-25 15:23:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fc95f8c12e0,'0.358356E4',18(27)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:23:30 UTC], ["updated_at", 2016-08-25 15:23:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", nil], ["LIMIT", 1]]
  [1m[35m (2.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:24:18 UTC], ["updated_at", 2016-08-25 15:24:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd312dc9460,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:24:18 UTC], ["updated_at", 2016-08-25 15:24:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd312db00f0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:24:18 UTC], ["updated_at", 2016-08-25 15:24:18 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fd311fbd9c0,'0.9E3',9(18)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:24:19 UTC], ["updated_at", 2016-08-25 15:24:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd312aaba80,'0.2959E2',18(27)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:24:19 UTC], ["updated_at", 2016-08-25 15:24:19 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd31383af48,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:24:19 UTC], ["updated_at", 2016-08-25 15:24:19 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fd311f4c4f0,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:24:19 UTC], ["updated_at", 2016-08-25 15:24:19 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fd311e8fd00,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:24:19 UTC], ["updated_at", 2016-08-25 15:24:19 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fd3129d3928,'0.358356E4',18(27)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:24:19 UTC], ["updated_at", 2016-08-25 15:24:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT "contracts".* FROM "contracts" WHERE "contracts"."id" IN (NULL, 0)[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:24:36 UTC], ["updated_at", 2016-08-25 15:24:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8ccc725258,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:24:36 UTC], ["updated_at", 2016-08-25 15:24:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8ccc7349d8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:24:36 UTC], ["updated_at", 2016-08-25 15:24:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f8ccc74d7f8,'0.9E3',9(18)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:24:36 UTC], ["updated_at", 2016-08-25 15:24:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f8ccc72d0c0,'0.2959E2',18(27)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:24:36 UTC], ["updated_at", 2016-08-25 15:24:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f8ccc6fcd08,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:24:36 UTC], ["updated_at", 2016-08-25 15:24:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f8ccc6d7ee0,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:24:36 UTC], ["updated_at", 2016-08-25 15:24:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f8ccc686f40,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:24:36 UTC], ["updated_at", 2016-08-25 15:24:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7f8ccc6361d0,'0.358356E4',18(27)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:24:36 UTC], ["updated_at", 2016-08-25 15:24:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:26:14 UTC], ["updated_at", 2016-08-25 15:26:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa4b39cb008,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:26:14 UTC], ["updated_at", 2016-08-25 15:26:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa4b39ba6e0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:26:14 UTC], ["updated_at", 2016-08-25 15:26:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fa4b1f3b990,'0.9E3',9(18)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:26:14 UTC], ["updated_at", 2016-08-25 15:26:14 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fa4b1ef2010,'0.2959E2',18(27)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:26:14 UTC], ["updated_at", 2016-08-25 15:26:14 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fa4b1e72748,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:26:14 UTC], ["updated_at", 2016-08-25 15:26:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fa4b104d960,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:26:14 UTC], ["updated_at", 2016-08-25 15:26:14 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fa4b0b615a0,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:26:14 UTC], ["updated_at", 2016-08-25 15:26:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fa4b1cfb4c8,'0.358356E4',18(27)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:26:14 UTC], ["updated_at", 2016-08-25 15:26:14 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[35m (6.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:26:53 UTC], ["updated_at", 2016-08-25 15:26:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fec7d9c0290,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:26:53 UTC], ["updated_at", 2016-08-25 15:26:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fec7d9db518,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:26:53 UTC], ["updated_at", 2016-08-25 15:26:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fec7d9f8988,'0.9E3',9(18)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:26:53 UTC], ["updated_at", 2016-08-25 15:26:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fec7d9e0d38,'0.2959E2',18(27)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:26:53 UTC], ["updated_at", 2016-08-25 15:26:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fec7e384fd8,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:26:53 UTC], ["updated_at", 2016-08-25 15:26:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fec7d988d18,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:26:53 UTC], ["updated_at", 2016-08-25 15:26:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fec7e3148a0,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:26:53 UTC], ["updated_at", 2016-08-25 15:26:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fec7e2ee678,'0.358356E4',18(27)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:26:53 UTC], ["updated_at", 2016-08-25 15:26:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.6ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:27:03 UTC], ["updated_at", 2016-08-25 15:27:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f92ead40bc8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:27:03 UTC], ["updated_at", 2016-08-25 15:27:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f92e9e0f618,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:27:03 UTC], ["updated_at", 2016-08-25 15:27:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f92eaea11e8,'0.9E3',9(18)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:27:03 UTC], ["updated_at", 2016-08-25 15:27:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f92eae4b9a0,'0.2959E2',18(27)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:27:03 UTC], ["updated_at", 2016-08-25 15:27:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f92e9afcc00,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:27:03 UTC], ["updated_at", 2016-08-25 15:27:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f92e9ace0d0,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:27:03 UTC], ["updated_at", 2016-08-25 15:27:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f92e9a373b0,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:27:03 UTC], ["updated_at", 2016-08-25 15:27:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7f92eacfb320,'0.358356E4',18(27)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:27:03 UTC], ["updated_at", 2016-08-25 15:27:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.6ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:28:20 UTC], ["updated_at", 2016-08-25 15:28:20 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa8182263a8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:28:20 UTC], ["updated_at", 2016-08-25 15:28:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa8182361e0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:28:20 UTC], ["updated_at", 2016-08-25 15:28:20 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fa81735a428,'0.9E3',9(18)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:28:20 UTC], ["updated_at", 2016-08-25 15:28:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fa817340848,'0.2959E2',18(27)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:28:20 UTC], ["updated_at", 2016-08-25 15:28:20 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fa817318140,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:28:20 UTC], ["updated_at", 2016-08-25 15:28:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fa8172eada8,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:28:20 UTC], ["updated_at", 2016-08-25 15:28:20 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fa8172ca940,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:28:20 UTC], ["updated_at", 2016-08-25 15:28:20 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fa8172a0c30,'0.358356E4',18(27)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:28:20 UTC], ["updated_at", 2016-08-25 15:28:20 UTC]]
  [1m[35m (4.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.6ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:31:45 UTC], ["updated_at", 2016-08-25 15:31:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd2be3defd0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:31:45 UTC], ["updated_at", 2016-08-25 15:31:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd2be8a9f38,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:31:45 UTC], ["updated_at", 2016-08-25 15:31:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fd2be8a1e28,'0.9E3',9(18)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:31:45 UTC], ["updated_at", 2016-08-25 15:31:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd2be888338,'0.2959E2',18(27)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:31:45 UTC], ["updated_at", 2016-08-25 15:31:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd2be83b128,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:31:45 UTC], ["updated_at", 2016-08-25 15:31:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fd2bb7e9f10,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:31:45 UTC], ["updated_at", 2016-08-25 15:31:45 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fd2be37db40,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:31:45 UTC], ["updated_at", 2016-08-25 15:31:45 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fd2be337c58,'0.358356E4',18(27)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:31:45 UTC], ["updated_at", 2016-08-25 15:31:45 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.5ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (7.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:33:28 UTC], ["updated_at", 2016-08-25 15:33:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd01838d048,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:33:28 UTC], ["updated_at", 2016-08-25 15:33:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd014976008,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:33:28 UTC], ["updated_at", 2016-08-25 15:33:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fd018963508,'0.9E3',9(18)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:33:29 UTC], ["updated_at", 2016-08-25 15:33:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd018931508,'0.2959E2',18(27)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:33:29 UTC], ["updated_at", 2016-08-25 15:33:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd0188f0828,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:33:29 UTC], ["updated_at", 2016-08-25 15:33:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fd01889b490,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:33:29 UTC], ["updated_at", 2016-08-25 15:33:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fd01509ead8,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:33:29 UTC], ["updated_at", 2016-08-25 15:33:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fd0182f7e08,'0.358356E4',18(27)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:33:29 UTC], ["updated_at", 2016-08-25 15:33:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.5ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (5.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:35:33 UTC], ["updated_at", 2016-08-25 15:35:33 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fcb42192228,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:35:33 UTC], ["updated_at", 2016-08-25 15:35:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fcb454b1000,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:35:33 UTC], ["updated_at", 2016-08-25 15:35:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fcb454a8540,'0.9E3',9(18)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:35:33 UTC], ["updated_at", 2016-08-25 15:35:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fcb45492308,'0.2959E2',18(27)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:35:33 UTC], ["updated_at", 2016-08-25 15:35:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fcb42169bc0,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:35:33 UTC], ["updated_at", 2016-08-25 15:35:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fcb45473bb0,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:35:33 UTC], ["updated_at", 2016-08-25 15:35:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fcb45433d08,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:35:33 UTC], ["updated_at", 2016-08-25 15:35:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fcb453e14b8,'0.358356E4',18(27)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:35:33 UTC], ["updated_at", 2016-08-25 15:35:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.7ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:37:15 UTC], ["updated_at", 2016-08-25 15:37:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc715823cf8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:37:15 UTC], ["updated_at", 2016-08-25 15:37:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc7158127f0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:37:15 UTC], ["updated_at", 2016-08-25 15:37:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fc7124312b0,'0.9E3',9(18)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:37:16 UTC], ["updated_at", 2016-08-25 15:37:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fc7124182b0,'0.2959E2',18(27)>], ["rent_phase_id", "1"], ["created_at", 2016-08-25 15:37:16 UTC], ["updated_at", 2016-08-25 15:37:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fc7123f0ad0,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:37:16 UTC], ["updated_at", 2016-08-25 15:37:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fc7123d0780,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:37:16 UTC], ["updated_at", 2016-08-25 15:37:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fc712c76858,'0.36E4',9(18)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:37:16 UTC], ["updated_at", 2016-08-25 15:37:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fc7123819a0,'0.358356E4',18(27)>], ["rent_phase_id", "2"], ["created_at", 2016-08-25 15:37:16 UTC], ["updated_at", 2016-08-25 15:37:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.5ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:38:05 UTC], ["updated_at", 2016-08-25 15:38:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa7d760c120,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:38:05 UTC], ["updated_at", 2016-08-25 15:38:05 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa7d40dfe70,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:38:05 UTC], ["updated_at", 2016-08-25 15:38:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:46:59 UTC], ["updated_at", 2016-08-25 15:46:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc99f8283c0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:46:59 UTC], ["updated_at", 2016-08-25 15:46:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc99f56fc78,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:46:59 UTC], ["updated_at", 2016-08-25 15:46:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:47:19 UTC], ["updated_at", 2016-08-25 15:47:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fab27898670,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:47:19 UTC], ["updated_at", 2016-08-25 15:47:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fab25144998,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:47:19 UTC], ["updated_at", 2016-08-25 15:47:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:47:19 UTC], ["updated_at", 2016-08-25 15:47:19 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fab264c2ba0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fab23ac5e88,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 15:47:37 UTC], ["updated_at", 2016-08-25 15:47:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fab264a16d0,'0.9E3',9(18)>], ["updated_at", 2016-08-25 15:47:37 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:47:37 UTC], ["updated_at", 2016-08-25 15:47:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fab23a8eed8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fab23a846e0,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 15:47:52 UTC], ["updated_at", 2016-08-25 15:47:52 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fab23a7cc38,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 15:47:52 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:47:52 UTC], ["updated_at", 2016-08-25 15:47:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fab23a4f288,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fab23a3fa90,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:47:56 UTC], ["updated_at", 2016-08-25 15:47:56 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fab23a34d98,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fab26422f10,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:47:56 UTC], ["updated_at", 2016-08-25 15:47:56 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fab26418f38,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fab23a1f038,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:47:56 UTC], ["updated_at", 2016-08-25 15:47:56 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fab26413f10,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:47:56 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:47:56 UTC], ["updated_at", 2016-08-25 15:47:56 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:48:01 UTC], ["updated_at", 2016-08-25 15:48:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fca5b5e7540,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:48:01 UTC], ["updated_at", 2016-08-25 15:48:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fca5d80ac80,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:48:01 UTC], ["updated_at", 2016-08-25 15:48:01 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:48:01 UTC], ["updated_at", 2016-08-25 15:48:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fca5b4cc5e8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fca5ae1fab0,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 15:48:01 UTC], ["updated_at", 2016-08-25 15:48:01 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fca5b4bdcf0,'0.9E3',9(18)>], ["updated_at", 2016-08-25 15:48:01 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:48:01 UTC], ["updated_at", 2016-08-25 15:48:01 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fca5adf5c10,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fca5adde510,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 15:48:01 UTC], ["updated_at", 2016-08-25 15:48:01 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fca5adc58f8,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 15:48:01 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:48:01 UTC], ["updated_at", 2016-08-25 15:48:01 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fca5ad95ec8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fca5b47f108,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:48:01 UTC], ["updated_at", 2016-08-25 15:48:01 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fca5ad7d8f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fca5ad5f828,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:48:01 UTC], ["updated_at", 2016-08-25 15:48:01 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fca5ad4e2d0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fca5ad44bb8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:48:01 UTC], ["updated_at", 2016-08-25 15:48:01 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fca5ad2de18,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:48:02 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:48:02 UTC], ["updated_at", 2016-08-25 15:48:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fca5acec3f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fca5acd4e80,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:48:02 UTC], ["updated_at", 2016-08-25 15:48:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fca5b454318,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fca5acc4e40,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:48:02 UTC], ["updated_at", 2016-08-25 15:48:02 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fca5acae2d0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fca5a09a598,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:48:02 UTC], ["updated_at", 2016-08-25 15:48:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fca5ac7ccf8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:48:02 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:48:02 UTC], ["updated_at", 2016-08-25 15:48:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fca5b41eec0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fca5b40cf68,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:48:02 UTC], ["updated_at", 2016-08-25 15:48:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fca5a0922a8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fca5ac0eed8,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:48:02 UTC], ["updated_at", 2016-08-25 15:48:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fca5b3eec48,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fca5b8152b8,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:48:02 UTC], ["updated_at", 2016-08-25 15:48:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fca5b3ddf10,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:48:02 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:48:02 UTC], ["updated_at", 2016-08-25 15:48:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fca5abbe410,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fca5aba4fd8,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:48:02 UTC], ["updated_at", 2016-08-25 15:48:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fca5a08a3c8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fca5b39c268,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:48:02 UTC], ["updated_at", 2016-08-25 15:48:02 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fca5b3844d8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fca5b355e30,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:48:02 UTC], ["updated_at", 2016-08-25 15:48:02 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fca5b30f840,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 15:48:02 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:52:08 UTC], ["updated_at", 2016-08-25 15:52:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f9b09a9ead8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f9b0d9b2d00,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (6.9ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f9b0d9c8420,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f9b0d9c8358,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f9b0d3e4c48,'0.9E3',9(18)>], ["updated_at", 2016-08-25 15:52:09 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f9b0d3ce600,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f9b0d3ce538,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f9b0a88ef58,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 15:52:09 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f9b0d3a5e58,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9b0d3a5d68,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f9b0d38c2f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9b0d38c250,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f9b0914e640,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9b0914e5a0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f9b0913f1b8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:52:09 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f9b0a86e118,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9b0a86e078,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7f9b0d37fb40,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9b0d37faa0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7f9b0d366640,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9b0d366550,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f9b0d356b78,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:52:09 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7f9b091053a0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9b09105300,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7f9b0d334640,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9b0d3345a0,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7f9b0d31d6e8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9b0d31d620,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f9b0d98a440,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:52:09 UTC], ["id", 5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7f9b0d2fe810,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9b0d2fe770,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7f9b0d2df7a8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9b0d2df6e0,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7f9b0d9512a8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f9b0d951208,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:52:09 UTC], ["updated_at", 2016-08-25 15:52:09 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7f9b0d942a50,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 15:52:09 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.4ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fcf69d00300,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fcf69ce21e8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.3ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fcf6a6a4618,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fcf6a6a40a0,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fcf6a67fb60,'0.9E3',9(18)>], ["updated_at", 2016-08-25 15:52:29 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fcf6a61ca60,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fcf6a61c9c0,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fcf6a607a20,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 15:52:29 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fcf6a5c64f8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcf6a5c63b8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fcf6a59cb80,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcf6a59ca90,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fcf6a56d718,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcf6a56d678,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fcf69c2ad40,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:52:29 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fcf6a52e590,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcf6a52e4c8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fcf69bd0408,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcf69bd0368,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fcf69ba8048,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcf69ba84a8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fcf6a50f7a8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:52:29 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fcf6a484928,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcf6a484770,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fcf69b91fc8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcf69b91eb0,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fcf69b61e40,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcf69b61d50,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fcf69b49cc8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:52:29 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fcf6a40d378,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcf6a40d1c0,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fcf6a3d7cc8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcf6a3d7b60,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fcf69b3b768,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fcf69b3bba0,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:52:29 UTC], ["updated_at", 2016-08-25 15:52:29 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fcf69b31088,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 15:52:29 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f85eed1bb38,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f85ef1125e8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f85ef1288c0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f85ef128820,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f85ef119078,'0.9E3',9(18)>], ["updated_at", 2016-08-25 15:53:04 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f85eecfb108,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f85eecfb068,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f85eeceb938,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 15:53:04 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f85ef0e2d20,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f85ef0e2c80,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f85eecc9608,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f85eecc9568,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f85eecab838,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f85eecab798,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f85eeca0848,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:53:04 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f85eec6b800,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f85eec6b738,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7f85ef0c87e0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f85ef0c86f0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7f85eec531d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f85eec530c0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f85eec486e8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:53:04 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7f85eec12ac0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f85eec12a20,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7f85eebf9ac0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f85eebf9a20,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7f85eebdaa30,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f85eebda990,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f85eebcb738,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:53:04 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7f85eeb88168,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f85eeb880c8,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7f85eeb68e08,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f85eeb68d18,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7f85eeb4aae8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f85eeb4aa48,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:53:04 UTC], ["updated_at", 2016-08-25 15:53:04 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7f85eeb40160,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 15:53:04 UTC], ["id", 6]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f978e372238,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f978e8114b0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.3ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f978e820078,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f978e383f60,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f978e378b60,'0.9E3',9(18)>], ["updated_at", 2016-08-25 15:54:32 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f978aff2d68,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f978aff2cc8,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f978e35bf38,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 15:54:32 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f978afe6c20,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f978afe6b80,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f978afd5a88,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f978afd59e8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f978e328020,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f978e323f48,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f978e318d00,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:54:32 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f978a2b3e68,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f978a2b3dc8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7f978e2fa9e0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f978e2fa878,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7f978a2a83b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f978a2a8310,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f978a2988c0,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:54:32 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7f978a263288,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f978a2631c0,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7f978e2da4d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f978e2da438,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7f978e2c0128,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f978e2c0038,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f978e2b0598,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:54:32 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7f978e2913a0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f978e291300,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7f978af9db10,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f978af9da48,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7f978e2738a0,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f978e273800,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:54:32 UTC], ["updated_at", 2016-08-25 15:54:32 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7f978e268fe0,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 15:54:32 UTC], ["id", 6]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f95968e0fc0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f959637bf80,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f95963884b0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f9596388410,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f95963792f8,'0.9E3',9(18)>], ["updated_at", 2016-08-25 15:57:51 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f95941da9a8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f95941da8e0,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f9596373948,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 15:57:51 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f959634ab38,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f959634aa98,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f9596341088,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9596340f98,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f959632ab58,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f959632aab8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f959631bc48,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:57:51 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f95962f2cf8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f95962f2c58,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7f959689b7b8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f959689b718,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7f9596882ba0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9596882b00,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f9596873a38,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:57:51 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7f95962e2308,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f95962e2240,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7f95962c9718,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f95962c9678,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7f95962aa750,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f95962aa6b0,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f959685b2d0,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:57:51 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7f95962704b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9596270410,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7f95962512b8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9596251218,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7f9596233060,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f9596232fc0,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:57:51 UTC], ["updated_at", 2016-08-25 15:57:51 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7f95962286d8,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 15:57:51 UTC], ["id", 6]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f87c6cb3360,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f87c6cb9f30,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f87c6ccbeb0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f87c6ccbde8,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f87c6cc03d0,'0.9E3',9(18)>], ["updated_at", 2016-08-25 15:58:30 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f87c6c922c8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f87c6c92228,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f87c6c82fd0,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 15:58:30 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f87c6c627a8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f87c6c62708,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f87c7051328,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f87c7051288,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f87c6c5b8b8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f87c6c5b7f0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f87c6c50828,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:58:30 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f87c49637c0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f87c49636f8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7f87c49483d0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f87c4948330,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7f87c7023450,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f87c7023388,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f87c70180f0,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:58:30 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7f87c40bab28,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f87c40baa60,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7f87c6c01a48,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f87c6c019a8,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7f87c6be2aa8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f87c6be2a08,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f87c6bdba28,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:58:30 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7f87c6ba8628,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f87c6ba8588,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7f87c6b911a8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f87c6b91108,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7f87c4933a20,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f87c4933980,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:58:30 UTC], ["updated_at", 2016-08-25 15:58:30 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7f87c6b79210,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 15:58:30 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa7ae12b9b8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa7ae139e28,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa7ae9e95f0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fa7ae9e9550,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fa7ae139a40,'0.9E3',9(18)>], ["updated_at", 2016-08-25 15:59:36 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fa7ae9d3070,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fa7ae9d2fd0,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fa7ae9c3b98,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 15:59:36 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fa7ae9a2420,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa7ae9a2380,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fa7aba10e78,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa7aba10db0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fa7ae97aa60,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa7ae97a998,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fa7ae973af8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:59:36 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fa7ab252b78,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa7ab252ad8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fa7ab2436f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa7ab243650,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fa7ae93a488,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa7ae93a3e8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fa7ab9f3490,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:59:36 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fa7ab221e10,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa7ab221d48,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fa7ae920f10,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa7ae920df8,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fa7ae9019f8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa7ae901958,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fa7ae8fa860,'0.36E4',9(18)>], ["updated_at", 2016-08-25 15:59:36 UTC], ["id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fa7ae8b17a0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa7ae8b1700,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fa7ae0d3038,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa7ae0d2f98,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fa7ae0ba0b0,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fa7ae0ba010,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 15:59:36 UTC], ["updated_at", 2016-08-25 15:59:36 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fa7ae0ab8d0,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 15:59:36 UTC], ["id", 6]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 16:00:31 UTC], ["updated_at", 2016-08-25 16:00:31 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa5f38965c0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa5f80e96b0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.3ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa5f80f3660,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fa5f80f35c0,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fa5f389fd50,'0.9E3',9(18)>], ["updated_at", 2016-08-25 16:00:32 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fa5f7ced890,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fa5f7ced7f0,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fa5f7cded40,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 16:00:32 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fa5f7cb5710,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa5f7cb5670,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fa5f80d83d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa5f80d8310,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fa5f80ba630,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa5f80ba590,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fa5f80ab658,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:00:32 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fa5f7c8e188,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa5f7c8e0e8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fa5f387f190,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa5f387f0f0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fa5f809a808,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa5f809a768,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fa5f808b768,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:00:32 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fa5f7c46018,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa5f7c45f50,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fa5f7c2ccf8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa5f7c2cc58,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fa5f7c0e1e0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa5f7c0e140,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fa5f7bfed08,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:00:32 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fa5f8062e30,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa5f8062d90,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fa5f805bea0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa5f805be00,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fa5f7bbfa40,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fa5f7bbf9a0,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:00:32 UTC], ["updated_at", 2016-08-25 16:00:32 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fa5f7bb50e0,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 16:00:32 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8c48516e28,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8c488e9a00,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f8c48526f80,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f8c48526ee0,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f8c488eba80,'0.9E3',9(18)>], ["updated_at", 2016-08-25 16:01:40 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f8c488e18c8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f8c488e1828,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f8c488d2378,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 16:01:40 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f8c488a1ae8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8c488a1a48,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f8c484fc758,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8c484fc6b8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f8c484de6b8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8c484de618,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f8c484cf6e0,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:01:40 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f8c4849e7e8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8c4849e748,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7f8c488733c8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8c48873300,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7f8c484867b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8c484866e8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f8c48477558,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:01:40 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7f8c48445dc8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8c48445d00,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7f8c4842caf8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8c4842ca58,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7f8c4840dae0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8c4840da40,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f8c458a6690,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:01:40 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7f8c483df2a8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8c483df168,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7f8c483c4070,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f8c483c42c8,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7f8c4883a550,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f8c4883a4b0,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:01:40 UTC], ["updated_at", 2016-08-25 16:01:40 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7f8c4882bca8,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 16:01:40 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd7b20a10e0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd7b2093238,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd7b567c318,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd7b567c278,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fd7b28ccfa8,'0.9E3',9(18)>], ["updated_at", 2016-08-25 16:02:07 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fd7b565d738,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fd7b565d698,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd7b27f2a60,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 16:02:07 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fd7b27d9268,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7b27d91c8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fd7b27d0438,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7b27d0398,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fd7b561def8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7b561de58,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd7b27c2f90,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:02:07 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fd7b2791f30,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7b2791e90,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fd7b2772ab8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7b27729c8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fd7b2759d60,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7b2759c98,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fd7b274ab58,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:02:07 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fd7b55e5490,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7b55e53c8,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fd7b273bf18,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7b273be50,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fd7b28bd0f8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7b28bd058,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fd7b55bdbe8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:02:07 UTC], ["id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fd7b5595968,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7b55958c8,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fd7b5577170,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd7b5577058,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fd7b555e0d0,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fd7b555e030,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:02:07 UTC], ["updated_at", 2016-08-25 16:02:07 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fd7b271b8f8,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 16:02:07 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 16:03:48 UTC], ["updated_at", 2016-08-25 16:03:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb916112a48,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:03:48 UTC], ["updated_at", 2016-08-25 16:03:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb91610aa50,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:03:48 UTC], ["updated_at", 2016-08-25 16:03:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:03:48 UTC], ["updated_at", 2016-08-25 16:03:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb9136988f8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fb913698768,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-08-25 16:03:48 UTC], ["updated_at", 2016-08-25 16:03:48 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fb91448f308,'0.9E3',9(18)>], ["updated_at", 2016-08-25 16:03:48 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:03:48 UTC], ["updated_at", 2016-08-25 16:03:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fb914474648,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fb9144744e0,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-08-25 16:03:48 UTC], ["updated_at", 2016-08-25 16:03:48 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fb913659d38,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 16:03:48 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:03:48 UTC], ["updated_at", 2016-08-25 16:03:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fb9150209b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb9150206b8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:03:48 UTC], ["updated_at", 2016-08-25 16:03:48 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fb91361b9e8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb91361b8d0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:03:48 UTC], ["updated_at", 2016-08-25 16:03:48 UTC], ["desc", "足月"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fb9135f8308,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb9135f8240,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:03:48 UTC], ["updated_at", 2016-08-25 16:03:48 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fb9135e2260,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:03:49 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:03:49 UTC], ["updated_at", 2016-08-25 16:03:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fb913592508,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb913592468,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:03:49 UTC], ["updated_at", 2016-08-25 16:03:49 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fb91357bec0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb91357b998,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:03:49 UTC], ["updated_at", 2016-08-25 16:03:49 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fb913558ad8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb913558a10,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:03:49 UTC], ["updated_at", 2016-08-25 16:03:49 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fb913509370,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:03:49 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:03:49 UTC], ["updated_at", 2016-08-25 16:03:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fb9134a1220,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb9134a1158,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:03:49 UTC], ["updated_at", 2016-08-25 16:03:49 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fb913473be0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb913473ac8,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:03:49 UTC], ["updated_at", 2016-08-25 16:03:49 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fb91344bc58,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb91344bb18,'0.3945E2',18(36)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:03:49 UTC], ["updated_at", 2016-08-25 16:03:49 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fb9143e52b8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:03:49 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:03:49 UTC], ["updated_at", 2016-08-25 16:03:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fb9143ac7b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb9143ac670,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:03:49 UTC], ["updated_at", 2016-08-25 16:03:49 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fb91438d5b8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb91438d1d0,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:03:49 UTC], ["updated_at", 2016-08-25 16:03:49 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fb914316b48,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fb914316940,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:03:49 UTC], ["updated_at", 2016-08-25 16:03:49 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fb9142e4468,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 16:03:49 UTC], ["id", 6]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7faa3c0d12c0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7faa3e860ae8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7faa3c0dabe0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7faa3c0dab40,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7faa3e86b970,'0.9E3',9(18)>], ["updated_at", 2016-08-25 16:04:44 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7faa3e848ba0,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7faa3e848b00,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7faa3e83a000,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 16:04:44 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7faa3e588910,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faa3e588870,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7faa3e57b238,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faa3e57b170,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7faa3b7f1448,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faa3b7f13a8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7faa3b7ee630,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:04:44 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7faa3e569740,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faa3e5696a0,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7faa3e54a980,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faa3e54a8e0,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7faa3b7bdb98,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faa3b7bdaf8,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7faa3b7aeaa8,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:04:44 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7faa3a8816c0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faa3a881620,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7faa3a868a30,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faa3a868990,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7faa3e521738,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faa3e521698,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7faa3c0ca830,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:04:44 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7faa3e4f3978,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faa3e4f38b0,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7faa3b76c540,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faa3b76c4a0,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7faa3b74e6a8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7faa3b74e608,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:04:44 UTC], ["updated_at", 2016-08-25 16:04:44 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7faa3b73ff18,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 16:04:44 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.3ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fe667299b18,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe6672a1980,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe6672bbad8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fe6672bba10,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fe6672b0818,'0.9E3',9(18)>], ["updated_at", 2016-08-25 16:05:08 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fe667281fe0,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fe667281f40,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fe666ab77b0,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 16:05:08 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fe66726a3e0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe66726a318,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fe666a84e78,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe666a84dd8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fe6640cb488,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe6640cb3e8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fe66318c288,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:05:08 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fe666a47460,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe666a47348,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fe666a2db50,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe666a2d9e8,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fe666a0fa88,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe666a0f9e8,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fe666a04138,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:05:08 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fe6669cec90,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe6669ceba0,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fe6669b6028,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe6669b5f88,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fe66699c4c0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe66699c3a8,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fe66724ba58,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:05:08 UTC], ["id", 5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fe66696c798,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe66696c590,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fe666954d00,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe666954c60,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fe667212708,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fe667212668,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:05:08 UTC], ["updated_at", 2016-08-25 16:05:08 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fe667203e88,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 16:05:08 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 16:06:27 UTC], ["updated_at", 2016-08-25 16:06:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f957e9e8b88,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f957f0bbed8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f957f0c36d8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f957f0c3638,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f957f0b8378,'0.9E3',9(18)>], ["updated_at", 2016-08-25 16:06:28 UTC], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f957e9d8710,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f957e9d8670,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f957e9ca070,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 16:06:28 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f957e9a1198,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f957e9a10f8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f957e993408,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f957e993368,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f957e9797d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f957e979738,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f957e972758,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:06:28 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f957b1b5770,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f957b1b56d0,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7f957f08a298,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f957f08a1f8,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7f957e9698d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f957e969838,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f957f06a628,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:06:28 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7f957f039208,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f957f039168,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7f957f0301a8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f957f030108,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7f957e9513c8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f957e951328,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f957e94a000,'0.36E4',9(18)>], ["updated_at", 2016-08-25 16:06:28 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7f957e9137d0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f957e913730,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7f957f018620,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f957f018580,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7f957c7f2da8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f957c7f2d08,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:06:28 UTC], ["updated_at", 2016-08-25 16:06:28 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7f957c7e84e8,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 16:06:28 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-08-25 16:08:17 UTC], ["updated_at", 2016-08-25 16:08:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc7c65f5f88,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:08:17 UTC], ["updated_at", 2016-08-25 16:08:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Mon, 25 Sep 2017], ["end_date", Mon, 24 Sep 2018], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc7c3740b98,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:08:17 UTC], ["updated_at", 2016-08-25 16:08:17 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fc7c66070a8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fc7c6607008,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fc7c3743b90,'0.9E3',9(18)>], ["updated_at", 2016-08-25 16:08:18 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fc7c65d4ef0,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fc7c65d4e50,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fc7c65c5a18,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 16:08:18 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Sep 2017], ["end_date", Tue, 24 Oct 2017], ["unit", "月"], ["total", #<BigDecimal:7fc7c37286b0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fc7c3728610,'0.11E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Oct 2017], ["end_date", Fri, 24 Nov 2017], ["unit", "月"], ["total", #<BigDecimal:7fc7c20c3208,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fc7c20c3140,'0.11E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Nov 2017], ["end_date", Sun, 24 Dec 2017], ["unit", "月"], ["total", #<BigDecimal:7fc7c65954f8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fc7c6595458,'0.11E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-08-15]账单"], ["start_date", Mon, 25 Sep 2017], ["end_date", Sun, 24 Dec 2017], ["due_date", Tue, 15 Aug 2017], ["total", #<BigDecimal:7fc7c3702550,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:08:18 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Dec 2017], ["end_date", Wed, 24 Jan 2018], ["unit", "月"], ["total", #<BigDecimal:7fc7c658d5f0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fc7c658d550,'0.11E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Jan 2018], ["end_date", Sat, 24 Feb 2018], ["unit", "月"], ["total", #<BigDecimal:7fc7c36e2408,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fc7c36e2368,'0.11E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Feb 2018], ["end_date", Sat, 24 Mar 2018], ["unit", "月"], ["total", #<BigDecimal:7fc7c36c9688,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fc7c36c95e8,'0.11E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-11-15]账单"], ["start_date", Mon, 25 Dec 2017], ["end_date", Sat, 24 Mar 2018], ["due_date", Wed, 15 Nov 2017], ["total", #<BigDecimal:7fc7c36ba4a8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:08:18 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Mar 2018], ["end_date", Tue, 24 Apr 2018], ["unit", "月"], ["total", #<BigDecimal:7fc7c3689010,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fc7c3688f48,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Apr 2018], ["end_date", Thu, 24 May 2018], ["unit", "月"], ["total", #<BigDecimal:7fc7c6577ea8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fc7c6577e08,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 May 2018], ["end_date", Sun, 24 Jun 2018], ["unit", "月"], ["total", #<BigDecimal:7fc7c2964d30,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fc7c2964c90,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-02-15]账单"], ["start_date", Sun, 25 Mar 2018], ["end_date", Sun, 24 Jun 2018], ["due_date", Thu, 15 Feb 2018], ["total", #<BigDecimal:7fc7c655d698,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:08:18 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jun 2018], ["end_date", Tue, 24 Jul 2018], ["unit", "月"], ["total", #<BigDecimal:7fc7c6515d20,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fc7c6515c58,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jul 2018], ["end_date", Fri, 24 Aug 2018], ["unit", "月"], ["total", #<BigDecimal:7fc7c64f6c18,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fc7c64f6b78,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Aug 2018], ["end_date", Mon, 24 Sep 2018], ["unit", "月"], ["total", #<BigDecimal:7fc7c64de0a0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fc7c64ddfd8,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:08:18 UTC], ["updated_at", 2016-08-25 16:08:18 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-05-15]账单"], ["start_date", Mon, 25 Jun 2018], ["end_date", Mon, 24 Sep 2018], ["due_date", Tue, 15 May 2018], ["total", #<BigDecimal:7fc7c367b8c0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:08:18 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd81bc21550,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7fd81bc098d8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Mon, 25 Sep 2017], ["end_date", Mon, 24 Sep 2018], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd81bbf3010,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd81b789e20,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd81b789bf0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fd81b762e10,'0.9E3',9(18)>], ["updated_at", 2016-08-25 16:09:12 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fd81b7110d8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fd81b711038,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd81b6fab30,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 16:09:12 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fd81b6b8f78,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd81b6b8eb0,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fd81b690e38,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd81b690d70,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 25 Nov 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd81b679918,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:09:12 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fd81b6193b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd81b619310,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fd81b5f0fc8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd81b5f0f28,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-10-15]账单"], ["start_date", Sat, 26 Nov 2016], ["end_date", Wed, 25 Jan 2017], ["due_date", Sat, 15 Oct 2016], ["total", #<BigDecimal:7fd81b5d8d10,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:09:12 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fd81b548210,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd81b548120,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fd81b53ad40,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd81b53ac28,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-12-15]账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Mar 2017], ["due_date", Thu, 15 Dec 2016], ["total", #<BigDecimal:7fd81b522c90,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:09:12 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fd81ba45448,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd81ba45268,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fd81c840200,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd81c8400c0,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Thu, 25 May 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fd81d0cd878,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:09:12 UTC], ["id", 6]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fd81b4d0738,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd81b4d0378,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fd81b4c2e58,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd81b4c27f0,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-04-15]账单"], ["start_date", Fri, 26 May 2017], ["end_date", Tue, 25 Jul 2017], ["due_date", Sat, 15 Apr 2017], ["total", #<BigDecimal:7fd81b9a7bf8,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:09:12 UTC], ["id", 7]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fd81b4133e0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd81b413278,'0.12E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fd81b3b0f88,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fd81b3b0b00,'0.3945E2',18(36)>], ["invoice_id", "8"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-06-15]账单"], ["start_date", Wed, 26 Jul 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Thu, 15 Jun 2017], ["total", #<BigDecimal:7fd81d07cd60,'0.238356E4',18(27)>], ["updated_at", 2016-08-25 16:09:12 UTC], ["id", 8]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Sep 2017], ["end_date", Tue, 24 Oct 2017], ["unit", "月"], ["total", #<BigDecimal:7fd81b371d38,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd81b36bc80,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:09:12 UTC], ["updated_at", 2016-08-25 16:09:12 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Oct 2017], ["end_date", Fri, 24 Nov 2017], ["unit", "月"], ["total", #<BigDecimal:7fd81b31abf0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd81b31a510,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:09:13 UTC], ["updated_at", 2016-08-25 16:09:13 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Nov 2017], ["end_date", Sun, 24 Dec 2017], ["unit", "月"], ["total", #<BigDecimal:7fd81b97fc20,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd81b97f978,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:09:13 UTC], ["updated_at", 2016-08-25 16:09:13 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-08-15]账单"], ["start_date", Mon, 25 Sep 2017], ["end_date", Sun, 24 Dec 2017], ["due_date", Tue, 15 Aug 2017], ["total", #<BigDecimal:7fd81b94f840,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:09:13 UTC], ["id", 9]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:09:13 UTC], ["updated_at", 2016-08-25 16:09:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Dec 2017], ["end_date", Wed, 24 Jan 2018], ["unit", "月"], ["total", #<BigDecimal:7fd81b243cb8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd81b243b50,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:09:13 UTC], ["updated_at", 2016-08-25 16:09:13 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Jan 2018], ["end_date", Sat, 24 Feb 2018], ["unit", "月"], ["total", #<BigDecimal:7fd81b1e85c0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd81b1e34f8,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:09:13 UTC], ["updated_at", 2016-08-25 16:09:13 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Feb 2018], ["end_date", Sat, 24 Mar 2018], ["unit", "月"], ["total", #<BigDecimal:7fd81b876d10,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd81b8765e0,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:09:13 UTC], ["updated_at", 2016-08-25 16:09:13 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-11-15]账单"], ["start_date", Mon, 25 Dec 2017], ["end_date", Sat, 24 Mar 2018], ["due_date", Wed, 15 Nov 2017], ["total", #<BigDecimal:7fd81b804300,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:09:13 UTC], ["id", 10]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:09:13 UTC], ["updated_at", 2016-08-25 16:09:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Mar 2018], ["end_date", Tue, 24 Apr 2018], ["unit", "月"], ["total", #<BigDecimal:7fd81c89b218,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd81c89b178,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:09:13 UTC], ["updated_at", 2016-08-25 16:09:13 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Apr 2018], ["end_date", Thu, 24 May 2018], ["unit", "月"], ["total", #<BigDecimal:7fd81bdbfd58,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd81bdbfcb8,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:09:13 UTC], ["updated_at", 2016-08-25 16:09:13 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 May 2018], ["end_date", Sun, 24 Jun 2018], ["unit", "月"], ["total", #<BigDecimal:7fd81f952730,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd81f952668,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:09:13 UTC], ["updated_at", 2016-08-25 16:09:13 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-02-15]账单"], ["start_date", Sun, 25 Mar 2018], ["end_date", Sun, 24 Jun 2018], ["due_date", Thu, 15 Feb 2018], ["total", #<BigDecimal:7fd81f9417c8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:09:13 UTC], ["id", 11]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:09:13 UTC], ["updated_at", 2016-08-25 16:09:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jun 2018], ["end_date", Tue, 24 Jul 2018], ["unit", "月"], ["total", #<BigDecimal:7fd81f911050,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd81f910f10,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:09:13 UTC], ["updated_at", 2016-08-25 16:09:13 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jul 2018], ["end_date", Fri, 24 Aug 2018], ["unit", "月"], ["total", #<BigDecimal:7fd81f8f8960,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd81f8f88c0,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:09:13 UTC], ["updated_at", 2016-08-25 16:09:13 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Aug 2018], ["end_date", Mon, 24 Sep 2018], ["unit", "月"], ["total", #<BigDecimal:7fd81f8dae60,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd81f8dadc0,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:09:13 UTC], ["updated_at", 2016-08-25 16:09:13 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-05-15]账单"], ["start_date", Mon, 25 Jun 2018], ["end_date", Mon, 24 Sep 2018], ["due_date", Tue, 15 May 2018], ["total", #<BigDecimal:7fd81f8c9390,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:09:13 UTC], ["id", 12]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[35m (8.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa1f59ca6a0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7fa1f59d8890,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Mon, 25 Sep 2017], ["end_date", Mon, 24 Sep 2018], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa1f205caa8,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa1f59db068,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fa1f59dafc8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fa1f59cb140,'0.9E3',9(18)>], ["updated_at", 2016-08-25 16:13:57 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fa1f53a5180,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fa1f53a50e0,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fa1f5395b18,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 16:13:57 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fa1f59a0af8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f59a0a58,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fa1f210f888,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f210f7e8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 25 Nov 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fa1f5988638,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:13:57 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fa1f596b8a8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f596b808,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fa1f5952100,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f5952060,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-10-15]账单"], ["start_date", Sat, 26 Nov 2016], ["end_date", Wed, 25 Jan 2017], ["due_date", Sat, 15 Oct 2016], ["total", #<BigDecimal:7fa1f59418f0,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:13:57 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fa1f5364040,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f5365968,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fa1f5347508,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f5347468,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-12-15]账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Mar 2017], ["due_date", Thu, 15 Dec 2016], ["total", #<BigDecimal:7fa1f533c248,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:13:57 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fa1f5910db8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f5910d18,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fa1f53141f8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f5314158,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Thu, 25 May 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fa1f52f7170,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:13:57 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fa1f52c62f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f52c61d8,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fa1f52ad1d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f52ad110,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-04-15]账单"], ["start_date", Fri, 26 May 2017], ["end_date", Tue, 25 Jul 2017], ["due_date", Sat, 15 Apr 2017], ["total", #<BigDecimal:7fa1f5902858,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:13:57 UTC], ["id", 7]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fa1f5286bc8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f5286b28,'0.12E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fa1f526da38,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fa1f526d8f8,'0.3945E2',18(36)>], ["invoice_id", "8"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-06-15]账单"], ["start_date", Wed, 26 Jul 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Thu, 15 Jun 2017], ["total", #<BigDecimal:7fa1f58e9d80,'0.238356E4',18(27)>], ["updated_at", 2016-08-25 16:13:57 UTC], ["id", 8]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Sep 2017], ["end_date", Tue, 24 Oct 2017], ["unit", "月"], ["total", #<BigDecimal:7fa1f524cdd8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f524cce8,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Oct 2017], ["end_date", Fri, 24 Nov 2017], ["unit", "月"], ["total", #<BigDecimal:7fa1f5234210,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f5234148,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Nov 2017], ["end_date", Sun, 24 Dec 2017], ["unit", "月"], ["total", #<BigDecimal:7fa1f5217980,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f5217890,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-08-15]账单"], ["start_date", Mon, 25 Sep 2017], ["end_date", Sun, 24 Dec 2017], ["due_date", Tue, 15 Aug 2017], ["total", #<BigDecimal:7fa1f520c8f0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:13:57 UTC], ["id", 9]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Dec 2017], ["end_date", Wed, 24 Jan 2018], ["unit", "月"], ["total", #<BigDecimal:7fa1f51e6b50,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f51e6ab0,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Jan 2018], ["end_date", Sat, 24 Feb 2018], ["unit", "月"], ["total", #<BigDecimal:7fa1f51cd498,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f51cd3f8,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Feb 2018], ["end_date", Sat, 24 Mar 2018], ["unit", "月"], ["total", #<BigDecimal:7fa1f20cfb48,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f20cfaa8,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-11-15]账单"], ["start_date", Mon, 25 Dec 2017], ["end_date", Sat, 24 Mar 2018], ["due_date", Wed, 15 Nov 2017], ["total", #<BigDecimal:7fa1f20c4388,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:13:57 UTC], ["id", 10]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Mar 2018], ["end_date", Tue, 24 Apr 2018], ["unit", "月"], ["total", #<BigDecimal:7fa1f51b53e8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f51b5348,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Apr 2018], ["end_date", Thu, 24 May 2018], ["unit", "月"], ["total", #<BigDecimal:7fa1f30b8d20,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f30b8c58,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 May 2018], ["end_date", Sun, 24 Jun 2018], ["unit", "月"], ["total", #<BigDecimal:7fa1f51940a8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f5194008,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-02-15]账单"], ["start_date", Sun, 25 Mar 2018], ["end_date", Sun, 24 Jun 2018], ["due_date", Thu, 15 Feb 2018], ["total", #<BigDecimal:7fa1f58a1b70,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:13:57 UTC], ["id", 11]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jun 2018], ["end_date", Tue, 24 Jul 2018], ["unit", "月"], ["total", #<BigDecimal:7fa1f51743c0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f5174320,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jul 2018], ["end_date", Fri, 24 Aug 2018], ["unit", "月"], ["total", #<BigDecimal:7fa1f5164b00,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f5164a60,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Aug 2018], ["end_date", Mon, 24 Sep 2018], ["unit", "月"], ["total", #<BigDecimal:7fa1f5136b88,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa1f5136ae8,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:13:57 UTC], ["updated_at", 2016-08-25 16:13:57 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-05-15]账单"], ["start_date", Mon, 25 Jun 2018], ["end_date", Mon, 24 Sep 2018], ["due_date", Tue, 15 May 2018], ["total", #<BigDecimal:7fa1f512fa68,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:13:57 UTC], ["id", 12]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[35m (9.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ffa21a02be8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7ffa25bc76a0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["cycle", 3], ["monthly_price", #<BigDecimal:7ffa260aad20,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ffa25bbc930,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7ffa25bbc890,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7ffa25bb7a98,'0.9E3',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7ffa25b84cd8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7ffa25b84c38,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7ffa25b7d848,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7ffa25b5d638,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffa25b5e628,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7ffa26079ec8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffa26079e28,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 25 Nov 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7ffa2606afb8,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7ffa22a05c98,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffa22a05bf8,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa229eea48,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffa229ee9a8,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-10-15]账单"], ["start_date", Sat, 26 Nov 2016], ["end_date", Wed, 25 Jan 2017], ["due_date", Sat, 15 Oct 2016], ["total", #<BigDecimal:7ffa229e7220,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa229b5d88,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffa229b5cc0,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa2299d170,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffa2299d080,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-12-15]账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Mar 2017], ["due_date", Thu, 15 Dec 2016], ["total", #<BigDecimal:7ffa25b55fc8,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa26021778,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffa26021610,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa25b07940,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffa25b078a0,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Thu, 25 May 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7ffa2601a450,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 6]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa2298f480,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffa2298f3e0,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa25ae7820,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffa25ae7780,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-04-15]账单"], ["start_date", Fri, 26 May 2017], ["end_date", Tue, 25 Jul 2017], ["due_date", Sat, 15 Apr 2017], ["total", #<BigDecimal:7ffa25add028,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 7]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa25abfd70,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffa25abfcd0,'0.12E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7ffa25aa6348,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7ffa25aa62a8,'0.3945E2',18(36)>], ["invoice_id", "8"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-06-15]账单"], ["start_date", Wed, 26 Jul 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Thu, 15 Jun 2017], ["total", #<BigDecimal:7ffa25a97168,'0.238356E4',18(27)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 8]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Sep 2015], ["end_date", Sat, 24 Oct 2015], ["unit", "月"], ["total", #<BigDecimal:7ffa25a6ea10,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa25a6e948,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Oct 2015], ["end_date", Tue, 24 Nov 2015], ["unit", "月"], ["total", #<BigDecimal:7ffa21fd4a58,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa21fd49b8,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Nov 2015], ["end_date", Thu, 24 Dec 2015], ["unit", "月"], ["total", #<BigDecimal:7ffa21fb47f8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa21fb4758,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2015-08-15]账单"], ["start_date", Fri, 25 Sep 2015], ["end_date", Thu, 24 Dec 2015], ["due_date", Sat, 15 Aug 2015], ["total", #<BigDecimal:7ffa2296d358,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 9]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Dec 2015], ["end_date", Sun, 24 Jan 2016], ["unit", "月"], ["total", #<BigDecimal:7ffa25a46240,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa25a461a0,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jan 2016], ["end_date", Wed, 24 Feb 2016], ["unit", "月"], ["total", #<BigDecimal:7ffa21fadd18,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa21fadc78,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Feb 2016], ["end_date", Thu, 24 Mar 2016], ["unit", "月"], ["total", #<BigDecimal:7ffa21f942f0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa21f94250,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2015-11-15]账单"], ["start_date", Fri, 25 Dec 2015], ["end_date", Thu, 24 Mar 2016], ["due_date", Sun, 15 Nov 2015], ["total", #<BigDecimal:7ffa21f85c78,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 10]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Mar 2016], ["end_date", Sun, 24 Apr 2016], ["unit", "月"], ["total", #<BigDecimal:7ffa25a0e958,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa25a0e8b8,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Apr 2016], ["end_date", Tue, 24 May 2016], ["unit", "月"], ["total", #<BigDecimal:7ffa259f5c50,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa259f5b88,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 May 2016], ["end_date", Fri, 24 Jun 2016], ["unit", "月"], ["total", #<BigDecimal:7ffa259dccc8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa259dcc28,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-02-15]账单"], ["start_date", Fri, 25 Mar 2016], ["end_date", Fri, 24 Jun 2016], ["due_date", Mon, 15 Feb 2016], ["total", #<BigDecimal:7ffa259ce560,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 11]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Jun 2016], ["end_date", Sun, 24 Jul 2016], ["unit", "月"], ["total", #<BigDecimal:7ffa259ae738,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa259ae698,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jul 2016], ["end_date", Wed, 24 Aug 2016], ["unit", "月"], ["total", #<BigDecimal:7ffa21f66030,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa21f65f40,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ffa25977b20,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa25977a80,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-05-15]账单"], ["start_date", Sat, 25 Jun 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Sun, 15 May 2016], ["total", #<BigDecimal:7ffa2295c670,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 12]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7ffa25954738,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa25954698,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7ffa2592b298,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa2592b1f8,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7ffa21f36da8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa21f36d08,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sat, 24 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7ffa21f27920,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 13]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa21f05870,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa21f057d0,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa25911d48,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa25911ca8,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Feb 2017], ["end_date", Fri, 24 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa21eefe08,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa21eefd68,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-11-15]账单"], ["start_date", Sun, 25 Dec 2016], ["end_date", Fri, 24 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7ffa21ee4788,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 14]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Mar 2017], ["end_date", Mon, 24 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa21ed4568,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa21ed44c8,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Apr 2017], ["end_date", Wed, 24 May 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa21ebf140,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa21ebf0a0,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 May 2017], ["end_date", Sat, 24 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa258e2f98,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa258e2ea8,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-02-15]账单"], ["start_date", Sat, 25 Mar 2017], ["end_date", Sat, 24 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7ffa21eb71e8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 15]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Jun 2017], ["end_date", Mon, 24 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa258d1248,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa258d11a8,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Jul 2017], ["end_date", Thu, 24 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa21e7fce8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa21e7fc48,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa258aa4b8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa258aa418,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-05-15]账单"], ["start_date", Sun, 25 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7ffa2589a478,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 16]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Sep 2017], ["end_date", Tue, 24 Oct 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa21e5ed40,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa21e5ec78,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Oct 2017], ["end_date", Fri, 24 Nov 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa25869fa8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa25869f08,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Nov 2017], ["end_date", Sun, 24 Dec 2017], ["unit", "月"], ["total", #<BigDecimal:7ffa25851e58,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa25851db8,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-08-15]账单"], ["start_date", Mon, 25 Sep 2017], ["end_date", Sun, 24 Dec 2017], ["due_date", Tue, 15 Aug 2017], ["total", #<BigDecimal:7ffa258428e0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 17]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Dec 2017], ["end_date", Wed, 24 Jan 2018], ["unit", "月"], ["total", #<BigDecimal:7ffa21e55b00,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa21e55a60,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Jan 2018], ["end_date", Sat, 24 Feb 2018], ["unit", "月"], ["total", #<BigDecimal:7ffa258091f8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa25809158,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Feb 2018], ["end_date", Sat, 24 Mar 2018], ["unit", "月"], ["total", #<BigDecimal:7ffa227ecf10,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa227ece70,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-11-15]账单"], ["start_date", Mon, 25 Dec 2017], ["end_date", Sat, 24 Mar 2018], ["due_date", Wed, 15 Nov 2017], ["total", #<BigDecimal:7ffa238a2418,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 18]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Mar 2018], ["end_date", Tue, 24 Apr 2018], ["unit", "月"], ["total", #<BigDecimal:7ffa21e2c6b0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa21e2c610,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Apr 2018], ["end_date", Thu, 24 May 2018], ["unit", "月"], ["total", #<BigDecimal:7ffa227b69b0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa227b6910,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 May 2018], ["end_date", Sun, 24 Jun 2018], ["unit", "月"], ["total", #<BigDecimal:7ffa21e158e8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa21e15848,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-02-15]账单"], ["start_date", Sun, 25 Mar 2018], ["end_date", Sun, 24 Jun 2018], ["due_date", Thu, 15 Feb 2018], ["total", #<BigDecimal:7ffa21e069d8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 19]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jun 2018], ["end_date", Tue, 24 Jul 2018], ["unit", "月"], ["total", #<BigDecimal:7ffa227a4fd0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa227a4f30,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jul 2018], ["end_date", Fri, 24 Aug 2018], ["unit", "月"], ["total", #<BigDecimal:7ffa22794d60,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa22794cc0,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Aug 2018], ["end_date", Mon, 24 Sep 2018], ["unit", "月"], ["total", #<BigDecimal:7ffa22777558,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7ffa22777490,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 16:15:15 UTC], ["updated_at", 2016-08-25 16:15:15 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-05-15]账单"], ["start_date", Mon, 25 Jun 2018], ["end_date", Mon, 24 Sep 2018], ["due_date", Tue, 15 May 2018], ["total", #<BigDecimal:7ffa2276c6a8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:15:15 UTC], ["id", 20]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "3"]]
  [1m[36mLineitem Load (0.9ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "14"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "15"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "16"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "17"]]
  [1m[36mLineitem Load (0.3ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "18"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "19"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "20"]]
  [1m[35m (8.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f956ed35f08,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7f956f0c9778,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["cycle", 3], ["monthly_price", #<BigDecimal:7f956b1f9a98,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f956ed3fcb0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f956ed3fc10,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f956f0d0140,'0.9E3',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f956ed25f40,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f956ed25ea0,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f956ed16b08,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f956f0aa3f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f956f0aa350,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f956f0a0d28,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f956f0a0c88,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 25 Nov 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f956f090ae0,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f956eccf2d0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f956eccf230,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f956ecb6c58,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f956ecb6bb8,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-10-15]账单"], ["start_date", Sat, 26 Nov 2016], ["end_date", Wed, 25 Jan 2017], ["due_date", Sat, 15 Oct 2016], ["total", #<BigDecimal:7f956eca73c0,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7f956f04b968,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f956f04b8c8,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7f956f032d00,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f956f032c10,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-12-15]账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Mar 2017], ["due_date", Thu, 15 Dec 2016], ["total", #<BigDecimal:7f956f023c10,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7f956b7e8df0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f956b7e8d00,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7f956b7e38a0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f956b7e3760,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Thu, 25 May 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f956b7d86a8,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7f956c8e2958,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f956c8e28b8,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7f956ec34640,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f956ec34578,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-04-15]账单"], ["start_date", Fri, 26 May 2017], ["end_date", Tue, 25 Jul 2017], ["due_date", Sat, 15 Apr 2017], ["total", #<BigDecimal:7f956ec25c58,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 7]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7f956b7c9bd0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f956b7c9b30,'0.12E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7f956ebe51d0,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f956ebe5108,'0.3945E2',18(36)>], ["invoice_id", "8"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-06-15]账单"], ["start_date", Wed, 26 Jul 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Thu, 15 Jun 2017], ["total", #<BigDecimal:7f956b7b9eb0,'0.238356E4',18(27)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 8]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Sep 2015], ["end_date", Sat, 24 Oct 2015], ["unit", "月"], ["total", #<BigDecimal:7f956ebbc4b0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956ebbc410,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Oct 2015], ["end_date", Tue, 24 Nov 2015], ["unit", "月"], ["total", #<BigDecimal:7f956eba41a8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956eba4108,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Nov 2015], ["end_date", Thu, 24 Dec 2015], ["unit", "月"], ["total", #<BigDecimal:7f956b7aab90,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956b7aaaf0,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2015-08-15]账单"], ["start_date", Fri, 25 Sep 2015], ["end_date", Thu, 24 Dec 2015], ["due_date", Sat, 15 Aug 2015], ["total", #<BigDecimal:7f956b79bd20,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 9]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Dec 2015], ["end_date", Sun, 24 Jan 2016], ["unit", "月"], ["total", #<BigDecimal:7f956eb74f48,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956eb74ea8,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jan 2016], ["end_date", Wed, 24 Feb 2016], ["unit", "月"], ["total", #<BigDecimal:7f956eb57ee8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956eb57e48,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Feb 2016], ["end_date", Thu, 24 Mar 2016], ["unit", "月"], ["total", #<BigDecimal:7f956b77b1b0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956b77b110,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2015-11-15]账单"], ["start_date", Fri, 25 Dec 2015], ["end_date", Thu, 24 Mar 2016], ["due_date", Sun, 15 Nov 2015], ["total", #<BigDecimal:7f956c8cb118,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 10]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Mar 2016], ["end_date", Sun, 24 Apr 2016], ["unit", "月"], ["total", #<BigDecimal:7f956eb27338,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956eb27298,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Apr 2016], ["end_date", Tue, 24 May 2016], ["unit", "月"], ["total", #<BigDecimal:7f956b763880,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956b7637e0,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 May 2016], ["end_date", Fri, 24 Jun 2016], ["unit", "月"], ["total", #<BigDecimal:7f956b752f08,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956b752e68,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-02-15]账单"], ["start_date", Fri, 25 Mar 2016], ["end_date", Fri, 24 Jun 2016], ["due_date", Mon, 15 Feb 2016], ["total", #<BigDecimal:7f956b74bd20,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 11]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Jun 2016], ["end_date", Sun, 24 Jul 2016], ["unit", "月"], ["total", #<BigDecimal:7f956eb07ec0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956eb07e20,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jul 2016], ["end_date", Wed, 24 Aug 2016], ["unit", "月"], ["total", #<BigDecimal:7f956b7318f8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956eafff68,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f956eae7eb8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956eae7e18,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-05-15]账单"], ["start_date", Sat, 25 Jun 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Sun, 15 May 2016], ["total", #<BigDecimal:7f956b7285c8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 12]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f956b6f1a50,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956b6f19b0,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f956eabe158,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956eabe0b8,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f956b6e1948,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956b6e1858,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sat, 24 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f956b6d22e0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 13]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f956b6a0538,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956b6a0470,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7f956b6826c8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956b682628,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Feb 2017], ["end_date", Fri, 24 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7f956b672d18,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956b672c78,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-11-15]账单"], ["start_date", Sun, 25 Dec 2016], ["end_date", Fri, 24 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f956ea9bbd0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 14]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Mar 2017], ["end_date", Mon, 24 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7f956ea893e0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956ea89340,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Apr 2017], ["end_date", Wed, 24 May 2017], ["unit", "月"], ["total", #<BigDecimal:7f956b648860,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956b6487c0,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 May 2017], ["end_date", Sat, 24 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7f956ea63870,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956ea637d0,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-02-15]账单"], ["start_date", Sat, 25 Mar 2017], ["end_date", Sat, 24 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7f956ea590f0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 15]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Jun 2017], ["end_date", Mon, 24 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7f956b630170,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956b6300d0,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Jul 2017], ["end_date", Thu, 24 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7f956ea19fe0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956ea19f40,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "月"], ["total", #<BigDecimal:7f956ea01008,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956ea00f18,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-05-15]账单"], ["start_date", Sun, 25 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7f956e9f0f28,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 16]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Sep 2017], ["end_date", Tue, 24 Oct 2017], ["unit", "月"], ["total", #<BigDecimal:7f956e9b9438,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956e9b9398,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Oct 2017], ["end_date", Fri, 24 Nov 2017], ["unit", "月"], ["total", #<BigDecimal:7f956e9a0a78,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956e9a09d8,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Nov 2017], ["end_date", Sun, 24 Dec 2017], ["unit", "月"], ["total", #<BigDecimal:7f956e983e00,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956e983d60,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-08-15]账单"], ["start_date", Mon, 25 Sep 2017], ["end_date", Sun, 24 Dec 2017], ["due_date", Tue, 15 Aug 2017], ["total", #<BigDecimal:7f956e9792e8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 17]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Dec 2017], ["end_date", Wed, 24 Jan 2018], ["unit", "月"], ["total", #<BigDecimal:7f956e9508e8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956e950848,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Jan 2018], ["end_date", Sat, 24 Feb 2018], ["unit", "月"], ["total", #<BigDecimal:7f956e938108,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956e938068,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Feb 2018], ["end_date", Sat, 24 Mar 2018], ["unit", "月"], ["total", #<BigDecimal:7f956e930228,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956e930188,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-11-15]账单"], ["start_date", Mon, 25 Dec 2017], ["end_date", Sat, 24 Mar 2018], ["due_date", Wed, 15 Nov 2017], ["total", #<BigDecimal:7f956b6094d0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 18]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Mar 2018], ["end_date", Tue, 24 Apr 2018], ["unit", "月"], ["total", #<BigDecimal:7f956e9000c8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956e900078,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Apr 2018], ["end_date", Thu, 24 May 2018], ["unit", "月"], ["total", #<BigDecimal:7f956e8e3568,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956e8e34c8,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 May 2018], ["end_date", Sun, 24 Jun 2018], ["unit", "月"], ["total", #<BigDecimal:7f956e8ca0b8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956e8ca018,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-02-15]账单"], ["start_date", Sun, 25 Mar 2018], ["end_date", Sun, 24 Jun 2018], ["due_date", Thu, 15 Feb 2018], ["total", #<BigDecimal:7f956e8bab90,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 19]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jun 2018], ["end_date", Tue, 24 Jul 2018], ["unit", "月"], ["total", #<BigDecimal:7f956b5f07c8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956b5f06d8,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jul 2018], ["end_date", Fri, 24 Aug 2018], ["unit", "月"], ["total", #<BigDecimal:7f956e8901d8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956e890138,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Aug 2018], ["end_date", Mon, 24 Sep 2018], ["unit", "月"], ["total", #<BigDecimal:7f956e8801c0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f956e880120,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 16:43:22 UTC], ["updated_at", 2016-08-25 16:43:22 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-05-15]账单"], ["start_date", Mon, 25 Jun 2018], ["end_date", Mon, 24 Sep 2018], ["due_date", Tue, 15 May 2018], ["total", #<BigDecimal:7f956e870450,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:22 UTC], ["id", 20]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "14"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "15"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "16"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "17"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "18"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "19"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "20"]]
  [1m[35m (9.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb0ce2abb20,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7fb0ce2ba4e0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb0ca9c1580,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0ce2b9a68,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fb0ce2b99c8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fb0ce2a9e38,'0.9E3',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fb0ce2734a0,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fb0ce273400,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fb0ce263438,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0ce23aad8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ce23aa38,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0cd9b97b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0cd9b9710,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 25 Nov 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fb0ce22a7a0,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0ce1f98f8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ce1f9858,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0ce1daea8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ce1dae08,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-10-15]账单"], ["start_date", Sat, 26 Nov 2016], ["end_date", Wed, 25 Jan 2017], ["due_date", Sat, 15 Oct 2016], ["total", #<BigDecimal:7fb0ce1cb408,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0ce1996d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ce199638,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0ce180c50,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ce180b60,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-12-15]账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Mar 2017], ["due_date", Thu, 15 Dec 2016], ["total", #<BigDecimal:7fb0ce171a20,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0ce139b48,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ce139a80,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0ce120c38,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ce120b98,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Thu, 25 May 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fb0cd9a06e8,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0cd983f48,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0cd983ea8,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0cd96bab0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0cd96ba10,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-04-15]账单"], ["start_date", Fri, 26 May 2017], ["end_date", Tue, 25 Jul 2017], ["due_date", Sat, 15 Apr 2017], ["total", #<BigDecimal:7fb0ce0f1168,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 7]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0ce0c9398,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ce0c92f8,'0.12E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fb0ce0abf78,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fb0ce0abed8,'0.3945E2',18(36)>], ["invoice_id", "8"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-06-15]账单"], ["start_date", Wed, 26 Jul 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Thu, 15 Jun 2017], ["total", #<BigDecimal:7fb0ce0a05b0,'0.238356E4',18(27)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 8]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Sep 2015], ["end_date", Sat, 24 Oct 2015], ["unit", "月"], ["total", #<BigDecimal:7fb0cb137c10,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0cb137b70,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Oct 2015], ["end_date", Tue, 24 Nov 2015], ["unit", "月"], ["total", #<BigDecimal:7fb0ca9ab780,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca9ab6e0,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Nov 2015], ["end_date", Thu, 24 Dec 2015], ["unit", "月"], ["total", #<BigDecimal:7fb0cd949d20,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0cd949c80,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2015-08-15]账单"], ["start_date", Fri, 25 Sep 2015], ["end_date", Thu, 24 Dec 2015], ["due_date", Sat, 15 Aug 2015], ["total", #<BigDecimal:7fb0ce07a7e8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 9]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Dec 2015], ["end_date", Sun, 24 Jan 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0ce060b68,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ce060ac8,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jan 2016], ["end_date", Wed, 24 Feb 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0ce043c48,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ce043ae0,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Feb 2016], ["end_date", Thu, 24 Mar 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0ce02ae78,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ce02add8,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2015-11-15]账单"], ["start_date", Fri, 25 Dec 2015], ["end_date", Thu, 24 Mar 2016], ["due_date", Sun, 15 Nov 2015], ["total", #<BigDecimal:7fb0ce01aa78,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 10]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Mar 2016], ["end_date", Sun, 24 Apr 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0ce003698,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ce0035f8,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Apr 2016], ["end_date", Tue, 24 May 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0ca7e7e08,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca7e7d68,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 May 2016], ["end_date", Fri, 24 Jun 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0cd903758,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0cd9036b8,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-02-15]账单"], ["start_date", Fri, 25 Mar 2016], ["end_date", Fri, 24 Jun 2016], ["due_date", Mon, 15 Feb 2016], ["total", #<BigDecimal:7fb0cd8f87e0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 11]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Jun 2016], ["end_date", Sun, 24 Jul 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0cd8dba28,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0cd8db988,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jul 2016], ["end_date", Wed, 24 Aug 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0ca7b7cf8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca7b7c58,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0ca79f248,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca79f1a8,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-05-15]账单"], ["start_date", Sat, 25 Jun 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Sun, 15 May 2016], ["total", #<BigDecimal:7fb0cd8d0088,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 12]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0ca7753a8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca775308,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0ca765ae8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca765a20,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fb0cd8a1058,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0cd8a0ef0,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sat, 24 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fb0ca749e60,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0ca99ba10,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca99b920,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0ca742390,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca7422f0,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Feb 2017], ["end_date", Fri, 24 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0ca72a8d0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca72a830,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-11-15]账单"], ["start_date", Sun, 25 Dec 2016], ["end_date", Fri, 24 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fb0ca71b6f0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 14]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Mar 2017], ["end_date", Mon, 24 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0cd861200,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0cd861160,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Apr 2017], ["end_date", Wed, 24 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0ca6e9600,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca6e9560,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 May 2017], ["end_date", Sat, 24 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0ca6dbd48,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca6dbca8,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-02-15]账单"], ["start_date", Sat, 25 Mar 2017], ["end_date", Sat, 24 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fb0cd8395e8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 15]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Jun 2017], ["end_date", Mon, 24 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0ca6b0210,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca6b0170,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Jul 2017], ["end_date", Thu, 24 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0cb10ddc0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0cb10dd20,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0cd819018,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0cd818ed8,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-05-15]账单"], ["start_date", Sun, 25 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fb0cd808f38,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 16]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Sep 2017], ["end_date", Tue, 24 Oct 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0c9fc8a88,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0c9fc89e8,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Oct 2017], ["end_date", Fri, 24 Nov 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0ca9705e0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca971940,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Nov 2017], ["end_date", Sun, 24 Dec 2017], ["unit", "月"], ["total", #<BigDecimal:7fb0ca953238,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca953198,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-08-15]账单"], ["start_date", Mon, 25 Sep 2017], ["end_date", Sun, 24 Dec 2017], ["due_date", Tue, 15 Aug 2017], ["total", #<BigDecimal:7fb0ca6987a0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 17]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Dec 2017], ["end_date", Wed, 24 Jan 2018], ["unit", "月"], ["total", #<BigDecimal:7fb0ca663d98,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca663c58,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Jan 2018], ["end_date", Sat, 24 Feb 2018], ["unit", "月"], ["total", #<BigDecimal:7fb0ca64af50,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca64aeb0,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Feb 2018], ["end_date", Sat, 24 Mar 2018], ["unit", "月"], ["total", #<BigDecimal:7fb0ca942de8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca942d48,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-11-15]账单"], ["start_date", Mon, 25 Dec 2017], ["end_date", Sat, 24 Mar 2018], ["due_date", Wed, 15 Nov 2017], ["total", #<BigDecimal:7fb0c9fa8328,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 18]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Mar 2018], ["end_date", Tue, 24 Apr 2018], ["unit", "月"], ["total", #<BigDecimal:7fb0ca92b760,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca92b620,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Apr 2018], ["end_date", Thu, 24 May 2018], ["unit", "月"], ["total", #<BigDecimal:7fb0ca63ad08,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca63ac40,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 May 2018], ["end_date", Sun, 24 Jun 2018], ["unit", "月"], ["total", #<BigDecimal:7fb0ca620bd8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0ca620a70,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-02-15]账单"], ["start_date", Sun, 25 Mar 2018], ["end_date", Sun, 24 Jun 2018], ["due_date", Thu, 15 Feb 2018], ["total", #<BigDecimal:7fb0ca6119a8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 19]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jun 2018], ["end_date", Tue, 24 Jul 2018], ["unit", "月"], ["total", #<BigDecimal:7fb0c9f7b058,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0c9f7afb8,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jul 2018], ["end_date", Fri, 24 Aug 2018], ["unit", "月"], ["total", #<BigDecimal:7fb0c9f62f08,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0c9f62e40,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Aug 2018], ["end_date", Mon, 24 Sep 2018], ["unit", "月"], ["total", #<BigDecimal:7fb0c9f4af48,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb0c9f4aea8,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 16:43:37 UTC], ["updated_at", 2016-08-25 16:43:37 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-05-15]账单"], ["start_date", Mon, 25 Jun 2018], ["end_date", Mon, 24 Sep 2018], ["due_date", Tue, 15 May 2018], ["total", #<BigDecimal:7fb0c9f3b1d8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:43:37 UTC], ["id", 20]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (1.8ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[36mLineitem Load (0.3ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "14"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "15"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "16"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "17"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "18"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "19"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "20"]]
  [1m[35m (9.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (3.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fdb23996280,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7fdb230eff28,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["cycle", 3], ["monthly_price", #<BigDecimal:7fdb23fe3318,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.3ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb230ef2a8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fdb230ef208,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fdb230df8a8,'0.9E3',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fdb23fc8568,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fdb23fc84c8,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fdb26d94f00,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb23fb3b90,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdb23fb3af0,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb26d5d910,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26d5d870,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 25 Nov 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fdb26d4e1e0,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb26d1d220,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26d1d180,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb26cff068,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26cfefc8,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-10-15]账单"], ["start_date", Sat, 26 Nov 2016], ["end_date", Wed, 25 Jan 2017], ["due_date", Sat, 15 Oct 2016], ["total", #<BigDecimal:7fdb26ceec90,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb26cbcee8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26cbce20,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb26ca42f8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26ca4230,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-12-15]账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Mar 2017], ["due_date", Thu, 15 Dec 2016], ["total", #<BigDecimal:7fdb26c95258,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb26c6d730,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26c6d690,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb26c54aa0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26c54a00,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Thu, 25 May 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fdb26c378d8,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb23f9a9b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdb23f9a910,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb23f82f18,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdb23f82e78,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-04-15]账单"], ["start_date", Fri, 26 May 2017], ["end_date", Tue, 25 Jul 2017], ["due_date", Sat, 15 Apr 2017], ["total", #<BigDecimal:7fdb23f785b8,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 7]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb230d43b8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdb230d42f0,'0.12E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fdb23f5b0a8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fdb23f5afe0,'0.3945E2',18(36)>], ["invoice_id", "8"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-06-15]账单"], ["start_date", Wed, 26 Jul 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Thu, 15 Jun 2017], ["total", #<BigDecimal:7fdb23f4b9c8,'0.238356E4',18(27)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 8]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Sep 2015], ["end_date", Sat, 24 Oct 2015], ["unit", "月"], ["total", #<BigDecimal:7fdb23f3ab00,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb23f3aa60,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Oct 2015], ["end_date", Tue, 24 Nov 2015], ["unit", "月"], ["total", #<BigDecimal:7fdb26bc5cd8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26bc5c38,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Nov 2015], ["end_date", Thu, 24 Dec 2015], ["unit", "月"], ["total", #<BigDecimal:7fdb23f202c8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb23f20228,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2015-08-15]账单"], ["start_date", Fri, 25 Sep 2015], ["end_date", Thu, 24 Dec 2015], ["due_date", Sat, 15 Aug 2015], ["total", #<BigDecimal:7fdb26bb5d38,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 9]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Dec 2015], ["end_date", Sun, 24 Jan 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb26b8c1b8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26b8c118,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jan 2016], ["end_date", Wed, 24 Feb 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb26b6eac8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26b6ea28,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Feb 2016], ["end_date", Thu, 24 Mar 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb240dd5e8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb240dd4f8,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2015-11-15]账单"], ["start_date", Fri, 25 Dec 2015], ["end_date", Thu, 24 Mar 2016], ["due_date", Sun, 15 Nov 2015], ["total", #<BigDecimal:7fdb240ce660,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 10]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Mar 2016], ["end_date", Sun, 24 Apr 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb26b57378,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26b572b0,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Apr 2016], ["end_date", Tue, 24 May 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb26b3ec60,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26b3eb98,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 May 2016], ["end_date", Fri, 24 Jun 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb26b361a0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26b36100,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-02-15]账单"], ["start_date", Fri, 25 Mar 2016], ["end_date", Fri, 24 Jun 2016], ["due_date", Mon, 15 Feb 2016], ["total", #<BigDecimal:7fdb23ed3248,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 11]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Jun 2016], ["end_date", Sun, 24 Jul 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb26b25f08,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26b25e18,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jul 2016], ["end_date", Wed, 24 Aug 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb26b0e718,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26b0e678,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb26ae45f8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26ae4558,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-05-15]账单"], ["start_date", Sat, 25 Jun 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Sun, 15 May 2016], ["total", #<BigDecimal:7fdb26ad5418,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 12]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb26aa6528,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26aa6fc8,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb26a83a28,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26a83938,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb26a6b1a8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26a6b108,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sat, 24 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fdb23e9be38,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 13]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb23e63880,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb23e637e0,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb23e5be78,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb23e5bdd8,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Feb 2017], ["end_date", Fri, 24 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb23e43738,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb23e43698,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-11-15]账单"], ["start_date", Sun, 25 Dec 2016], ["end_date", Fri, 24 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fdb23e32ed8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 14]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Mar 2017], ["end_date", Mon, 24 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb240c6af0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb240c6a28,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Apr 2017], ["end_date", Wed, 24 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb240b6178,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb240b60d8,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 May 2017], ["end_date", Sat, 24 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb240a5da0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb240a5cd8,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-02-15]账单"], ["start_date", Sat, 25 Mar 2017], ["end_date", Sat, 24 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fdb26a428c0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 15]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Jun 2017], ["end_date", Mon, 24 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb23de1100,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb23de1060,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Jul 2017], ["end_date", Thu, 24 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb26a0b0a0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26a0afd8,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb269f2528,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb269f2488,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-05-15]账单"], ["start_date", Sun, 25 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fdb23dda800,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 16]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Sep 2017], ["end_date", Tue, 24 Oct 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb269ca820,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb269ca780,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Oct 2017], ["end_date", Fri, 24 Nov 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb269b1a00,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb269b1960,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Nov 2017], ["end_date", Sun, 24 Dec 2017], ["unit", "月"], ["total", #<BigDecimal:7fdb269a1588,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb269a14e8,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-08-15]账单"], ["start_date", Mon, 25 Sep 2017], ["end_date", Sun, 24 Dec 2017], ["due_date", Tue, 15 Aug 2017], ["total", #<BigDecimal:7fdb23dc29d0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 17]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Dec 2017], ["end_date", Wed, 24 Jan 2018], ["unit", "月"], ["total", #<BigDecimal:7fdb26971ce8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26971bf8,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Jan 2018], ["end_date", Sat, 24 Feb 2018], ["unit", "月"], ["total", #<BigDecimal:7fdb26958bf8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26958b58,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Feb 2018], ["end_date", Sat, 24 Mar 2018], ["unit", "月"], ["total", #<BigDecimal:7fdb269412a0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26941200,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-11-15]账单"], ["start_date", Mon, 25 Dec 2017], ["end_date", Sat, 24 Mar 2018], ["due_date", Wed, 15 Nov 2017], ["total", #<BigDecimal:7fdb269324f8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 18]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Mar 2018], ["end_date", Tue, 24 Apr 2018], ["unit", "月"], ["total", #<BigDecimal:7fdb26908630,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb26908590,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Apr 2018], ["end_date", Thu, 24 May 2018], ["unit", "月"], ["total", #<BigDecimal:7fdb23da0858,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb23da07b8,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 May 2018], ["end_date", Sun, 24 Jun 2018], ["unit", "月"], ["total", #<BigDecimal:7fdb268faad0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb268faa30,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-02-15]账单"], ["start_date", Sun, 25 Mar 2018], ["end_date", Sun, 24 Jun 2018], ["due_date", Thu, 15 Feb 2018], ["total", #<BigDecimal:7fdb268f2ee8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 19]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jun 2018], ["end_date", Tue, 24 Jul 2018], ["unit", "月"], ["total", #<BigDecimal:7fdb268c1118,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb268c1078,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jul 2018], ["end_date", Fri, 24 Aug 2018], ["unit", "月"], ["total", #<BigDecimal:7fdb268a93d8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb268a9338,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Aug 2018], ["end_date", Mon, 24 Sep 2018], ["unit", "月"], ["total", #<BigDecimal:7fdb268a0030,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fdb2689bf80,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 16:54:43 UTC], ["updated_at", 2016-08-25 16:54:43 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-05-15]账单"], ["start_date", Mon, 25 Jun 2018], ["end_date", Mon, 24 Sep 2018], ["due_date", Tue, 15 May 2018], ["total", #<BigDecimal:7fdb26890f40,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:54:43 UTC], ["id", 20]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "3"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[36mLineitem Load (0.3ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "14"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "15"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "16"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "17"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "18"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "19"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "20"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb5b5012d78,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7fb5b27f2b40,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb5b197c638,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5b1974d20,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fb5b1974c30,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fb5b255e2d0,'0.9E3',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fb5b2525980,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fb5b25257f0,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fb5b2bb3928,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5b3101c40,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b3101b78,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5b2b81c20,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2b819f0,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 25 Nov 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fb5b2b6b178,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5b2b4a540,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2b4a4a0,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b2b43d08,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2b43c40,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-10-15]账单"], ["start_date", Sat, 26 Nov 2016], ["end_date", Wed, 25 Jan 2017], ["due_date", Sat, 15 Oct 2016], ["total", #<BigDecimal:7fb5b2467b88,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b23fcab8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b23fca18,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b2b134a0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2b13360,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-12-15]账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Mar 2017], ["due_date", Thu, 15 Dec 2016], ["total", #<BigDecimal:7fb5b23b79e0,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b236ce68,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b236cda0,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b2afaa68,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2afa9c8,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Thu, 25 May 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fb5b2ae84a8,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 6]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b22dcea8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b22dcd18,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b2295148,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2294f90,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-04-15]账单"], ["start_date", Fri, 26 May 2017], ["end_date", Tue, 25 Jul 2017], ["due_date", Sat, 15 Apr 2017], ["total", #<BigDecimal:7fb5b22550e8,'0.24E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 7]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b2a88580,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2a884b8,'0.12E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fb5b2a3bd48,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fb5b2a3bbe0,'0.3945E2',18(36)>], ["invoice_id", "8"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-06-15]账单"], ["start_date", Wed, 26 Jul 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Thu, 15 Jun 2017], ["total", #<BigDecimal:7fb5b29f26c0,'0.238356E4',18(27)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 8]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Sep 2015], ["end_date", Sat, 24 Oct 2015], ["unit", "月"], ["total", #<BigDecimal:7fb5b2951680,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2951568,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Oct 2015], ["end_date", Tue, 24 Nov 2015], ["unit", "月"], ["total", #<BigDecimal:7fb5b21cd210,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b21cd080,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Nov 2015], ["end_date", Thu, 24 Dec 2015], ["unit", "月"], ["total", #<BigDecimal:7fb5b2900d70,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2900ac8,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2015-08-15]账单"], ["start_date", Fri, 25 Sep 2015], ["end_date", Thu, 24 Dec 2015], ["due_date", Sat, 15 Aug 2015], ["total", #<BigDecimal:7fb5b2165278,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 9]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Dec 2015], ["end_date", Sun, 24 Jan 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5b19349f0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b1934680,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jan 2016], ["end_date", Wed, 24 Feb 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5b18e78f8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b18e7740,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Feb 2016], ["end_date", Thu, 24 Mar 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5b210e6f8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b210e068,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2015-11-15]账单"], ["start_date", Fri, 25 Dec 2015], ["end_date", Thu, 24 Mar 2016], ["due_date", Sun, 15 Nov 2015], ["total", #<BigDecimal:7fb5b20a5108,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 10]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Mar 2016], ["end_date", Sun, 24 Apr 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5b27568d0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2756830,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Apr 2016], ["end_date", Tue, 24 May 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5b5297288,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b52971e8,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 May 2016], ["end_date", Fri, 24 Jun 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5b517a238,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b517a198,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-02-15]账单"], ["start_date", Fri, 25 Mar 2016], ["end_date", Fri, 24 Jun 2016], ["due_date", Mon, 15 Feb 2016], ["total", #<BigDecimal:7fb5b55fe188,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 11]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Jun 2016], ["end_date", Sun, 24 Jul 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5b2f8bbb8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2f8bb18,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jul 2016], ["end_date", Wed, 24 Aug 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5b55b7350,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b55b7260,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5b559ce10,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b559cd48,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-05-15]账单"], ["start_date", Sat, 25 Jun 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Sun, 15 May 2016], ["total", #<BigDecimal:7fb5b5594bc0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 12]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5b55649e8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b5564920,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5b2f6b610,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2f6b570,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5b554ea30,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b554e940,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sat, 24 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fb5b2f53da8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b3160718,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b3160600,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b2f3a330,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2f3a290,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Feb 2017], ["end_date", Fri, 24 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b550e430,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b550e390,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-11-15]账单"], ["start_date", Sun, 25 Dec 2016], ["end_date", Fri, 24 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fb5b54ff930,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 14]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Mar 2017], ["end_date", Mon, 24 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b2f0b148,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2f0b0a8,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Apr 2017], ["end_date", Wed, 24 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b2f03a10,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2f03970,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 May 2017], ["end_date", Sat, 24 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b54bd828,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b54bd788,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-02-15]账单"], ["start_date", Sat, 25 Mar 2017], ["end_date", Sat, 24 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fb5b54aeb70,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 15]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Jun 2017], ["end_date", Mon, 24 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b547d548,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b547d4a8,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Jul 2017], ["end_date", Thu, 24 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b54564c0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b54563f8,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b543cd40,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b543cc28,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-05-15]账单"], ["start_date", Sun, 25 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fb5b542cf30,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 16]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Sep 2017], ["end_date", Tue, 24 Oct 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b19a62a8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b19a6190,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Oct 2017], ["end_date", Fri, 24 Nov 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b53ef130,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b53ef090,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Nov 2017], ["end_date", Sun, 24 Dec 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5b2ee29c8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2ee2928,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-08-15]账单"], ["start_date", Mon, 25 Sep 2017], ["end_date", Sun, 24 Dec 2017], ["due_date", Tue, 15 Aug 2017], ["total", #<BigDecimal:7fb5b2ed3428,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 17]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Dec 2017], ["end_date", Wed, 24 Jan 2018], ["unit", "月"], ["total", #<BigDecimal:7fb5b2eba248,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2eba1a8,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Jan 2018], ["end_date", Sat, 24 Feb 2018], ["unit", "月"], ["total", #<BigDecimal:7fb5b53ac678,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b53ac5b0,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Feb 2018], ["end_date", Sat, 24 Mar 2018], ["unit", "月"], ["total", #<BigDecimal:7fb5b538fd98,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b538fcf8,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-11-15]账单"], ["start_date", Mon, 25 Dec 2017], ["end_date", Sat, 24 Mar 2018], ["due_date", Wed, 15 Nov 2017], ["total", #<BigDecimal:7fb5b537ede0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 18]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Mar 2018], ["end_date", Tue, 24 Apr 2018], ["unit", "月"], ["total", #<BigDecimal:7fb5b5357240,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b53571a0,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Apr 2018], ["end_date", Thu, 24 May 2018], ["unit", "月"], ["total", #<BigDecimal:7fb5b2e88c98,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2e88ba8,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 May 2018], ["end_date", Sun, 24 Jun 2018], ["unit", "月"], ["total", #<BigDecimal:7fb5b5337aa8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b53379b8,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-02-15]账单"], ["start_date", Sun, 25 Mar 2018], ["end_date", Sun, 24 Jun 2018], ["due_date", Thu, 15 Feb 2018], ["total", #<BigDecimal:7fb5b532c2c0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 19]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jun 2018], ["end_date", Tue, 24 Jul 2018], ["unit", "月"], ["total", #<BigDecimal:7fb5b52f47f8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b52f4758,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jul 2018], ["end_date", Fri, 24 Aug 2018], ["unit", "月"], ["total", #<BigDecimal:7fb5b52e6a18,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b52e6978,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Aug 2018], ["end_date", Mon, 24 Sep 2018], ["unit", "月"], ["total", #<BigDecimal:7fb5b2e72240,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb5b2e721a0,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 16:57:31 UTC], ["updated_at", 2016-08-25 16:57:31 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-05-15]账单"], ["start_date", Mon, 25 Jun 2018], ["end_date", Mon, 24 Sep 2018], ["due_date", Tue, 15 May 2018], ["total", #<BigDecimal:7fb5b2e638d0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 16:57:31 UTC], ["id", 20]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "14"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "15"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "16"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "17"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "18"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "19"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "20"]]
  [1m[35m (9.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb8ea730dc0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7fb8ea738688,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb8ea954660,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb8ea94e008,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fb8ea94df68,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fb8ec09e5f0,'0.9E3',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fb8ea713838,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fb8ea713770,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fb8ea709068,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fb8ee61f018,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee61ef00,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fb8ee6050f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee605028,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 25 Nov 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fb8ee5f5ab0,'0.24E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fb8ee5c4c08,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee5c4b40,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ee5ac2e8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee5ac248,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-10-15]账单"], ["start_date", Sat, 26 Nov 2016], ["end_date", Wed, 25 Jan 2017], ["due_date", Sat, 15 Oct 2016], ["total", #<BigDecimal:7fb8ee5972f8,'0.24E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ea6b8c08,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ea6b8b68,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ea6a00e0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ea6a0018,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-12-15]账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Mar 2017], ["due_date", Thu, 15 Dec 2016], ["total", #<BigDecimal:7fb8ea690f00,'0.24E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ea6599b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ea659910,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ee57cd68,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee57ccc8,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Thu, 25 May 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fb8ee56cc38,'0.24E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ea648188,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ea648098,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ea62ae58,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ea62adb8,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-04-15]账单"], ["start_date", Fri, 26 May 2017], ["end_date", Tue, 25 Jul 2017], ["due_date", Sat, 15 Apr 2017], ["total", #<BigDecimal:7fb8ea620610,'0.24E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 7]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ee5343d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee534338,'0.12E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fb8ea5fb090,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fb8ea5faf50,'0.3945E2',18(36)>], ["invoice_id", "8"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-06-15]账单"], ["start_date", Wed, 26 Jul 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Thu, 15 Jun 2017], ["total", #<BigDecimal:7fb8ee517990,'0.238356E4',18(27)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 8]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Sep 2015], ["end_date", Sat, 24 Oct 2015], ["unit", "月"], ["total", #<BigDecimal:7fb8ee4e6868,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee4e67c8,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Oct 2015], ["end_date", Tue, 24 Nov 2015], ["unit", "月"], ["total", #<BigDecimal:7fb8ee4cdcf0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee4cdc50,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Nov 2015], ["end_date", Thu, 24 Dec 2015], ["unit", "月"], ["total", #<BigDecimal:7fb8ee4c43d0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee4c42e0,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2015-08-15]账单"], ["start_date", Fri, 25 Sep 2015], ["end_date", Thu, 24 Dec 2015], ["due_date", Sat, 15 Aug 2015], ["total", #<BigDecimal:7fb8ee4ade78,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 9]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Dec 2015], ["end_date", Sun, 24 Jan 2016], ["unit", "月"], ["total", #<BigDecimal:7fb8ee47fe88,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee47fde8,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jan 2016], ["end_date", Wed, 24 Feb 2016], ["unit", "月"], ["total", #<BigDecimal:7fb8ea5cad00,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ea5cac60,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Feb 2016], ["end_date", Thu, 24 Mar 2016], ["unit", "月"], ["total", #<BigDecimal:7fb8ee464d68,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee464c78,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2015-11-15]账单"], ["start_date", Fri, 25 Dec 2015], ["end_date", Thu, 24 Mar 2016], ["due_date", Sun, 15 Nov 2015], ["total", #<BigDecimal:7fb8ee456088,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 10]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Mar 2016], ["end_date", Sun, 24 Apr 2016], ["unit", "月"], ["total", #<BigDecimal:7fb8ee426ef0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee426e50,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Apr 2016], ["end_date", Tue, 24 May 2016], ["unit", "月"], ["total", #<BigDecimal:7fb8ee41e868,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee41e7c8,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 May 2016], ["end_date", Fri, 24 Jun 2016], ["unit", "月"], ["total", #<BigDecimal:7fb8ea5a23f0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ea5a2350,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-02-15]账单"], ["start_date", Fri, 25 Mar 2016], ["end_date", Fri, 24 Jun 2016], ["due_date", Mon, 15 Feb 2016], ["total", #<BigDecimal:7fb8ea593ad0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 11]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Jun 2016], ["end_date", Sun, 24 Jul 2016], ["unit", "月"], ["total", #<BigDecimal:7fb8ee40dce8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee40dc48,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jul 2016], ["end_date", Wed, 24 Aug 2016], ["unit", "月"], ["total", #<BigDecimal:7fb8ea562598,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ea5624f8,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb8ee3dc7d8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee3dc738,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-05-15]账单"], ["start_date", Sat, 25 Jun 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Sun, 15 May 2016], ["total", #<BigDecimal:7fb8ea559010,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 12]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fb8ee39fd10,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee39fc70,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fb8ee382148,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee37bf78,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fb8ee363450,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee3633b0,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sat, 24 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fb8ee358460,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ee3200b0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee320010,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ee308758,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee3086b8,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Feb 2017], ["end_date", Fri, 24 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ee2f02e8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee2f0248,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-11-15]账单"], ["start_date", Sun, 25 Dec 2016], ["end_date", Fri, 24 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fb8ea543710,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 14]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Mar 2017], ["end_date", Mon, 24 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ee2eb220,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee2eb180,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Apr 2017], ["end_date", Wed, 24 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ee2d2ae0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee2d2a40,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 May 2017], ["end_date", Sat, 24 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ea521ae8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ea521a48,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-02-15]账单"], ["start_date", Sat, 25 Mar 2017], ["end_date", Sat, 24 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fb8ee2b27e0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 15]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Jun 2017], ["end_date", Mon, 24 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ea508d18,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ea508c78,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Jul 2017], ["end_date", Thu, 24 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ee269ba8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee269a68,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ee2513f0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee251350,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-05-15]账单"], ["start_date", Sun, 25 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fb8ee2406b8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 16]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Sep 2017], ["end_date", Tue, 24 Oct 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ea4f0ee8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ea4f0d80,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Oct 2017], ["end_date", Fri, 24 Nov 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ea4e3ce8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ea4e3c48,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Nov 2017], ["end_date", Sun, 24 Dec 2017], ["unit", "月"], ["total", #<BigDecimal:7fb8ee1fb928,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee1fb888,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-08-15]账单"], ["start_date", Mon, 25 Sep 2017], ["end_date", Sun, 24 Dec 2017], ["due_date", Tue, 15 Aug 2017], ["total", #<BigDecimal:7fb8ee1f0a00,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 17]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.3ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Dec 2017], ["end_date", Wed, 24 Jan 2018], ["unit", "月"], ["total", #<BigDecimal:7fb8ee1c1a20,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee1bbf30,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Jan 2018], ["end_date", Sat, 24 Feb 2018], ["unit", "月"], ["total", #<BigDecimal:7fb8ee1a2e40,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee1a2da0,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Feb 2018], ["end_date", Sat, 24 Mar 2018], ["unit", "月"], ["total", #<BigDecimal:7fb8ee18b3a8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee18b2e0,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-11-15]账单"], ["start_date", Mon, 25 Dec 2017], ["end_date", Sat, 24 Mar 2018], ["due_date", Wed, 15 Nov 2017], ["total", #<BigDecimal:7fb8ee180a98,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 18]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Mar 2018], ["end_date", Tue, 24 Apr 2018], ["unit", "月"], ["total", #<BigDecimal:7fb8ea4d3140,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ea4d30a0,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Apr 2018], ["end_date", Thu, 24 May 2018], ["unit", "月"], ["total", #<BigDecimal:7fb8ea4c2de0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ea4c2cf0,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 May 2018], ["end_date", Sun, 24 Jun 2018], ["unit", "月"], ["total", #<BigDecimal:7fb8ee150fa0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee150f00,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-02-15]账单"], ["start_date", Sun, 25 Mar 2018], ["end_date", Sun, 24 Jun 2018], ["due_date", Thu, 15 Feb 2018], ["total", #<BigDecimal:7fb8ee141528,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 19]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jun 2018], ["end_date", Tue, 24 Jul 2018], ["unit", "月"], ["total", #<BigDecimal:7fb8ea48be58,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ea48bdb8,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jul 2018], ["end_date", Fri, 24 Aug 2018], ["unit", "月"], ["total", #<BigDecimal:7fb8ee128190,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee1280f0,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Aug 2018], ["end_date", Mon, 24 Sep 2018], ["unit", "月"], ["total", #<BigDecimal:7fb8ee11ab80,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fb8ee11aae0,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 17:04:58 UTC], ["updated_at", 2016-08-25 17:04:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-05-15]账单"], ["start_date", Mon, 25 Jun 2018], ["end_date", Mon, 24 Sep 2018], ["due_date", Tue, 15 May 2018], ["total", #<BigDecimal:7fb8ee10ba18,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:04:58 UTC], ["id", 20]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "14"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "15"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "16"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "17"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "18"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "19"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "20"]]
  [1m[35m (8.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fadd49504c8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 2], ["monthly_price", #<BigDecimal:7fadd85cae30,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["cycle", 3], ["monthly_price", #<BigDecimal:7fadd85d9e58,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fadd85c27d0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fadd85c2730,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fadd41dad88,'0.9E3',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fadd85a0248,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fadd85a01a8,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fadd8590e60,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fadd41d3308,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fadd41d3268,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fadd4f01278,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fadd4f011b0,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 25 Nov 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fadd4ef2430,'0.24E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fadd4ec16f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fadd4ec1650,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd4ea2d40,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fadd4ea2ca0,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-10-15]账单"], ["start_date", Sat, 26 Nov 2016], ["end_date", Wed, 25 Jan 2017], ["due_date", Sat, 15 Oct 2016], ["total", #<BigDecimal:7fadd41cb360,'0.24E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd4e89340,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fadd4e892a0,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd85606c0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fadd8560620,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-12-15]账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Mar 2017], ["due_date", Thu, 15 Dec 2016], ["total", #<BigDecimal:7fadd58a9488,'0.24E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd8549b78,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fadd8549ad8,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd4e63460,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fadd4e632d0,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Thu, 25 May 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fadd8523bd0,'0.24E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd4e2ab88,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fadd4e2aa98,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd4e12f38,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fadd4e12e98,'0.12E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-04-15]账单"], ["start_date", Fri, 26 May 2017], ["end_date", Tue, 25 Jul 2017], ["due_date", Sat, 15 Apr 2017], ["total", #<BigDecimal:7fadd4e08560,'0.24E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 7]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd4df8750,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fadd4df8688,'0.12E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fadd84f2d50,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fadd84f2cb0,'0.3945E2',18(36)>], ["invoice_id", "8"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-06-15]账单"], ["start_date", Wed, 26 Jul 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Thu, 15 Jun 2017], ["total", #<BigDecimal:7fadd4de35f8,'0.238356E4',18(27)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 8]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Sep 2015], ["end_date", Sat, 24 Oct 2015], ["unit", "月"], ["total", #<BigDecimal:7fadd84c24c0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd84c2420,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Oct 2015], ["end_date", Tue, 24 Nov 2015], ["unit", "月"], ["total", #<BigDecimal:7fadd84b94d8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd84b9438,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Nov 2015], ["end_date", Thu, 24 Dec 2015], ["unit", "月"], ["total", #<BigDecimal:7fadd849bfa0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd849bf00,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2015-08-15]账单"], ["start_date", Fri, 25 Sep 2015], ["end_date", Thu, 24 Dec 2015], ["due_date", Sat, 15 Aug 2015], ["total", #<BigDecimal:7fadd8491a78,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 9]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Dec 2015], ["end_date", Sun, 24 Jan 2016], ["unit", "月"], ["total", #<BigDecimal:7fadd4dbac48,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd4dbaba8,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jan 2016], ["end_date", Wed, 24 Feb 2016], ["unit", "月"], ["total", #<BigDecimal:7fadd8459ba0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd8459b00,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Feb 2016], ["end_date", Thu, 24 Mar 2016], ["unit", "月"], ["total", #<BigDecimal:7fadd844bf28,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd8443f30,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2015-11-15]账单"], ["start_date", Fri, 25 Dec 2015], ["end_date", Thu, 24 Mar 2016], ["due_date", Sun, 15 Nov 2015], ["total", #<BigDecimal:7fadd84394b8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 10]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Mar 2016], ["end_date", Sun, 24 Apr 2016], ["unit", "月"], ["total", #<BigDecimal:7fadd8422498,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd84223f8,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Apr 2016], ["end_date", Tue, 24 May 2016], ["unit", "月"], ["total", #<BigDecimal:7fadd4da1c70,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd4da1ba8,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 May 2016], ["end_date", Fri, 24 Jun 2016], ["unit", "月"], ["total", #<BigDecimal:7fadd84096f0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd8409650,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-02-15]账单"], ["start_date", Fri, 25 Mar 2016], ["end_date", Fri, 24 Jun 2016], ["due_date", Mon, 15 Feb 2016], ["total", #<BigDecimal:7fadd8401ec8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 11]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Jun 2016], ["end_date", Sun, 24 Jul 2016], ["unit", "月"], ["total", #<BigDecimal:7fadd83e20f0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd83e2050,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jul 2016], ["end_date", Wed, 24 Aug 2016], ["unit", "月"], ["total", #<BigDecimal:7fadd5879558,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd58794b8,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fadd83b03c0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd83b02a8,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-05-15]账单"], ["start_date", Sat, 25 Jun 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Sun, 15 May 2016], ["total", #<BigDecimal:7fadd83a8710,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 12]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fadd8398ea0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd839ba10,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fadd838b7a0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd838b700,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fadd8372318,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd8372278,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sat, 24 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fadd8362ff8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 13]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd4d47b08,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd4d47a68,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd8328e48,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd832ba80,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Feb 2017], ["end_date", Fri, 24 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd4d37280,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd4d371e0,'0.11E4',9(18)>], ["invoice_id", "14"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2016-11-15]账单"], ["start_date", Sun, 25 Dec 2016], ["end_date", Fri, 24 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fadd4d26de0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 14]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Mar 2017], ["end_date", Mon, 24 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd82fae30,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd82fad90,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Apr 2017], ["end_date", Wed, 24 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd4d05500,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd4d05460,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 May 2017], ["end_date", Sat, 24 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd82e9860,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd82e97c0,'0.11E4',9(18)>], ["invoice_id", "15"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-02-15]账单"], ["start_date", Sat, 25 Mar 2017], ["end_date", Sat, 24 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fadd4151a88,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 15]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Jun 2017], ["end_date", Mon, 24 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd82bb7a8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd82bb708,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Jul 2017], ["end_date", Thu, 24 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd82aa8b8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd82aa7f0,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd8290b20,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd8290a58,'0.11E4',9(18)>], ["invoice_id", "16"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-05-15]账单"], ["start_date", Sun, 25 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fadd5861d40,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 16]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Sep 2017], ["end_date", Tue, 24 Oct 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd8261ac8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd8261a28,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Oct 2017], ["end_date", Fri, 24 Nov 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd4ccce80,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd4cccde0,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Nov 2017], ["end_date", Sun, 24 Dec 2017], ["unit", "月"], ["total", #<BigDecimal:7fadd4cc4d20,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd4cc4c80,'0.11E4',9(18)>], ["invoice_id", "17"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-08-15]账单"], ["start_date", Mon, 25 Sep 2017], ["end_date", Sun, 24 Dec 2017], ["due_date", Tue, 15 Aug 2017], ["total", #<BigDecimal:7fadd82398c0,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 17]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Dec 2017], ["end_date", Wed, 24 Jan 2018], ["unit", "月"], ["total", #<BigDecimal:7fadd82092b0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd8209210,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Jan 2018], ["end_date", Sat, 24 Feb 2018], ["unit", "月"], ["total", #<BigDecimal:7fadd81f83e8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd81f8348,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Feb 2018], ["end_date", Sat, 24 Mar 2018], ["unit", "月"], ["total", #<BigDecimal:7fadd81e8858,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd81e87b8,'0.11E4',9(18)>], ["invoice_id", "18"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2017-11-15]账单"], ["start_date", Mon, 25 Dec 2017], ["end_date", Sat, 24 Mar 2018], ["due_date", Wed, 15 Nov 2017], ["total", #<BigDecimal:7fadd81d9b28,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 18]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Mar 2018], ["end_date", Tue, 24 Apr 2018], ["unit", "月"], ["total", #<BigDecimal:7fadd81b8630,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd81b8590,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Apr 2018], ["end_date", Thu, 24 May 2018], ["unit", "月"], ["total", #<BigDecimal:7fadd819b080,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd819afe0,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 May 2018], ["end_date", Sun, 24 Jun 2018], ["unit", "月"], ["total", #<BigDecimal:7fadd8181748,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd8181630,'0.11E4',9(18)>], ["invoice_id", "19"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-02-15]账单"], ["start_date", Sun, 25 Mar 2018], ["end_date", Sun, 24 Jun 2018], ["due_date", Thu, 15 Feb 2018], ["total", #<BigDecimal:7fadd8171cf8,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 19]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "3"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jun 2018], ["end_date", Tue, 24 Jul 2018], ["unit", "月"], ["total", #<BigDecimal:7fadd81405e0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd8140540,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jul 2018], ["end_date", Fri, 24 Aug 2018], ["unit", "月"], ["total", #<BigDecimal:7fadd8130618,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd8130578,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Aug 2018], ["end_date", Mon, 24 Sep 2018], ["unit", "月"], ["total", #<BigDecimal:7fadd8113428,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fadd8113360,'0.11E4',9(18)>], ["invoice_id", "20"], ["created_at", 2016-08-25 17:07:58 UTC], ["updated_at", 2016-08-25 17:07:58 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[常住奖励] 的#[2018-05-15]账单"], ["start_date", Mon, 25 Jun 2018], ["end_date", Mon, 24 Sep 2018], ["due_date", Tue, 15 May 2018], ["total", #<BigDecimal:7fadd8108028,'0.33E4',9(18)>], ["updated_at", 2016-08-25 17:07:58 UTC], ["id", 20]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.4ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "14"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "15"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "16"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "17"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "18"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "19"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "20"]]
  [1m[35m (8.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 24 Sep 2017], ["created_at", 2016-08-25 17:09:20 UTC], ["updated_at", 2016-08-25 17:09:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (3.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa166160058,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 17:09:20 UTC], ["updated_at", 2016-08-25 17:09:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 24 Sep 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa166148840,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 17:09:20 UTC], ["updated_at", 2016-08-25 17:09:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 17:09:20 UTC], ["updated_at", 2016-08-25 17:09:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa1636f1790,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fa1636f1650,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-08-25 17:09:20 UTC], ["updated_at", 2016-08-25 17:09:20 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fa1636d9640,'0.9E3',9(18)>], ["updated_at", 2016-08-25 17:09:20 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 17:09:20 UTC], ["updated_at", 2016-08-25 17:09:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fa1636c2c38,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fa1636c2b98,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-08-25 17:09:20 UTC], ["updated_at", 2016-08-25 17:09:20 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fa1636b1550,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 17:09:20 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:09:20 UTC], ["updated_at", 2016-08-25 17:09:20 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fa16366af88,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa16366aec0,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 17:09:20 UTC], ["updated_at", 2016-08-25 17:09:20 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fa1636495b8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa1636494f0,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 17:09:20 UTC], ["updated_at", 2016-08-25 17:09:20 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fa16362b3b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa16362b270,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 17:09:20 UTC], ["updated_at", 2016-08-25 17:09:20 UTC], ["desc", "足月"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fa163613da0,'0.36E4',9(18)>], ["updated_at", 2016-08-25 17:09:20 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:09:20 UTC], ["updated_at", 2016-08-25 17:09:20 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fa163bcb338,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa163bcb298,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 17:09:20 UTC], ["updated_at", 2016-08-25 17:09:20 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fa163bc3e08,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa163bc3d40,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 17:09:21 UTC], ["updated_at", 2016-08-25 17:09:21 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Feb 2017], ["end_date", Sat, 25 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fa1635c85d0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa1635c8508,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-08-25 17:09:21 UTC], ["updated_at", 2016-08-25 17:09:21 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Mar 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fa16359ab08,'0.36E4',9(18)>], ["updated_at", 2016-08-25 17:09:21 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:09:21 UTC], ["updated_at", 2016-08-25 17:09:21 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 26 Mar 2017], ["end_date", Tue, 25 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fa163550df0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa163552fb0,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 17:09:21 UTC], ["updated_at", 2016-08-25 17:09:21 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Apr 2017], ["end_date", Thu, 25 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fa163b412c8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa163b41048,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 17:09:21 UTC], ["updated_at", 2016-08-25 17:09:21 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 26 May 2017], ["end_date", Sun, 25 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fa163521050,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa163520f38,'0.12E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-08-25 17:09:21 UTC], ["updated_at", 2016-08-25 17:09:21 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-02-15]账单"], ["start_date", Sun, 26 Mar 2017], ["end_date", Sun, 25 Jun 2017], ["due_date", Wed, 15 Feb 2017], ["total", #<BigDecimal:7fa163502380,'0.36E4',9(18)>], ["updated_at", 2016-08-25 17:09:21 UTC], ["id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:09:21 UTC], ["updated_at", 2016-08-25 17:09:21 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Jun 2017], ["end_date", Tue, 25 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fa16501d4f8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa16501d2f0,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 17:09:21 UTC], ["updated_at", 2016-08-25 17:09:21 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Jul 2017], ["end_date", Fri, 25 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fa163b0a610,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa163b0a520,'0.12E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-08-25 17:09:21 UTC], ["updated_at", 2016-08-25 17:09:21 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "天"], ["total", #<BigDecimal:7fa163442210,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fa163442058,'0.3945E2',18(36)>], ["invoice_id", "6"], ["created_at", 2016-08-25 17:09:21 UTC], ["updated_at", 2016-08-25 17:09:21 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2017-05-15]账单"], ["start_date", Mon, 26 Jun 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Mon, 15 May 2017], ["total", #<BigDecimal:7fa163ac9688,'0.358356E4',18(27)>], ["updated_at", 2016-08-25 17:09:21 UTC], ["id", 6]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-08-25 17:09:38 UTC], ["updated_at", 2016-08-25 17:09:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f90adb59150,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 17:09:38 UTC], ["updated_at", 2016-08-25 17:09:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f90aa1614c0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 17:09:38 UTC], ["updated_at", 2016-08-25 17:09:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 17:09:38 UTC], ["updated_at", 2016-08-25 17:09:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f90adb81240,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f90adb811a0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-08-25 17:09:38 UTC], ["updated_at", 2016-08-25 17:09:38 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f90ae0b1b48,'0.9E3',9(18)>], ["updated_at", 2016-08-25 17:09:38 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 17:09:38 UTC], ["updated_at", 2016-08-25 17:09:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f90ae0a3b38,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f90ae0a3a70,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-08-25 17:09:38 UTC], ["updated_at", 2016-08-25 17:09:38 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f90ae098878,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 17:09:38 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:09:38 UTC], ["updated_at", 2016-08-25 17:09:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f90ae08b3d0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f90ae08b330,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 17:09:38 UTC], ["updated_at", 2016-08-25 17:09:38 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f90adb22330,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f90adb22290,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 17:09:38 UTC], ["updated_at", 2016-08-25 17:09:38 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f90ae0789b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f90ae0788e8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 17:09:38 UTC], ["updated_at", 2016-08-25 17:09:38 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f90a9ac0d50,'0.36E4',9(18)>], ["updated_at", 2016-08-25 17:09:38 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:09:38 UTC], ["updated_at", 2016-08-25 17:09:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7f90a9a8bf10,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f90a9a8be20,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 17:09:38 UTC], ["updated_at", 2016-08-25 17:09:38 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f90a9a80e30,'0.118356E4',18(27)>], ["updated_at", 2016-08-25 17:09:38 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-08-25 17:10:33 UTC], ["updated_at", 2016-08-25 17:10:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ff3aaff0a00,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 17:10:33 UTC], ["updated_at", 2016-08-25 17:10:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff3aafe0240,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-08-25 17:10:33 UTC], ["updated_at", 2016-08-25 17:10:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 17:10:33 UTC], ["updated_at", 2016-08-25 17:10:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ff3aad9bc00,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7ff3aad9ab20,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-08-25 17:10:33 UTC], ["updated_at", 2016-08-25 17:10:33 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7ff3aa561620,'0.9E3',9(18)>], ["updated_at", 2016-08-25 17:10:33 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-08-25 17:10:33 UTC], ["updated_at", 2016-08-25 17:10:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (2.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7ff3aa539a58,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7ff3aa539968,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-08-25 17:10:33 UTC], ["updated_at", 2016-08-25 17:10:33 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7ff3ab083508,'0.2959E2',18(27)>], ["updated_at", 2016-08-25 17:10:33 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:10:33 UTC], ["updated_at", 2016-08-25 17:10:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7ff3aa5091c8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff3aa5090d8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 17:10:33 UTC], ["updated_at", 2016-08-25 17:10:33 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7ff3aacf11b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff3aacf10e8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 17:10:33 UTC], ["updated_at", 2016-08-25 17:10:33 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7ff3aa4f96b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff3aa4f95e8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-08-25 17:10:33 UTC], ["updated_at", 2016-08-25 17:10:33 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7ff3aa4f2108,'0.36E4',9(18)>], ["updated_at", 2016-08-25 17:10:33 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-08-25 17:10:33 UTC], ["updated_at", 2016-08-25 17:10:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7ff3aac92908,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7ff3aac92818,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-08-25 17:10:33 UTC], ["updated_at", 2016-08-25 17:10:33 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7ff3aac7ba00,'0.118356E4',18(27)>], ["updated_at", 2016-08-25 17:10:33 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-01 05:38:38 UTC], ["updated_at", 2016-09-01 05:38:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd74363eb20,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-01 05:38:38 UTC], ["updated_at", 2016-09-01 05:38:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd74362c060,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-01 05:38:38 UTC], ["updated_at", 2016-09-01 05:38:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-01 05:38:38 UTC], ["updated_at", 2016-09-01 05:38:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd7433c0b78,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd7433c0ad8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-01 05:38:38 UTC], ["updated_at", 2016-09-01 05:38:38 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fd744077560,'0.9E3',9(18)>], ["updated_at", 2016-09-01 05:38:38 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-01 05:38:38 UTC], ["updated_at", 2016-09-01 05:38:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fd743da8a00,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fd743da8938,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-01 05:38:38 UTC], ["updated_at", 2016-09-01 05:38:38 UTC], ["desc", "不足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd743d926b0,'0.2959E2',18(27)>], ["updated_at", 2016-09-01 05:38:38 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-01 05:38:38 UTC], ["updated_at", 2016-09-01 05:38:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fd743d418f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd743d41850,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-01 05:38:38 UTC], ["updated_at", 2016-09-01 05:38:38 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fd744914df8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd744914d08,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-01 05:38:38 UTC], ["updated_at", 2016-09-01 05:38:38 UTC], ["desc", "足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fd743d1b1f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd743d1b150,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-01 05:38:38 UTC], ["updated_at", 2016-09-01 05:38:38 UTC], ["desc", "足月"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fd743552ab8,'0.36E4',9(18)>], ["updated_at", 2016-09-01 05:38:38 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-01 05:38:38 UTC], ["updated_at", 2016-09-01 05:38:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at", "desc") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fd7435385f0,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fd7435384d8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-01 05:38:38 UTC], ["updated_at", 2016-09-01 05:38:38 UTC], ["desc", "不足月"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fd743521788,'0.118356E4',18(27)>], ["updated_at", 2016-09-01 05:38:38 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 09:38:14 UTC], ["updated_at", 2016-09-02 09:38:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ff3d469e0e0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 09:38:14 UTC], ["updated_at", 2016-09-02 09:38:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff3d3d9b510,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 09:38:14 UTC], ["updated_at", 2016-09-02 09:38:14 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 09:41:27 UTC], ["updated_at", 2016-09-02 09:41:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd72a64b0c8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 09:41:27 UTC], ["updated_at", 2016-09-02 09:41:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd72b7185e0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 09:41:27 UTC], ["updated_at", 2016-09-02 09:41:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 09:41:52 UTC], ["updated_at", 2016-09-02 09:41:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f9f359c9150,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 09:41:52 UTC], ["updated_at", 2016-09-02 09:41:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f9f354cdef8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 09:41:52 UTC], ["updated_at", 2016-09-02 09:41:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 09:47:40 UTC], ["updated_at", 2016-09-02 09:47:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fdf9aaa18c0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 09:47:40 UTC], ["updated_at", 2016-09-02 09:47:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fdf9a75d290,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 09:47:40 UTC], ["updated_at", 2016-09-02 09:47:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 09:48:05 UTC], ["updated_at", 2016-09-02 09:48:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa2cb7ba028,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 09:48:05 UTC], ["updated_at", 2016-09-02 09:48:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa2cb7ab230,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 09:48:05 UTC], ["updated_at", 2016-09-02 09:48:05 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 09:50:20 UTC], ["updated_at", 2016-09-02 09:50:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8748f06f78,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 09:50:20 UTC], ["updated_at", 2016-09-02 09:50:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8748ef4490,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 09:50:20 UTC], ["updated_at", 2016-09-02 09:50:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 09:50:35 UTC], ["updated_at", 2016-09-02 09:50:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fbba68025a0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 09:50:35 UTC], ["updated_at", 2016-09-02 09:50:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fbba3cc7bb0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 09:50:35 UTC], ["updated_at", 2016-09-02 09:50:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 09:50:35 UTC], ["updated_at", 2016-09-02 09:50:35 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 09:51:43 UTC], ["updated_at", 2016-09-02 09:51:43 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8762605658,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 09:51:43 UTC], ["updated_at", 2016-09-02 09:51:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f87625edd28,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 09:51:43 UTC], ["updated_at", 2016-09-02 09:51:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 09:51:43 UTC], ["updated_at", 2016-09-02 09:51:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f8763e11710,'0.0',9(18)>], ["updated_at", 2016-09-02 09:51:43 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 09:51:43 UTC], ["updated_at", 2016-09-02 09:51:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f8763df2338,'0.0',9(18)>], ["updated_at", 2016-09-02 09:51:43 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 09:51:43 UTC], ["updated_at", 2016-09-02 09:51:43 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f8763de9558,'0.0',9(18)>], ["updated_at", 2016-09-02 09:51:43 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 09:51:43 UTC], ["updated_at", 2016-09-02 09:51:43 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f8763dc9d98,'0.0',9(18)>], ["updated_at", 2016-09-02 09:51:43 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.4ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 11:51:37 UTC], ["updated_at", 2016-09-02 11:51:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (3.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fad5cc2dce0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 11:51:37 UTC], ["updated_at", 2016-09-02 11:51:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fad5f1e1ea0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 11:51:37 UTC], ["updated_at", 2016-09-02 11:51:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 11:51:37 UTC], ["updated_at", 2016-09-02 11:51:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fad5f0cbf70,'0.0',9(18)>], ["updated_at", 2016-09-02 11:51:37 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 11:51:37 UTC], ["updated_at", 2016-09-02 11:51:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fad5cbbca18,'0.0',9(18)>], ["updated_at", 2016-09-02 11:51:37 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 11:51:37 UTC], ["updated_at", 2016-09-02 11:51:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fad5f0839f0,'0.0',9(18)>], ["updated_at", 2016-09-02 11:51:37 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 11:51:37 UTC], ["updated_at", 2016-09-02 11:51:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fad5cbb42a0,'0.0',9(18)>], ["updated_at", 2016-09-02 11:51:37 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.5ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 11:51:57 UTC], ["updated_at", 2016-09-02 11:51:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fadd2628e50,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 11:51:57 UTC], ["updated_at", 2016-09-02 11:51:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fadd2611660,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 11:51:57 UTC], ["updated_at", 2016-09-02 11:51:57 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 11:51:57 UTC], ["updated_at", 2016-09-02 11:51:57 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fadd58abcd8,'0.0',9(18)>], ["updated_at", 2016-09-02 11:52:33 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 11:52:33 UTC], ["updated_at", 2016-09-02 11:52:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fadd5831550,'0.0',9(18)>], ["updated_at", 2016-09-02 11:52:35 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 11:52:35 UTC], ["updated_at", 2016-09-02 11:52:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fadd1af7bf8,'0.0',9(18)>], ["updated_at", 2016-09-02 11:52:37 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 11:52:37 UTC], ["updated_at", 2016-09-02 11:52:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 11:55:59 UTC], ["updated_at", 2016-09-02 11:55:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fbdfe709f18,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 11:55:59 UTC], ["updated_at", 2016-09-02 11:55:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fbdfd190790,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 11:55:59 UTC], ["updated_at", 2016-09-02 11:55:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.3ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 11:55:59 UTC], ["updated_at", 2016-09-02 11:55:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fbdfe29d560,'0.0',9(18)>], ["updated_at", 2016-09-02 11:56:00 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 11:56:00 UTC], ["updated_at", 2016-09-02 11:56:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fbdfe23fa50,'0.0',9(18)>], ["updated_at", 2016-09-02 11:56:01 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 11:56:01 UTC], ["updated_at", 2016-09-02 11:56:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fbdfc3d3350,'0.0',9(18)>], ["updated_at", 2016-09-02 11:56:02 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 11:56:02 UTC], ["updated_at", 2016-09-02 11:56:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fbdfe1c6b50,'0.0',9(18)>], ["updated_at", 2016-09-02 11:56:04 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.4ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 11:56:21 UTC], ["updated_at", 2016-09-02 11:56:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f88bc5bd1b8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 11:56:21 UTC], ["updated_at", 2016-09-02 11:56:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f88bcfba558,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 11:56:21 UTC], ["updated_at", 2016-09-02 11:56:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 11:56:21 UTC], ["updated_at", 2016-09-02 11:56:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.6ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 12:00:32 UTC], ["updated_at", 2016-09-02 12:00:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f824c2312b8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:00:32 UTC], ["updated_at", 2016-09-02 12:00:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f824c2212a0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:00:32 UTC], ["updated_at", 2016-09-02 12:00:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:00:32 UTC], ["updated_at", 2016-09-02 12:00:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f824bb083b0,'0.0',9(18)>], ["updated_at", 2016-09-02 12:00:32 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:00:32 UTC], ["updated_at", 2016-09-02 12:00:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f824d8d8bb0,'0.0',9(18)>], ["updated_at", 2016-09-02 12:00:32 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:00:32 UTC], ["updated_at", 2016-09-02 12:00:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f824d8b3d88,'0.0',9(18)>], ["updated_at", 2016-09-02 12:00:32 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:00:32 UTC], ["updated_at", 2016-09-02 12:00:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f824a8e9260,'0.0',9(18)>], ["updated_at", 2016-09-02 12:00:32 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.7ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 12:01:21 UTC], ["updated_at", 2016-09-02 12:01:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f95458daf90,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:01:21 UTC], ["updated_at", 2016-09-02 12:01:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f95458c3318,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:01:21 UTC], ["updated_at", 2016-09-02 12:01:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 12:05:20 UTC], ["updated_at", 2016-09-02 12:05:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (3.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd58c93bd18,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:05:20 UTC], ["updated_at", 2016-09-02 12:05:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd58c928920,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:05:20 UTC], ["updated_at", 2016-09-02 12:05:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:05:20 UTC], ["updated_at", 2016-09-02 12:05:20 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 12:06:15 UTC], ["updated_at", 2016-09-02 12:06:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f817592a330,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:06:15 UTC], ["updated_at", 2016-09-02 12:06:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8175912758,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:06:15 UTC], ["updated_at", 2016-09-02 12:06:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 12:06:31 UTC], ["updated_at", 2016-09-02 12:06:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8ed16e5138,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:06:31 UTC], ["updated_at", 2016-09-02 12:06:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8ed2efd6a8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:06:31 UTC], ["updated_at", 2016-09-02 12:06:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:06:31 UTC], ["updated_at", 2016-09-02 12:06:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 12:09:09 UTC], ["updated_at", 2016-09-02 12:09:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8fcf08b9a0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:09:09 UTC], ["updated_at", 2016-09-02 12:09:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8fcf078ee0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:09:09 UTC], ["updated_at", 2016-09-02 12:09:09 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:09:09 UTC], ["updated_at", 2016-09-02 12:09:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 12:15:54 UTC], ["updated_at", 2016-09-02 12:15:54 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (3.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc9ac098990,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:15:54 UTC], ["updated_at", 2016-09-02 12:15:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc9a9699ba8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:15:54 UTC], ["updated_at", 2016-09-02 12:15:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:15:54 UTC], ["updated_at", 2016-09-02 12:15:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fc9a9a61038,'0.91726E3',18(36)>], ["unit_price", #<BigDecimal:7fc9a9a60f98,'0.2959E2',18(36)>], ["invoice_id", "1"], ["created_at", 2016-09-02 12:15:54 UTC], ["updated_at", 2016-09-02 12:15:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fc9a9639fc8,'0.0',9(18)>], ["updated_at", 2016-09-02 12:15:54 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:15:54 UTC], ["updated_at", 2016-09-02 12:15:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fc9a9e62678,'0.0',9(18)>], ["updated_at", 2016-09-02 12:15:54 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:15:54 UTC], ["updated_at", 2016-09-02 12:15:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Wed, 26 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fc9a9e090a0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc9a9e08fd8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:15:54 UTC], ["updated_at", 2016-09-02 12:15:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Sat, 26 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fc9a9deb2f8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc9a9deb230,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:15:54 UTC], ["updated_at", 2016-09-02 12:15:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "天"], ["total", #<BigDecimal:7fc9a9dcbe58,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fc9a9dc92c0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:15:54 UTC], ["updated_at", 2016-09-02 12:15:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fc9a95fa6e8,'0.0',9(18)>], ["updated_at", 2016-09-02 12:15:54 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:15:54 UTC], ["updated_at", 2016-09-02 12:15:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fc9a9d785c8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fc9a9d784d8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 12:15:54 UTC], ["updated_at", 2016-09-02 12:15:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fc9a9d5a618,'0.0',9(18)>], ["updated_at", 2016-09-02 12:15:54 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 12:21:09 UTC], ["updated_at", 2016-09-02 12:21:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fee727456b8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:21:09 UTC], ["updated_at", 2016-09-02 12:21:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fee7172ae40,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:21:09 UTC], ["updated_at", 2016-09-02 12:21:09 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:21:09 UTC], ["updated_at", 2016-09-02 12:21:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fee7221dbb8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fee7221db18,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 12:21:09 UTC], ["updated_at", 2016-09-02 12:21:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fee71599900,'0.0',9(18)>], ["updated_at", 2016-09-02 12:21:09 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:21:09 UTC], ["updated_at", 2016-09-02 12:21:09 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fee725e57f0,'0.0',9(18)>], ["updated_at", 2016-09-02 12:21:09 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:21:09 UTC], ["updated_at", 2016-09-02 12:21:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Wed, 26 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fee7258ef18,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fee7258ee78,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:21:09 UTC], ["updated_at", 2016-09-02 12:21:09 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Sat, 26 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fee7255ef20,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fee7255ee58,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:21:09 UTC], ["updated_at", 2016-09-02 12:21:09 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Mon, 26 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fee7253e680,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fee7253e518,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:21:09 UTC], ["updated_at", 2016-09-02 12:21:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fee7252d088,'0.0',9(18)>], ["updated_at", 2016-09-02 12:21:09 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:21:09 UTC], ["updated_at", 2016-09-02 12:21:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fee724de410,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fee724de168,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 12:21:09 UTC], ["updated_at", 2016-09-02 12:21:09 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fee724cf0a0,'0.0',9(18)>], ["updated_at", 2016-09-02 12:21:09 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 12:21:47 UTC], ["updated_at", 2016-09-02 12:21:47 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fda62673c90,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:21:47 UTC], ["updated_at", 2016-09-02 12:21:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fda65028db0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:21:47 UTC], ["updated_at", 2016-09-02 12:21:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:21:47 UTC], ["updated_at", 2016-09-02 12:21:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fda62393318,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fda62393278,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 12:21:47 UTC], ["updated_at", 2016-09-02 12:21:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fda62e40068,'0.0',9(18)>], ["updated_at", 2016-09-02 12:21:47 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:21:47 UTC], ["updated_at", 2016-09-02 12:21:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fda62e08410,'0.0',9(18)>], ["updated_at", 2016-09-02 12:21:47 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:21:47 UTC], ["updated_at", 2016-09-02 12:21:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fda62dd0088,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fda62dcbfb0,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:21:47 UTC], ["updated_at", 2016-09-02 12:21:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fda62db2308,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fda62db1f20,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:21:47 UTC], ["updated_at", 2016-09-02 12:21:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fda62d916a8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fda62d915b8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:21:47 UTC], ["updated_at", 2016-09-02 12:21:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fda625a33b0,'0.0',9(18)>], ["updated_at", 2016-09-02 12:21:47 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:21:47 UTC], ["updated_at", 2016-09-02 12:21:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fda625608d0,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fda625607e0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 12:21:47 UTC], ["updated_at", 2016-09-02 12:21:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fda625437f8,'0.0',9(18)>], ["updated_at", 2016-09-02 12:21:47 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 12:24:28 UTC], ["updated_at", 2016-09-02 12:24:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7feb76509100,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:24:28 UTC], ["updated_at", 2016-09-02 12:24:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7feb764ea0e8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:24:28 UTC], ["updated_at", 2016-09-02 12:24:28 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.5ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:24:28 UTC], ["updated_at", 2016-09-02 12:24:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7feb76343af0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7feb76343a50,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 12:24:28 UTC], ["updated_at", 2016-09-02 12:24:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7feb76319ae8,'0.0',9(18)>], ["updated_at", 2016-09-02 12:24:28 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:24:28 UTC], ["updated_at", 2016-09-02 12:24:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7feb762eb7b0,'0.0',9(18)>], ["updated_at", 2016-09-02 12:24:28 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:24:28 UTC], ["updated_at", 2016-09-02 12:24:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7feb76273f30,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7feb76273e90,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:24:28 UTC], ["updated_at", 2016-09-02 12:24:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7feb7624b3f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7feb7624b328,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:24:28 UTC], ["updated_at", 2016-09-02 12:24:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 24 Nov 2016], ["end_date", Fri, 23 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7feb76220f60,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7feb76220dd0,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:24:28 UTC], ["updated_at", 2016-09-02 12:24:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 23 Dec 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "天"], ["total", #<BigDecimal:7feb749bc0f0,'0.11836E3',18(36)>], ["unit_price", #<BigDecimal:7feb749bc168,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:24:28 UTC], ["updated_at", 2016-09-02 12:24:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7feb761f9168,'0.0',9(18)>], ["updated_at", 2016-09-02 12:24:28 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:24:28 UTC], ["updated_at", 2016-09-02 12:24:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7feb76190e60,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7feb76190d20,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 12:24:28 UTC], ["updated_at", 2016-09-02 12:24:28 UTC]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7feb7617b308,'0.0',9(18)>], ["updated_at", 2016-09-02 12:24:28 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 24 Jan 2017], ["created_at", 2016-09-02 12:25:29 UTC], ["updated_at", 2016-09-02 12:25:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ffe0f801aa0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:25:29 UTC], ["updated_at", 2016-09-02 12:25:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ffe0e7deba0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:25:29 UTC], ["updated_at", 2016-09-02 12:25:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:25:29 UTC], ["updated_at", 2016-09-02 12:25:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ffe0c753a98,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7ffe0c7539d0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 12:25:29 UTC], ["updated_at", 2016-09-02 12:25:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7ffe0c743008,'0.0',9(18)>], ["updated_at", 2016-09-02 12:25:29 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:25:29 UTC], ["updated_at", 2016-09-02 12:25:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7ffe0c713b78,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7ffe0c713ad8,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 12:25:29 UTC], ["updated_at", 2016-09-02 12:25:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7ffe0c41b380,'0.0',9(18)>], ["updated_at", 2016-09-02 12:25:29 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:25:29 UTC], ["updated_at", 2016-09-02 12:25:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7ffe0e58ed50,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffe0e58ec38,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:25:29 UTC], ["updated_at", 2016-09-02 12:25:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7ffe0c6d8c08,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffe0c6d8a78,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:25:29 UTC], ["updated_at", 2016-09-02 12:25:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7ffe0e556c48,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffe0e556b58,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:25:29 UTC], ["updated_at", 2016-09-02 12:25:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7ffe0e544d90,'0.0',9(18)>], ["updated_at", 2016-09-02 12:25:29 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:25:29 UTC], ["updated_at", 2016-09-02 12:25:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7ffe0e4df238,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7ffe0e4df148,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 12:25:29 UTC], ["updated_at", 2016-09-02 12:25:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7ffe0e4ce578,'0.0',9(18)>], ["updated_at", 2016-09-02 12:25:29 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 25 Feb 2017], ["created_at", 2016-09-02 12:27:47 UTC], ["updated_at", 2016-09-02 12:27:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (3.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fcc514de458,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:27:47 UTC], ["updated_at", 2016-09-02 12:27:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sat, 25 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fcc51fe7908,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:27:47 UTC], ["updated_at", 2016-09-02 12:27:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:27:47 UTC], ["updated_at", 2016-09-02 12:27:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fcc511ce470,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fcc511ce3a8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 12:27:47 UTC], ["updated_at", 2016-09-02 12:27:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fcc51ed8530,'0.0',9(18)>], ["updated_at", 2016-09-02 12:27:47 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:27:47 UTC], ["updated_at", 2016-09-02 12:27:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fcc51e80060,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fcc51e80da8,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 12:27:47 UTC], ["updated_at", 2016-09-02 12:27:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fcc51e704f8,'0.0',9(18)>], ["updated_at", 2016-09-02 12:27:47 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:27:47 UTC], ["updated_at", 2016-09-02 12:27:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fcc51e1b840,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcc51e1b7a0,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:27:47 UTC], ["updated_at", 2016-09-02 12:27:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fcc51df2710,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcc51df2620,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:27:47 UTC], ["updated_at", 2016-09-02 12:27:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fcc51dc94a0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcc51dc93b0,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:27:47 UTC], ["updated_at", 2016-09-02 12:27:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fcc51db8010,'0.0',9(18)>], ["updated_at", 2016-09-02 12:27:47 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:27:47 UTC], ["updated_at", 2016-09-02 12:27:47 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fcc509fb400,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcc509fb338,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-09-02 12:27:47 UTC], ["updated_at", 2016-09-02 12:27:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Sat, 25 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fcc51d7a468,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcc51d7a2d8,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-09-02 12:27:47 UTC], ["updated_at", 2016-09-02 12:27:47 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Sat, 25 Feb 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fcc513a46c8,'0.0',9(18)>], ["updated_at", 2016-09-02 12:27:47 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 12:28:01 UTC], ["updated_at", 2016-09-02 12:28:01 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f82d349e140,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:28:01 UTC], ["updated_at", 2016-09-02 12:28:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f82d3486608,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:28:01 UTC], ["updated_at", 2016-09-02 12:28:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:28:01 UTC], ["updated_at", 2016-09-02 12:28:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f82d33d6bb8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f82d33d6b18,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 12:28:01 UTC], ["updated_at", 2016-09-02 12:28:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f82d33c7cd0,'0.0',9(18)>], ["updated_at", 2016-09-02 12:28:01 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:28:01 UTC], ["updated_at", 2016-09-02 12:28:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f82d33a5c98,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f82d33a5a68,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 12:28:01 UTC], ["updated_at", 2016-09-02 12:28:01 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f82d3384610,'0.0',9(18)>], ["updated_at", 2016-09-02 12:28:01 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:28:01 UTC], ["updated_at", 2016-09-02 12:28:01 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f82d330c9f8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f82d330c638,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:28:01 UTC], ["updated_at", 2016-09-02 12:28:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f82d32edee0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f82d32edda0,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:28:01 UTC], ["updated_at", 2016-09-02 12:28:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f82d32c4450,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f82d32c43b0,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:28:01 UTC], ["updated_at", 2016-09-02 12:28:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7f82d46f2f08,'0.0',9(18)>], ["updated_at", 2016-09-02 12:28:01 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:28:01 UTC], ["updated_at", 2016-09-02 12:28:01 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f82d46a0b90,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f82d46a1f68,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-09-02 12:28:01 UTC], ["updated_at", 2016-09-02 12:28:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7f82d32ad480,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f82d32ad3e0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 12:28:01 UTC], ["updated_at", 2016-09-02 12:28:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Fri, 24 Feb 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7f82d3295fd8,'0.0',9(18)>], ["updated_at", 2016-09-02 12:28:01 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 12:29:49 UTC], ["updated_at", 2016-09-02 12:29:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fe83598db70,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:29:49 UTC], ["updated_at", 2016-09-02 12:29:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe834712f68,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 12:29:49 UTC], ["updated_at", 2016-09-02 12:29:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:29:49 UTC], ["updated_at", 2016-09-02 12:29:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (1.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe835379568,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fe8353794c8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 12:29:49 UTC], ["updated_at", 2016-09-02 12:29:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-07-15]账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fe835569468,'0.0',9(18)>], ["updated_at", 2016-09-02 12:29:49 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "1"], ["created_at", 2016-09-02 12:29:49 UTC], ["updated_at", 2016-09-02 12:29:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fe835895858,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fe835895740,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 12:29:49 UTC], ["updated_at", 2016-09-02 12:29:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[试用期] 的#[2016-08-15]账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fe835541288,'0.0',9(18)>], ["updated_at", 2016-09-02 12:29:49 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:29:49 UTC], ["updated_at", 2016-09-02 12:29:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fe8338b2ec8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe8338b2c48,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:29:49 UTC], ["updated_at", 2016-09-02 12:29:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fe8345fe438,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe8345fe280,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:29:49 UTC], ["updated_at", 2016-09-02 12:29:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fe8345e5280,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe8345e5190,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 12:29:49 UTC], ["updated_at", 2016-09-02 12:29:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-08-15]账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["total", #<BigDecimal:7fe8345cf408,'0.0',9(18)>], ["updated_at", 2016-09-02 12:29:49 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRentPhase Load (0.0ms)[0m  [1m[34mSELECT  "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("rent_phase_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["rent_phase_id", "2"], ["created_at", 2016-09-02 12:29:49 UTC], ["updated_at", 2016-09-02 12:29:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fe835491c48,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe835491b30,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-09-02 12:29:49 UTC], ["updated_at", 2016-09-02 12:29:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fe83546a940,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fe83546a738,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 12:29:49 UTC], ["updated_at", 2016-09-02 12:29:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "title" = ?, "start_date" = ?, "end_date" = ?, "due_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["title", "合同:[A Testing Contract] => 周期:[正式入住] 的#[2016-11-15]账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Fri, 24 Feb 2017], ["due_date", Tue, 15 Nov 2016], ["total", #<BigDecimal:7fe835432108,'0.0',9(18)>], ["updated_at", 2016-09-02 12:29:49 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."rent_phase_id" = ?[0m  [["rent_phase_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 14:08:00 UTC], ["updated_at", 2016-09-02 14:08:00 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fe7a1f4c460,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 14:08:00 UTC], ["updated_at", 2016-09-02 14:08:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe7a1f2db00,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 14:08:00 UTC], ["updated_at", 2016-09-02 14:08:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.4ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 15:25:51 UTC], ["updated_at", 2016-09-02 15:25:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8747983c50,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:25:51 UTC], ["updated_at", 2016-09-02 15:25:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8745121f28,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:25:51 UTC], ["updated_at", 2016-09-02 15:25:51 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 15:27:13 UTC], ["updated_at", 2016-09-02 15:27:13 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa544913b88,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:27:13 UTC], ["updated_at", 2016-09-02 15:27:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa544921bc0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:27:13 UTC], ["updated_at", 2016-09-02 15:27:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 15:28:29 UTC], ["updated_at", 2016-09-02 15:28:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc6bc9cf768,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:28:29 UTC], ["updated_at", 2016-09-02 15:28:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc6b89ea878,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:28:29 UTC], ["updated_at", 2016-09-02 15:28:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (8.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 15:31:35 UTC], ["updated_at", 2016-09-02 15:31:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fc2f6818998,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:31:35 UTC], ["updated_at", 2016-09-02 15:31:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc2f6833568,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:31:35 UTC], ["updated_at", 2016-09-02 15:31:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 15:32:30 UTC], ["updated_at", 2016-09-02 15:32:30 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.4ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb7673cc4d8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:32:30 UTC], ["updated_at", 2016-09-02 15:32:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb76798aca8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:32:30 UTC], ["updated_at", 2016-09-02 15:32:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 15:34:05 UTC], ["updated_at", 2016-09-02 15:34:05 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f7fe5271de0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:34:05 UTC], ["updated_at", 2016-09-02 15:34:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f7fe19e1200,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:34:05 UTC], ["updated_at", 2016-09-02 15:34:05 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:34:05 UTC], ["updated_at", 2016-09-02 15:34:05 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 15:35:07 UTC], ["updated_at", 2016-09-02 15:35:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7ff6f5c4d508,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:35:08 UTC], ["updated_at", 2016-09-02 15:35:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff6f5c67818,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:35:08 UTC], ["updated_at", 2016-09-02 15:35:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:35:08 UTC], ["updated_at", 2016-09-02 15:35:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ff6f5b96678,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7ff6f5b965d8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 15:35:08 UTC], ["updated_at", 2016-09-02 15:35:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:35:08 UTC], ["updated_at", 2016-09-02 15:35:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7ff6f5b6d250,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7ff6f5b6d1b0,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 15:35:08 UTC], ["updated_at", 2016-09-02 15:35:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:35:08 UTC], ["updated_at", 2016-09-02 15:35:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7ff6f5b370d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff6f5b37038,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 15:35:08 UTC], ["updated_at", 2016-09-02 15:35:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7ff6f3881bd8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff6f3881b38,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 15:35:08 UTC], ["updated_at", 2016-09-02 15:35:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7ff6f5b17b48,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff6f5b179b8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 15:35:08 UTC], ["updated_at", 2016-09-02 15:35:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-11-15账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Fri, 24 Feb 2017], ["due_date", Tue, 15 Nov 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:35:08 UTC], ["updated_at", 2016-09-02 15:35:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7ff6f5adcc00,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff6f5adcb60,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-09-02 15:35:08 UTC], ["updated_at", 2016-09-02 15:35:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7ff6f5abcb30,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7ff6f5abca90,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 15:35:08 UTC], ["updated_at", 2016-09-02 15:35:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 15:37:07 UTC], ["updated_at", 2016-09-02 15:37:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fe70dd6f000,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:37:07 UTC], ["updated_at", 2016-09-02 15:37:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe70dd7cfc0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:37:07 UTC], ["updated_at", 2016-09-02 15:37:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:37:07 UTC], ["updated_at", 2016-09-02 15:37:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe709f415d0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fe709f41530,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 15:37:07 UTC], ["updated_at", 2016-09-02 15:37:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:37:07 UTC], ["updated_at", 2016-09-02 15:37:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fe70a12ed48,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fe70a12eca8,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 15:37:07 UTC], ["updated_at", 2016-09-02 15:37:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:37:07 UTC], ["updated_at", 2016-09-02 15:37:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fe709f11510,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe709f11470,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 15:37:07 UTC], ["updated_at", 2016-09-02 15:37:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fe70dc66e10,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe70dc66d70,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 15:37:07 UTC], ["updated_at", 2016-09-02 15:37:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fe70dc4eab8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe70dc4ea18,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 15:37:07 UTC], ["updated_at", 2016-09-02 15:37:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-11-15账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Fri, 24 Feb 2017], ["due_date", Tue, 15 Nov 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:37:07 UTC], ["updated_at", 2016-09-02 15:37:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fe70dc36b48,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe70dc36aa8,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-09-02 15:37:07 UTC], ["updated_at", 2016-09-02 15:37:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fe70dc1e7c8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fe70dc1e6d8,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 15:37:07 UTC], ["updated_at", 2016-09-02 15:37:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fa36ea325f0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa36e3c45d8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["cycle", 4], ["monthly_price", #<BigDecimal:7fa36a218b20,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa36e2aedb0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fa36e2aed10,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fa36e950358,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fa36e9502b8,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fa36e92a630,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e92a590,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fa36e912378,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e9122d8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fa36e25d370,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e25d2d0,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-11-15账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Fri, 24 Feb 2017], ["due_date", Tue, 15 Nov 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fa36e235708,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e235668,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fa36e217e10,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fa36e217d70,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2015-08-15账单"], ["start_date", Fri, 25 Sep 2015], ["end_date", Sun, 24 Jan 2016], ["due_date", Sat, 15 Aug 2015], ["contract_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Sep 2015], ["end_date", Sat, 24 Oct 2015], ["unit", "月"], ["total", #<BigDecimal:7fa36e1dea48,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e1de9a8,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Oct 2015], ["end_date", Tue, 24 Nov 2015], ["unit", "月"], ["total", #<BigDecimal:7fa36e1c4ad0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e1c4a30,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Nov 2015], ["end_date", Thu, 24 Dec 2015], ["unit", "月"], ["total", #<BigDecimal:7fa36e8e3898,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e8e37f8,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Dec 2015], ["end_date", Sun, 24 Jan 2016], ["unit", "月"], ["total", #<BigDecimal:7fa36e195e10,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e195d70,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2015-12-15账单"], ["start_date", Mon, 25 Jan 2016], ["end_date", Tue, 24 May 2016], ["due_date", Tue, 15 Dec 2015], ["contract_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jan 2016], ["end_date", Wed, 24 Feb 2016], ["unit", "月"], ["total", #<BigDecimal:7fa36e16fcd8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e16fc38,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Feb 2016], ["end_date", Thu, 24 Mar 2016], ["unit", "月"], ["total", #<BigDecimal:7fa36b0fefe0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36b0feea0,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Mar 2016], ["end_date", Sun, 24 Apr 2016], ["unit", "月"], ["total", #<BigDecimal:7fa36a944f70,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36a944ed0,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Apr 2016], ["end_date", Tue, 24 May 2016], ["unit", "月"], ["total", #<BigDecimal:7fa36e154fa0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e154eb0,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-04-15账单"], ["start_date", Wed, 25 May 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Apr 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 May 2016], ["end_date", Fri, 24 Jun 2016], ["unit", "月"], ["total", #<BigDecimal:7fa36e12dec8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e12de00,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Jun 2016], ["end_date", Sun, 24 Jul 2016], ["unit", "月"], ["total", #<BigDecimal:7fa36e114c48,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e114b30,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jul 2016], ["end_date", Wed, 24 Aug 2016], ["unit", "月"], ["total", #<BigDecimal:7fa36e8bb370,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e8bb2d0,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa36b0f73d0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36b0f7330,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fa36b0df730,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36b0df690,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fa36e88a7e8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e88a720,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fa36e0fce68,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e0fcdc8,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fa36e0de0d0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e0ddfb8,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 24 May 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fa36e0ab900,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e0ab810,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Feb 2017], ["end_date", Fri, 24 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fa36e0913c0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e091320,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Mar 2017], ["end_date", Mon, 24 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fa36e86b848,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e86b7a8,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Apr 2017], ["end_date", Wed, 24 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fa36e852578,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e8524d8,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2017-04-15账单"], ["start_date", Thu, 25 May 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Sat, 15 Apr 2017], ["contract_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 May 2017], ["end_date", Sat, 24 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fa36e07bbd8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e07bb38,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Jun 2017], ["end_date", Mon, 24 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fa36e063790,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e0636f0,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Jul 2017], ["end_date", Thu, 24 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fa36e819340,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e819250,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "月"], ["total", #<BigDecimal:7fa36e803db0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e803d10,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2017-08-15账单"], ["start_date", Mon, 25 Sep 2017], ["end_date", Wed, 24 Jan 2018], ["due_date", Tue, 15 Aug 2017], ["contract_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Sep 2017], ["end_date", Tue, 24 Oct 2017], ["unit", "月"], ["total", #<BigDecimal:7fa36e050730,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e050668,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Oct 2017], ["end_date", Fri, 24 Nov 2017], ["unit", "月"], ["total", #<BigDecimal:7fa36a7bfa10,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36a7bf970,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Nov 2017], ["end_date", Sun, 24 Dec 2017], ["unit", "月"], ["total", #<BigDecimal:7fa36a7ae8c8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36a7ae828,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Dec 2017], ["end_date", Wed, 24 Jan 2018], ["unit", "月"], ["total", #<BigDecimal:7fa36a794720,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36a794680,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2017-12-15账单"], ["start_date", Thu, 25 Jan 2018], ["end_date", Thu, 24 May 2018], ["due_date", Fri, 15 Dec 2017], ["contract_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Jan 2018], ["end_date", Sat, 24 Feb 2018], ["unit", "月"], ["total", #<BigDecimal:7fa36e020c10,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e020b70,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Feb 2018], ["end_date", Sat, 24 Mar 2018], ["unit", "月"], ["total", #<BigDecimal:7fa36e009998,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e0098f8,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Mar 2018], ["end_date", Tue, 24 Apr 2018], ["unit", "月"], ["total", #<BigDecimal:7fa36e000078,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36e0025a8,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Apr 2018], ["end_date", Thu, 24 May 2018], ["unit", "月"], ["total", #<BigDecimal:7fa36c7ea560,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36c7ea3f8,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2018-04-15账单"], ["start_date", Fri, 25 May 2018], ["end_date", Mon, 24 Sep 2018], ["due_date", Sun, 15 Apr 2018], ["contract_id", "1"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 May 2018], ["end_date", Sun, 24 Jun 2018], ["unit", "月"], ["total", #<BigDecimal:7fa36a74c768,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36a74c6a0,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jun 2018], ["end_date", Tue, 24 Jul 2018], ["unit", "月"], ["total", #<BigDecimal:7fa36a73cfc0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36a73cf20,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jul 2018], ["end_date", Fri, 24 Aug 2018], ["unit", "月"], ["total", #<BigDecimal:7fa36a72f118,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36a72f078,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Aug 2018], ["end_date", Mon, 24 Sep 2018], ["unit", "月"], ["total", #<BigDecimal:7fa36a7167d0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fa36a716730,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 15:38:48 UTC], ["updated_at", 2016-09-02 15:38:48 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[35m (9.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f9c2af046f0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f9c2af1f2e8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["cycle", 4], ["monthly_price", #<BigDecimal:7f9c2e4cde08,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f9c2e3ed2b8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f9c2e3ed218,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f9c2aeb7558,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f9c2aeb74b8,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f9c2b201128,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2b201010,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f9c2b1ea568,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2b1e3f38,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f9c2b1c95e8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2b1c9548,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-11-15账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Fri, 24 Feb 2017], ["due_date", Tue, 15 Nov 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f9c2e3cec28,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2e3ceb88,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7f9c2e3aed60,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f9c2e3aecc0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2015-08-15账单"], ["start_date", Fri, 25 Sep 2015], ["end_date", Sun, 24 Jan 2016], ["due_date", Sat, 15 Aug 2015], ["contract_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Sep 2015], ["end_date", Sat, 24 Oct 2015], ["unit", "月"], ["total", #<BigDecimal:7f9c2ae85968,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2ae858c8,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Oct 2015], ["end_date", Tue, 24 Nov 2015], ["unit", "月"], ["total", #<BigDecimal:7f9c2e365ac0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2e365a20,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Nov 2015], ["end_date", Thu, 24 Dec 2015], ["unit", "月"], ["total", #<BigDecimal:7f9c2e354a90,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2e3549f0,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Dec 2015], ["end_date", Sun, 24 Jan 2016], ["unit", "月"], ["total", #<BigDecimal:7f9c2e336e00,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2e336d60,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2015-12-15账单"], ["start_date", Mon, 25 Jan 2016], ["end_date", Tue, 24 May 2016], ["due_date", Tue, 15 Dec 2015], ["contract_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jan 2016], ["end_date", Wed, 24 Feb 2016], ["unit", "月"], ["total", #<BigDecimal:7f9c2ae66c20,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2ae66b80,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Feb 2016], ["end_date", Thu, 24 Mar 2016], ["unit", "月"], ["total", #<BigDecimal:7f9c2ae55cb8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2ae55c18,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Mar 2016], ["end_date", Sun, 24 Apr 2016], ["unit", "月"], ["total", #<BigDecimal:7f9c2ae4ccf8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2ae4cc58,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Apr 2016], ["end_date", Tue, 24 May 2016], ["unit", "月"], ["total", #<BigDecimal:7f9c2ae46ba0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2ae46b00,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-04-15账单"], ["start_date", Wed, 25 May 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Apr 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 May 2016], ["end_date", Fri, 24 Jun 2016], ["unit", "月"], ["total", #<BigDecimal:7f9c2b99cec8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2b99ce28,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Jun 2016], ["end_date", Sun, 24 Jul 2016], ["unit", "月"], ["total", #<BigDecimal:7f9c2e307718,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2e307678,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jul 2016], ["end_date", Wed, 24 Aug 2016], ["unit", "月"], ["total", #<BigDecimal:7f9c2ae35a08,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2ae35918,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f9c2ae1c0a8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2ae1c008,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f9c2ae058f8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2ae05858,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f9c2e2d4ac0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2e2d4a20,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f9c2b9879d8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2b9878c0,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f9c2adf6100,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2adf6060,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 24 May 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7f9c2b966468,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2b9663c8,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Feb 2017], ["end_date", Fri, 24 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7f9c2adee3d8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2adee338,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Mar 2017], ["end_date", Mon, 24 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7f9c2addc430,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2addc390,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Apr 2017], ["end_date", Wed, 24 May 2017], ["unit", "月"], ["total", #<BigDecimal:7f9c2adce678,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2adce5d8,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2017-04-15账单"], ["start_date", Thu, 25 May 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Sat, 15 Apr 2017], ["contract_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 May 2017], ["end_date", Sat, 24 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7f9c2ada5818,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2ada5778,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Jun 2017], ["end_date", Mon, 24 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7f9c2e281848,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2e281780,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Jul 2017], ["end_date", Thu, 24 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7f9c2e2639d8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2e263938,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "月"], ["total", #<BigDecimal:7f9c2e252d40,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2e252ca0,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2017-08-15账单"], ["start_date", Mon, 25 Sep 2017], ["end_date", Wed, 24 Jan 2018], ["due_date", Tue, 15 Aug 2017], ["contract_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Sep 2017], ["end_date", Tue, 24 Oct 2017], ["unit", "月"], ["total", #<BigDecimal:7f9c2e22a4d0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2e22a368,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Oct 2017], ["end_date", Fri, 24 Nov 2017], ["unit", "月"], ["total", #<BigDecimal:7f9c2ad8f9f0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2ad8f950,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Nov 2017], ["end_date", Sun, 24 Dec 2017], ["unit", "月"], ["total", #<BigDecimal:7f9c2ad77918,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2ad77850,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Dec 2017], ["end_date", Wed, 24 Jan 2018], ["unit", "月"], ["total", #<BigDecimal:7f9c2ad5e558,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2ad5e3f0,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2017-12-15账单"], ["start_date", Thu, 25 Jan 2018], ["end_date", Thu, 24 May 2018], ["due_date", Fri, 15 Dec 2017], ["contract_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Jan 2018], ["end_date", Sat, 24 Feb 2018], ["unit", "月"], ["total", #<BigDecimal:7f9c2b180f00,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2b180e60,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Feb 2018], ["end_date", Sat, 24 Mar 2018], ["unit", "月"], ["total", #<BigDecimal:7f9c2e203bc8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2e203b28,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Mar 2018], ["end_date", Tue, 24 Apr 2018], ["unit", "月"], ["total", #<BigDecimal:7f9c2e1f2b20,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2e1f2a08,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Apr 2018], ["end_date", Thu, 24 May 2018], ["unit", "月"], ["total", #<BigDecimal:7f9c2b179750,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2b1796b0,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2018-04-15账单"], ["start_date", Fri, 25 May 2018], ["end_date", Mon, 24 Sep 2018], ["due_date", Sun, 15 Apr 2018], ["contract_id", "1"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 May 2018], ["end_date", Sun, 24 Jun 2018], ["unit", "月"], ["total", #<BigDecimal:7f9c2ad14bd8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2ad14b38,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jun 2018], ["end_date", Tue, 24 Jul 2018], ["unit", "月"], ["total", #<BigDecimal:7f9c2e1d85e0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2e1d8540,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jul 2018], ["end_date", Fri, 24 Aug 2018], ["unit", "月"], ["total", #<BigDecimal:7f9c2e1b9640,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2e1b95a0,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Aug 2018], ["end_date", Mon, 24 Sep 2018], ["unit", "月"], ["total", #<BigDecimal:7f9c2ad07a28,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7f9c2ad07988,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 15:40:02 UTC], ["updated_at", 2016-09-02 15:40:02 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[35m (9.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-09-02 15:55:07 UTC], ["updated_at", 2016-09-02 15:55:07 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fb65cab8280,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:55:07 UTC], ["updated_at", 2016-09-02 15:55:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb65caa09f0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:55:07 UTC], ["updated_at", 2016-09-02 15:55:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["cycle", 4], ["monthly_price", #<BigDecimal:7fb65ca88b20,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:55:07 UTC], ["updated_at", 2016-09-02 15:55:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:55:07 UTC], ["updated_at", 2016-09-02 15:55:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb65ab16828,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fb65ab16788,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 15:55:07 UTC], ["updated_at", 2016-09-02 15:55:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-09-02 15:58:12 UTC], ["updated_at", 2016-09-02 15:58:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fdb4c39ff60,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:58:12 UTC], ["updated_at", 2016-09-02 15:58:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fdb4ea70248,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:58:12 UTC], ["updated_at", 2016-09-02 15:58:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["cycle", 4], ["monthly_price", #<BigDecimal:7fdb4ea58058,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:58:12 UTC], ["updated_at", 2016-09-02 15:58:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:58:12 UTC], ["updated_at", 2016-09-02 15:58:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fdb4e86b498,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fdb4e86b3f8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 15:58:12 UTC], ["updated_at", 2016-09-02 15:58:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fd8f4229938,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd8f4210e38,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["cycle", 4], ["monthly_price", #<BigDecimal:7fd8f41f9da0,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8f40625c8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd8f4062528,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fd8f4022ae0,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fd8f40229c8,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8f17e21c0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f17e20d0,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8f17b1868,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f17b17c8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8f17902f8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f1790258,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-11-15账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Fri, 24 Feb 2017], ["due_date", Tue, 15 Nov 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fd8f1c006d0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f1c03150,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fd8f173ad58,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fd8f173ac90,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2015-08-15账单"], ["start_date", Fri, 25 Sep 2015], ["end_date", Sun, 24 Jan 2016], ["due_date", Sat, 15 Aug 2015], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Sep 2015], ["end_date", Sat, 24 Oct 2015], ["unit", "月"], ["total", #<BigDecimal:7fd8f16a1590,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f16a1478,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Oct 2015], ["end_date", Tue, 24 Nov 2015], ["unit", "月"], ["total", #<BigDecimal:7fd8f1672600,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f1672510,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Nov 2015], ["end_date", Thu, 24 Dec 2015], ["unit", "月"], ["total", #<BigDecimal:7fd8f1641438,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f16412f8,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Dec 2015], ["end_date", Sun, 24 Jan 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8f15f10a0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f15f0fd8,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2015-12-15账单"], ["start_date", Mon, 25 Jan 2016], ["end_date", Tue, 24 May 2016], ["due_date", Tue, 15 Dec 2015], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jan 2016], ["end_date", Wed, 24 Feb 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8f1bb8f88,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f1bb8ee8,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Feb 2016], ["end_date", Thu, 24 Mar 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8f159a2a0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f159a1d8,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Mar 2016], ["end_date", Sun, 24 Apr 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8f1559688,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f15593e0,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Apr 2016], ["end_date", Tue, 24 May 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8f1519d58,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f1519bf0,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-04-15账单"], ["start_date", Wed, 25 May 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Apr 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 May 2016], ["end_date", Fri, 24 Jun 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8f14d1d28,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f14d1aa8,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Jun 2016], ["end_date", Sun, 24 Jul 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8f149a670,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f149a5a8,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jul 2016], ["end_date", Wed, 24 Aug 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8f1469ca0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f14699f8,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8f143a310,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f143a220,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8f141a650,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f141a560,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8f13ea248,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f13ea180,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fd8f13901f8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f13900e0,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fd8f1300d28,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f1300c60,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 24 May 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fd8f1afac40,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f1afa790,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Feb 2017], ["end_date", Fri, 24 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fd8f1a62008,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f1a61f40,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Mar 2017], ["end_date", Mon, 24 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fd8f19f9738,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f19f87e8,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Apr 2017], ["end_date", Wed, 24 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fd8f1243430,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f1243200,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2017-04-15账单"], ["start_date", Thu, 25 May 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Sat, 15 Apr 2017], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 May 2017], ["end_date", Sat, 24 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fd8f199b5e8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f199aa30,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Jun 2017], ["end_date", Mon, 24 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fd8f280ea58,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f280e8c8,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Jul 2017], ["end_date", Thu, 24 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fd8f1816e70,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f1816ad8,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "月"], ["total", #<BigDecimal:7fd8f1046628,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f1046448,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2017-08-15账单"], ["start_date", Mon, 25 Sep 2017], ["end_date", Wed, 24 Jan 2018], ["due_date", Tue, 15 Aug 2017], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Sep 2017], ["end_date", Tue, 24 Oct 2017], ["unit", "月"], ["total", #<BigDecimal:7fd8f477eb68,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f477eac8,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Oct 2017], ["end_date", Fri, 24 Nov 2017], ["unit", "月"], ["total", #<BigDecimal:7fd8f20ac120,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f20ac058,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Nov 2017], ["end_date", Sun, 24 Dec 2017], ["unit", "月"], ["total", #<BigDecimal:7fd8f28f4378,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f28f4288,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Dec 2017], ["end_date", Wed, 24 Jan 2018], ["unit", "月"], ["total", #<BigDecimal:7fd8f47643a8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f4764308,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2017-12-15账单"], ["start_date", Thu, 25 Jan 2018], ["end_date", Thu, 24 May 2018], ["due_date", Fri, 15 Dec 2017], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Jan 2018], ["end_date", Sat, 24 Feb 2018], ["unit", "月"], ["total", #<BigDecimal:7fd8f4744fa8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f4744f08,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Feb 2018], ["end_date", Sat, 24 Mar 2018], ["unit", "月"], ["total", #<BigDecimal:7fd8f471e970,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f471e8a8,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Mar 2018], ["end_date", Tue, 24 Apr 2018], ["unit", "月"], ["total", #<BigDecimal:7fd8f4706230,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f4706190,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Apr 2018], ["end_date", Thu, 24 May 2018], ["unit", "月"], ["total", #<BigDecimal:7fd8f46e6250,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f46e61b0,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2018-04-15账单"], ["start_date", Fri, 25 May 2018], ["end_date", Mon, 24 Sep 2018], ["due_date", Sun, 15 Apr 2018], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 May 2018], ["end_date", Sun, 24 Jun 2018], ["unit", "月"], ["total", #<BigDecimal:7fd8f46a6970,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f46a6880,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jun 2018], ["end_date", Tue, 24 Jul 2018], ["unit", "月"], ["total", #<BigDecimal:7fd8f469c448,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f4697f38,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jul 2018], ["end_date", Fri, 24 Aug 2018], ["unit", "月"], ["total", #<BigDecimal:7fd8f4676270,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f4676108,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Aug 2018], ["end_date", Mon, 24 Sep 2018], ["unit", "月"], ["total", #<BigDecimal:7fd8f1ead428,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fd8f1ead360,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 15:59:15 UTC], ["updated_at", 2016-09-02 15:59:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[35m (8.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-09-02 15:59:52 UTC], ["updated_at", 2016-09-02 15:59:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fecaa445ae0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:52 UTC], ["updated_at", 2016-09-02 15:59:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fecaa42de90,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:52 UTC], ["updated_at", 2016-09-02 15:59:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["cycle", 4], ["monthly_price", #<BigDecimal:7fecad1faf58,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:52 UTC], ["updated_at", 2016-09-02 15:59:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 15:59:52 UTC], ["updated_at", 2016-09-02 15:59:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fecac06a388,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fecac06a2e8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 15:59:52 UTC], ["updated_at", 2016-09-02 15:59:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems"[0m
  [1m[36mLineitem Load (0.3ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM(900.0) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:24 UTC], ["updated_at", 2016-09-02 16:01:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fecad5f47d0,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fecad5f4708,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:01:24 UTC], ["updated_at", 2016-09-02 16:01:24 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:25 UTC], ["updated_at", 2016-09-02 16:01:25 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fecad56dcd0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fecad56dc30,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:01:25 UTC], ["updated_at", 2016-09-02 16:01:25 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fecad5367f8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fecad536668,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:01:25 UTC], ["updated_at", 2016-09-02 16:01:25 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fecad4cfc38,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fecad4cfb98,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:01:26 UTC], ["updated_at", 2016-09-02 16:01:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-11-15账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Fri, 24 Feb 2017], ["due_date", Tue, 15 Nov 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:35 UTC], ["updated_at", 2016-09-02 16:01:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fecad48cd70,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fecad48ccd0,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-09-02 16:01:35 UTC], ["updated_at", 2016-09-02 16:01:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fecad466f08,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fecad466e68,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 16:01:37 UTC], ["updated_at", 2016-09-02 16:01:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2015-08-15账单"], ["start_date", Fri, 25 Sep 2015], ["end_date", Sun, 24 Jan 2016], ["due_date", Sat, 15 Aug 2015], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:38 UTC], ["updated_at", 2016-09-02 16:01:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Sep 2015], ["end_date", Sat, 24 Oct 2015], ["unit", "月"], ["total", #<BigDecimal:7fecaa4ac808,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fecaa4ac768,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 16:01:38 UTC], ["updated_at", 2016-09-02 16:01:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Oct 2015], ["end_date", Tue, 24 Nov 2015], ["unit", "月"], ["total", #<BigDecimal:7fecad38e428,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fecad38e388,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 16:01:39 UTC], ["updated_at", 2016-09-02 16:01:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Nov 2015], ["end_date", Thu, 24 Dec 2015], ["unit", "月"], ["total", #<BigDecimal:7fecad31e538,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fecad31e470,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 16:01:40 UTC], ["updated_at", 2016-09-02 16:01:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Dec 2015], ["end_date", Sun, 24 Jan 2016], ["unit", "月"], ["total", #<BigDecimal:7fecad2c3c78,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fecad2c3bd8,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 16:01:41 UTC], ["updated_at", 2016-09-02 16:01:41 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7fbfd71698a8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fbfd3911c08,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["cycle", 4], ["monthly_price", #<BigDecimal:7fbfd589ceb0,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fbfd4f5ead8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fbfd4f5e9c0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fbfd4f06158,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fbfd4f06090,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fbfd4eb59b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd4eb57a8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fbfd441b1a8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd441b108,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fbfd4e759a0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd4e758b0,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-11-15账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Fri, 24 Feb 2017], ["due_date", Tue, 15 Nov 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fbfd4e0f010,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd4e0ede0,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fbfd4dd67d8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fbfd4dd6738,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2015-08-15账单"], ["start_date", Fri, 25 Sep 2015], ["end_date", Sun, 24 Jan 2016], ["due_date", Sat, 15 Aug 2015], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Sep 2015], ["end_date", Sat, 24 Oct 2015], ["unit", "月"], ["total", #<BigDecimal:7fbfd43f05e8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd43f0520,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Oct 2015], ["end_date", Tue, 24 Nov 2015], ["unit", "月"], ["total", #<BigDecimal:7fbfd4d5d798,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd4d5d6a8,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Nov 2015], ["end_date", Thu, 24 Dec 2015], ["unit", "月"], ["total", #<BigDecimal:7fbfd4d3c660,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd4d3c520,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Dec 2015], ["end_date", Sun, 24 Jan 2016], ["unit", "月"], ["total", #<BigDecimal:7fbfd43c2738,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd43c2698,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2015-12-15账单"], ["start_date", Mon, 25 Jan 2016], ["end_date", Tue, 24 May 2016], ["due_date", Tue, 15 Dec 2015], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jan 2016], ["end_date", Wed, 24 Feb 2016], ["unit", "月"], ["total", #<BigDecimal:7fbfd43a0ac0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd43a09a8,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Feb 2016], ["end_date", Thu, 24 Mar 2016], ["unit", "月"], ["total", #<BigDecimal:7fbfd4ccd170,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd4ccd080,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Mar 2016], ["end_date", Sun, 24 Apr 2016], ["unit", "月"], ["total", #<BigDecimal:7fbfd4c86748,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd4c86680,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Apr 2016], ["end_date", Tue, 24 May 2016], ["unit", "月"], ["total", #<BigDecimal:7fbfd4c66df8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd4c66c68,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-04-15账单"], ["start_date", Wed, 25 May 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Apr 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 May 2016], ["end_date", Fri, 24 Jun 2016], ["unit", "月"], ["total", #<BigDecimal:7fbfd4c1d388,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd4c1d298,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Jun 2016], ["end_date", Sun, 24 Jul 2016], ["unit", "月"], ["total", #<BigDecimal:7fbfd4bfd830,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd4bfd790,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jul 2016], ["end_date", Wed, 24 Aug 2016], ["unit", "月"], ["total", #<BigDecimal:7fbfd4bce800,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd4bce620,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fbfd4b9db10,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd4b9da70,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fbfd4352730,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd4352618,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fbfd4b36cf8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd4b36a50,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fbfd58551a0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd5855088,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fbfd42e0478,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd42e2408,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 24 May 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7fbfd4238818,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd42385e8,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Feb 2017], ["end_date", Fri, 24 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7fbfd41cb128,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd41caf48,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Mar 2017], ["end_date", Mon, 24 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7fbfd4160d78,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd41607d8,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Apr 2017], ["end_date", Wed, 24 May 2017], ["unit", "月"], ["total", #<BigDecimal:7fbfd4ae64d8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd4ae6438,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2017-04-15账单"], ["start_date", Thu, 25 May 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Sat, 15 Apr 2017], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 May 2017], ["end_date", Sat, 24 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7fbfd49ddf78,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd49ddcf8,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 16:01:49 UTC], ["updated_at", 2016-09-02 16:01:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Jun 2017], ["end_date", Mon, 24 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7fbfd581fd48,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd581fc08,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Jul 2017], ["end_date", Thu, 24 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7fbfd48efcd8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd48ef788,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "月"], ["total", #<BigDecimal:7fbfd4072538,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd40721c8,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2017-08-15账单"], ["start_date", Mon, 25 Sep 2017], ["end_date", Wed, 24 Jan 2018], ["due_date", Tue, 15 Aug 2017], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Sep 2017], ["end_date", Tue, 24 Oct 2017], ["unit", "月"], ["total", #<BigDecimal:7fbfd382c770,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd382c338,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Oct 2017], ["end_date", Fri, 24 Nov 2017], ["unit", "月"], ["total", #<BigDecimal:7fbfd71835f0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd7183550,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Nov 2017], ["end_date", Sun, 24 Dec 2017], ["unit", "月"], ["total", #<BigDecimal:7fbfd58ffa60,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd58ff920,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Dec 2017], ["end_date", Wed, 24 Jan 2018], ["unit", "月"], ["total", #<BigDecimal:7fbfd3969958,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd3969890,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2017-12-15账单"], ["start_date", Thu, 25 Jan 2018], ["end_date", Thu, 24 May 2018], ["due_date", Fri, 15 Dec 2017], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Jan 2018], ["end_date", Sat, 24 Feb 2018], ["unit", "月"], ["total", #<BigDecimal:7fbfd58e4d78,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd58e4cd8,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Feb 2018], ["end_date", Sat, 24 Mar 2018], ["unit", "月"], ["total", #<BigDecimal:7fbfd46a1530,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd46a1468,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Mar 2018], ["end_date", Tue, 24 Apr 2018], ["unit", "月"], ["total", #<BigDecimal:7fbfd46818e8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd4681820,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Apr 2018], ["end_date", Thu, 24 May 2018], ["unit", "月"], ["total", #<BigDecimal:7fbfd466bf70,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd466bed0,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2018-04-15账单"], ["start_date", Fri, 25 May 2018], ["end_date", Mon, 24 Sep 2018], ["due_date", Sun, 15 Apr 2018], ["contract_id", "1"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 May 2018], ["end_date", Sun, 24 Jun 2018], ["unit", "月"], ["total", #<BigDecimal:7fbfd76d3cf8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd76d3c58,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jun 2018], ["end_date", Tue, 24 Jul 2018], ["unit", "月"], ["total", #<BigDecimal:7fbfd76c29d0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd76c2930,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jul 2018], ["end_date", Fri, 24 Aug 2018], ["unit", "月"], ["total", #<BigDecimal:7fbfd76a3968,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd76a3800,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Aug 2018], ["end_date", Mon, 24 Sep 2018], ["unit", "月"], ["total", #<BigDecimal:7fbfd7681548,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7fbfd76814a8,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 16:01:50 UTC], ["updated_at", 2016-09-02 16:01:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[35m (8.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.4ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7faf35d97588,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Sep 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7faf35d7db60,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "常住奖励"], ["start_date", Fri, 25 Sep 2015], ["end_date", Mon, 24 Sep 2018], ["cycle", 4], ["monthly_price", #<BigDecimal:7faf3781af18,'0.11E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7faf34f21080,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7faf34f20fb8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf34ee00f8,'0.9E3',9(18)>], ["updated_at", 2016-09-02 16:02:40 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7faf34ea13f8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7faf34ea1308,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf34e80d88,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:02:40 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Mon, 26 Sep 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Sep 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7faf35be8980,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faf35be85e8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7faf34e22788,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faf34e22260,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7faf34df89d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faf34df88e8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf34dc2f90,'0.36E4',9(18)>], ["updated_at", 2016-09-02 16:02:40 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-11-15账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Fri, 24 Feb 2017], ["due_date", Tue, 15 Nov 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7faf34d894e8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faf34d893f8,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7faf34d61740,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7faf34d616a0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf361379b8,'0.238356E4',18(27)>], ["updated_at", 2016-09-02 16:02:40 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2015-08-15账单"], ["start_date", Fri, 25 Sep 2015], ["end_date", Sun, 24 Jan 2016], ["due_date", Sat, 15 Aug 2015], ["contract_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Sep 2015], ["end_date", Sat, 24 Oct 2015], ["unit", "月"], ["total", #<BigDecimal:7faf360a4168,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf360a4078,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Oct 2015], ["end_date", Tue, 24 Nov 2015], ["unit", "月"], ["total", #<BigDecimal:7faf3607f9a8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf3607f570,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Nov 2015], ["end_date", Thu, 24 Dec 2015], ["unit", "月"], ["total", #<BigDecimal:7faf34d38138,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf34d38048,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Dec 2015], ["end_date", Sun, 24 Jan 2016], ["unit", "月"], ["total", #<BigDecimal:7faf34d09e00,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf34d09d60,'0.11E4',9(18)>], ["invoice_id", "5"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf34cdbcf8,'0.44E4',9(18)>], ["updated_at", 2016-09-02 16:02:40 UTC], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2015-12-15账单"], ["start_date", Mon, 25 Jan 2016], ["end_date", Tue, 24 May 2016], ["due_date", Tue, 15 Dec 2015], ["contract_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jan 2016], ["end_date", Wed, 24 Feb 2016], ["unit", "月"], ["total", #<BigDecimal:7faf34ca8c90,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf34ca8bc8,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Feb 2016], ["end_date", Thu, 24 Mar 2016], ["unit", "月"], ["total", #<BigDecimal:7faf340c1508,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf340c1418,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Mar 2016], ["end_date", Sun, 24 Apr 2016], ["unit", "月"], ["total", #<BigDecimal:7faf34c6b390,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf34c6a990,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Apr 2016], ["end_date", Tue, 24 May 2016], ["unit", "月"], ["total", #<BigDecimal:7faf34c48ef8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf34c48e58,'0.11E4',9(18)>], ["invoice_id", "6"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf34c29968,'0.44E4',9(18)>], ["updated_at", 2016-09-02 16:02:40 UTC], ["id", 6]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-04-15账单"], ["start_date", Wed, 25 May 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Apr 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 May 2016], ["end_date", Fri, 24 Jun 2016], ["unit", "月"], ["total", #<BigDecimal:7faf35b92a30,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf35b92940,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Jun 2016], ["end_date", Sun, 24 Jul 2016], ["unit", "月"], ["total", #<BigDecimal:7faf35b69ba8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf35b69b08,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jul 2016], ["end_date", Wed, 24 Aug 2016], ["unit", "月"], ["total", #<BigDecimal:7faf34bc9068,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf34bc8fc8,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7faf35b03240,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf35b02f48,'0.11E4',9(18)>], ["invoice_id", "7"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf3409b178,'0.44E4',9(18)>], ["updated_at", 2016-09-02 16:02:40 UTC], ["id", 7]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Tue, 24 Jan 2017], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7faf3603f218,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf3603f060,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7faf34b628e0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf34b62818,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7faf35a12160,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf35a12098,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7faf359aaa38,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf359aa8f8,'0.11E4',9(18)>], ["invoice_id", "8"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf359723e0,'0.44E4',9(18)>], ["updated_at", 2016-09-02 16:02:40 UTC], ["id", 8]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 24 May 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "月"], ["total", #<BigDecimal:7faf34adbd90,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf34adbcf0,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Feb 2017], ["end_date", Fri, 24 Mar 2017], ["unit", "月"], ["total", #<BigDecimal:7faf358f0430,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf358f0de0,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Mar 2017], ["end_date", Mon, 24 Apr 2017], ["unit", "月"], ["total", #<BigDecimal:7faf35856470,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf35856240,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Apr 2017], ["end_date", Wed, 24 May 2017], ["unit", "月"], ["total", #<BigDecimal:7faf34a2bf30,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf34a2b1e8,'0.11E4',9(18)>], ["invoice_id", "9"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf3492aca8,'0.44E4',9(18)>], ["updated_at", 2016-09-02 16:02:40 UTC], ["id", 9]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2017-04-15账单"], ["start_date", Thu, 25 May 2017], ["end_date", Sun, 24 Sep 2017], ["due_date", Sat, 15 Apr 2017], ["contract_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (7.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 May 2017], ["end_date", Sat, 24 Jun 2017], ["unit", "月"], ["total", #<BigDecimal:7faf3786ac20,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf3786ab80,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Jun 2017], ["end_date", Mon, 24 Jul 2017], ["unit", "月"], ["total", #<BigDecimal:7faf38c093f8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf38c09358,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Jul 2017], ["end_date", Thu, 24 Aug 2017], ["unit", "月"], ["total", #<BigDecimal:7faf37a03910,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf37a03848,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Aug 2017], ["end_date", Sun, 24 Sep 2017], ["unit", "月"], ["total", #<BigDecimal:7faf38be8220,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf38be8180,'0.11E4',9(18)>], ["invoice_id", "10"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf38bd03f0,'0.44E4',9(18)>], ["updated_at", 2016-09-02 16:02:40 UTC], ["id", 10]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2017-08-15账单"], ["start_date", Mon, 25 Sep 2017], ["end_date", Wed, 24 Jan 2018], ["due_date", Tue, 15 Aug 2017], ["contract_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Sep 2017], ["end_date", Tue, 24 Oct 2017], ["unit", "月"], ["total", #<BigDecimal:7faf38ba01a0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf38ba0100,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Oct 2017], ["end_date", Fri, 24 Nov 2017], ["unit", "月"], ["total", #<BigDecimal:7faf38b80c10,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf38b80b70,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Nov 2017], ["end_date", Sun, 24 Dec 2017], ["unit", "月"], ["total", #<BigDecimal:7faf38b63548,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf38b634a8,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Dec 2017], ["end_date", Wed, 24 Jan 2018], ["unit", "月"], ["total", #<BigDecimal:7faf38b42938,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf38b42898,'0.11E4',9(18)>], ["invoice_id", "11"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf379ebcc0,'0.44E4',9(18)>], ["updated_at", 2016-09-02 16:02:40 UTC], ["id", 11]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2017-12-15账单"], ["start_date", Thu, 25 Jan 2018], ["end_date", Thu, 24 May 2018], ["due_date", Fri, 15 Dec 2017], ["contract_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Jan 2018], ["end_date", Sat, 24 Feb 2018], ["unit", "月"], ["total", #<BigDecimal:7faf38b0ae20,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf38b0ad80,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Feb 2018], ["end_date", Sat, 24 Mar 2018], ["unit", "月"], ["total", #<BigDecimal:7faf38af19e8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf38af18a8,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Mar 2018], ["end_date", Tue, 24 Apr 2018], ["unit", "月"], ["total", #<BigDecimal:7faf38ac98d0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf38ac9790,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Apr 2018], ["end_date", Thu, 24 May 2018], ["unit", "月"], ["total", #<BigDecimal:7faf379db5c8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf379db528,'0.11E4',9(18)>], ["invoice_id", "12"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf38aa35e0,'0.44E4',9(18)>], ["updated_at", 2016-09-02 16:02:40 UTC], ["id", 12]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2018-04-15账单"], ["start_date", Fri, 25 May 2018], ["end_date", Mon, 24 Sep 2018], ["due_date", Sun, 15 Apr 2018], ["contract_id", "1"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 May 2018], ["end_date", Sun, 24 Jun 2018], ["unit", "月"], ["total", #<BigDecimal:7faf379d02b8,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf379d0218,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 25 Jun 2018], ["end_date", Tue, 24 Jul 2018], ["unit", "月"], ["total", #<BigDecimal:7faf379c0020,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf379bbf98,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jul 2018], ["end_date", Fri, 24 Aug 2018], ["unit", "月"], ["total", #<BigDecimal:7faf379a0ea0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf379a0e00,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 25 Aug 2018], ["end_date", Mon, 24 Sep 2018], ["unit", "月"], ["total", #<BigDecimal:7faf38a60ab0,'0.11E4',9(18)>], ["unit_price", #<BigDecimal:7faf38a60a10,'0.11E4',9(18)>], ["invoice_id", "13"], ["created_at", 2016-09-02 16:02:40 UTC], ["updated_at", 2016-09-02 16:02:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf38a513d0,'0.44E4',9(18)>], ["updated_at", 2016-09-02 16:02:40 UTC], ["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "5"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "6"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "7"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "8"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "9"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "10"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "11"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "12"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "13"]]
  [1m[35m (3.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["created_at", 2016-09-02 16:03:40 UTC], ["updated_at", 2016-09-02 16:03:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7f8904745128,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:03:40 UTC], ["updated_at", 2016-09-02 16:03:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:03:40 UTC], ["updated_at", 2016-09-02 16:03:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f89016577f0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f8901657750,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:03:40 UTC], ["updated_at", 2016-09-02 16:03:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f890163ede0,'0.9E3',9(18)>], ["updated_at", 2016-09-02 16:03:40 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:03:40 UTC], ["updated_at", 2016-09-02 16:03:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f8901615fa8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f8901615f08,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:03:40 UTC], ["updated_at", 2016-09-02 16:03:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f89046b7dc8,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:03:40 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["created_at", 2016-09-02 16:05:13 UTC], ["updated_at", 2016-09-02 16:05:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Sep 2016], ["cycle", 1], ["monthly_price", #<BigDecimal:7febf61c90a0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:05:13 UTC], ["updated_at", 2016-09-02 16:05:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:05:13 UTC], ["updated_at", 2016-09-02 16:05:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7febf81e0b40,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7febf81e0a78,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:05:13 UTC], ["updated_at", 2016-09-02 16:05:13 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7febf81c8608,'0.9E3',9(18)>], ["updated_at", 2016-09-02 16:05:13 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-08-15账单"], ["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["due_date", Mon, 15 Aug 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:05:13 UTC], ["updated_at", 2016-09-02 16:05:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Sun, 25 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7febf81b94c8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7febf81b9360,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:05:13 UTC], ["updated_at", 2016-09-02 16:05:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7febf81a24a8,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:05:13 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Dec 2016], ["created_at", 2016-09-02 16:05:59 UTC], ["updated_at", 2016-09-02 16:05:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Dec 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7f83dc555840,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:05:59 UTC], ["updated_at", 2016-09-02 16:05:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:05:59 UTC], ["updated_at", 2016-09-02 16:05:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f83dd88aa50,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f83dd88a9b0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:05:59 UTC], ["updated_at", 2016-09-02 16:05:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f83dd871230,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f83dd871190,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:05:59 UTC], ["updated_at", 2016-09-02 16:05:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f83dd85b980,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:05:59 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Sat, 24 Dec 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:05:59 UTC], ["updated_at", 2016-09-02 16:05:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f83dc5078e8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f83dc4ffee0,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:05:59 UTC], ["updated_at", 2016-09-02 16:05:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f83da906c98,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f83da906bf8,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:05:59 UTC], ["updated_at", 2016-09-02 16:05:59 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f83da8f4e80,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:05:59 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-11-15账单"], ["start_date", Sun, 25 Dec 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Tue, 15 Nov 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:05:59 UTC], ["updated_at", 2016-09-02 16:05:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "天"], ["total", #<BigDecimal:7f83dd820880,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f83dd820768,'0.2959E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:05:59 UTC], ["updated_at", 2016-09-02 16:05:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f83dd809810,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:05:59 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:08:21 UTC], ["updated_at", 2016-09-02 16:08:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Sun, 25 Dec 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fff44bba3c8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:08:21 UTC], ["updated_at", 2016-09-02 16:08:21 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Mon, 26 Dec 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fff45220668,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:08:22 UTC], ["updated_at", 2016-09-02 16:08:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:08:22 UTC], ["updated_at", 2016-09-02 16:08:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fff44b4ad48,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fff44b4aca8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:08:22 UTC], ["updated_at", 2016-09-02 16:08:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fff44b2b6a0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fff44b2b538,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:08:22 UTC], ["updated_at", 2016-09-02 16:08:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fff44b121f0,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:08:22 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Sat, 24 Dec 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:08:22 UTC], ["updated_at", 2016-09-02 16:08:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fff451a3910,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fff451a3870,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:08:22 UTC], ["updated_at", 2016-09-02 16:08:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fff4518a528,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fff4518a488,'0.9E3',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:08:22 UTC], ["updated_at", 2016-09-02 16:08:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fff45178698,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:08:22 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-11-15账单"], ["start_date", Sun, 25 Dec 2016], ["end_date", Sun, 25 Dec 2016], ["due_date", Tue, 15 Nov 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:08:22 UTC], ["updated_at", 2016-09-02 16:08:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "天"], ["total", #<BigDecimal:7fff4514b850,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fff4514b7b0,'0.2959E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:08:22 UTC], ["updated_at", 2016-09-02 16:08:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fff44b00db0,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:08:22 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-11-15账单"], ["start_date", Mon, 26 Dec 2016], ["end_date", Fri, 24 Feb 2017], ["due_date", Tue, 15 Nov 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:08:22 UTC], ["updated_at", 2016-09-02 16:08:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fff44af2cb0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fff44af2c10,'0.12E4',9(18)>], ["invoice_id", "4"], ["created_at", 2016-09-02 16:08:22 UTC], ["updated_at", 2016-09-02 16:08:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fff451106d8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fff45110598,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 16:08:22 UTC], ["updated_at", 2016-09-02 16:08:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fff450fb120,'0.238356E4',18(27)>], ["updated_at", 2016-09-02 16:08:22 UTC], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:10:15 UTC], ["updated_at", 2016-09-02 16:10:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fca139f2560,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:10:15 UTC], ["updated_at", 2016-09-02 16:10:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fca159540e8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:10:15 UTC], ["updated_at", 2016-09-02 16:10:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:10:15 UTC], ["updated_at", 2016-09-02 16:10:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fca16e58958,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fca16e588b8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:10:15 UTC], ["updated_at", 2016-09-02 16:10:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fca14daf738,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fca14daf670,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:10:15 UTC], ["updated_at", 2016-09-02 16:10:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fca139c3698,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:10:15 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:10:15 UTC], ["updated_at", 2016-09-02 16:10:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fca139b27f8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fca139b2690,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:10:15 UTC], ["updated_at", 2016-09-02 16:10:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fca16e50848,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:10:15 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Wed, 26 Oct 2016], ["end_date", Wed, 25 Jan 2017], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:10:15 UTC], ["updated_at", 2016-09-02 16:10:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 25 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fca16e20788,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fca16e206e8,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:10:15 UTC], ["updated_at", 2016-09-02 16:10:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sat, 26 Nov 2016], ["end_date", Sun, 25 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fca16e117b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fca16e11710,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:10:15 UTC], ["updated_at", 2016-09-02 16:10:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Mon, 26 Dec 2016], ["end_date", Wed, 25 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fca16df9ef8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fca16df9de0,'0.12E4',9(18)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:10:15 UTC], ["updated_at", 2016-09-02 16:10:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fca1399b030,'0.36E4',9(18)>], ["updated_at", 2016-09-02 16:10:15 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:10:15 UTC], ["updated_at", 2016-09-02 16:10:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fca16df0380,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fca16df02e0,'0.3945E2',18(36)>], ["invoice_id", "4"], ["created_at", 2016-09-02 16:10:15 UTC], ["updated_at", 2016-09-02 16:10:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fca16ddb430,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 16:10:15 UTC], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "4"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:20:11 UTC], ["updated_at", 2016-09-02 16:20:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fa2685ede10,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:20:11 UTC], ["updated_at", 2016-09-02 16:20:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa2657d0410,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:20:11 UTC], ["updated_at", 2016-09-02 16:20:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:21:33 UTC], ["updated_at", 2016-09-02 16:21:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (3.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fa01c9a3558,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:21:33 UTC], ["updated_at", 2016-09-02 16:21:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa01c675a70,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:21:33 UTC], ["updated_at", 2016-09-02 16:21:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.3ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvoice Load (0.7ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:22:04 UTC], ["updated_at", 2016-09-02 16:22:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fcdbc9182a0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:22:04 UTC], ["updated_at", 2016-09-02 16:22:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fcdb8a26920,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:22:04 UTC], ["updated_at", 2016-09-02 16:22:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:23:24 UTC], ["updated_at", 2016-09-02 16:23:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fd300852188,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:23:24 UTC], ["updated_at", 2016-09-02 16:23:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd300860e90,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:23:24 UTC], ["updated_at", 2016-09-02 16:23:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:25:05 UTC], ["updated_at", 2016-09-02 16:25:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fa914781418,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:25:05 UTC], ["updated_at", 2016-09-02 16:25:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa91206cd00,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:25:05 UTC], ["updated_at", 2016-09-02 16:25:05 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:25:05 UTC], ["updated_at", 2016-09-02 16:25:05 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa9130956c8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fa913095628,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:25:05 UTC], ["updated_at", 2016-09-02 16:25:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fa9146b39c8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fa9146b3860,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:25:05 UTC], ["updated_at", 2016-09-02 16:25:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fa9115ff868,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:25:05 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:25:05 UTC], ["updated_at", 2016-09-02 16:25:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fa91468a758,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fa91468a6b8,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:25:05 UTC], ["updated_at", 2016-09-02 16:25:05 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fa9146735d0,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:25:05 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:25:27 UTC], ["updated_at", 2016-09-02 16:25:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fdd86813510,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:25:27 UTC], ["updated_at", 2016-09-02 16:25:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fdd82ff3d38,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:25:27 UTC], ["updated_at", 2016-09-02 16:25:27 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:25:27 UTC], ["updated_at", 2016-09-02 16:25:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fdd84c72810,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fdd84c72770,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:25:27 UTC], ["updated_at", 2016-09-02 16:25:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fdd84c61178,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fdd84c610d8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:25:27 UTC], ["updated_at", 2016-09-02 16:25:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fdd84c48ce0,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:25:27 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:25:27 UTC], ["updated_at", 2016-09-02 16:25:27 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fdd82ed2468,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fdd82ed2300,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:25:27 UTC], ["updated_at", 2016-09-02 16:25:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fdd82eb8748,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:25:27 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016]]
  [1m[35m (1.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:27:08 UTC], ["updated_at", 2016-09-02 16:27:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fbdcb1eb258,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:27:08 UTC], ["updated_at", 2016-09-02 16:27:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fbdca9b50c0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:27:08 UTC], ["updated_at", 2016-09-02 16:27:08 UTC]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:27:34 UTC], ["updated_at", 2016-09-02 16:27:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7ff5073a1890,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:27:34 UTC], ["updated_at", 2016-09-02 16:27:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff5073b3888,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:27:34 UTC], ["updated_at", 2016-09-02 16:27:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:27:52 UTC], ["updated_at", 2016-09-02 16:27:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7f8614594fb0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:27:52 UTC], ["updated_at", 2016-09-02 16:27:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f86145af540,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:27:52 UTC], ["updated_at", 2016-09-02 16:27:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:27:52 UTC], ["updated_at", 2016-09-02 16:27:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f861451ef18,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f861451ee78,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:27:52 UTC], ["updated_at", 2016-09-02 16:27:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f8614505220,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f8614505158,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:27:52 UTC], ["updated_at", 2016-09-02 16:27:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f86144ed008,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:27:52 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:27:52 UTC], ["updated_at", 2016-09-02 16:27:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7f86144bc688,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f86144bc5e8,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:27:52 UTC], ["updated_at", 2016-09-02 16:27:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f86144a5cd0,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:27:52 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:28:34 UTC], ["updated_at", 2016-09-02 16:28:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fcc5f10a3c8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:28:34 UTC], ["updated_at", 2016-09-02 16:28:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fcc5f118338,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:28:34 UTC], ["updated_at", 2016-09-02 16:28:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:28:34 UTC], ["updated_at", 2016-09-02 16:28:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fcc5f080060,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fcc5f07bf88,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:28:34 UTC], ["updated_at", 2016-09-02 16:28:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fcc5f061e58,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fcc5f061db8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:28:34 UTC], ["updated_at", 2016-09-02 16:28:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fcc5f049d30,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:28:34 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:28:34 UTC], ["updated_at", 2016-09-02 16:28:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fcc5f019f90,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fcc5f019ef0,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:28:34 UTC], ["updated_at", 2016-09-02 16:28:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fcc5e88a978,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:28:34 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (1.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:29:59 UTC], ["updated_at", 2016-09-02 16:29:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fa5f7cf9d20,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:29:59 UTC], ["updated_at", 2016-09-02 16:29:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa5f7d080a0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:29:59 UTC], ["updated_at", 2016-09-02 16:29:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:29:59 UTC], ["updated_at", 2016-09-02 16:29:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa5f7c28270,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fa5f7c281d0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:29:59 UTC], ["updated_at", 2016-09-02 16:29:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fa5f7c08f88,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fa5f7c08e48,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:29:59 UTC], ["updated_at", 2016-09-02 16:29:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fa5f7bf1928,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:29:59 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:29:59 UTC], ["updated_at", 2016-09-02 16:29:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fa5f7bbbf08,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fa5f7bbbe40,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:29:59 UTC], ["updated_at", 2016-09-02 16:29:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fa5f7ba9d08,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:29:59 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fa5f7b90cb8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa5f7b90c18,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:29:59 UTC], ["updated_at", 2016-09-02 16:29:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fa5f7b73bb8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa5f7b73af0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:29:59 UTC], ["updated_at", 2016-09-02 16:29:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fa5f7b5a640,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa5f7b5a5a0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:29:59 UTC], ["updated_at", 2016-09-02 16:29:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fa5f7b41280,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fa5f7b411e0,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:29:59 UTC], ["updated_at", 2016-09-02 16:29:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fa5f46c69b0,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 16:29:59 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:29:59 UTC], ["updated_at", 2016-09-02 16:29:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fa5f7b19ac8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fa5f7b19a28,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:29:59 UTC], ["updated_at", 2016-09-02 16:29:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fa5f46a7448,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 16:29:59 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:39:29 UTC], ["updated_at", 2016-09-02 16:39:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fc6fedd04d8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:39:30 UTC], ["updated_at", 2016-09-02 16:39:30 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc6fb8bbf18,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:39:30 UTC], ["updated_at", 2016-09-02 16:39:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:39:30 UTC], ["updated_at", 2016-09-02 16:39:30 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fc6fecc0688,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fc6fecc05c0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:39:30 UTC], ["updated_at", 2016-09-02 16:39:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fc6feca2a48,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fc6feca29a8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:39:30 UTC], ["updated_at", 2016-09-02 16:39:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fc6fec8bc80,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:39:30 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:39:30 UTC], ["updated_at", 2016-09-02 16:39:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fc6fec59820,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fc6fec596b8,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:39:30 UTC], ["updated_at", 2016-09-02 16:39:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fc6fec42bc0,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:39:30 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fc6fec00108,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc6fec00018,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:39:30 UTC], ["updated_at", 2016-09-02 16:39:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fc6febe2270,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc6febe21d0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:39:30 UTC], ["updated_at", 2016-09-02 16:39:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fc6fb6d1f18,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fc6fb6d1e50,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:39:30 UTC], ["updated_at", 2016-09-02 16:39:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fc6febc13e0,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fc6febc1340,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:39:30 UTC], ["updated_at", 2016-09-02 16:39:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fc6feb9b190,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 16:39:30 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:39:30 UTC], ["updated_at", 2016-09-02 16:39:30 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fc6feb89350,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fc6feb892b0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:39:30 UTC], ["updated_at", 2016-09-02 16:39:30 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fc6feb7b7f0,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 16:39:30 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:39:46 UTC], ["updated_at", 2016-09-02 16:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fce8971df40,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:39:46 UTC], ["updated_at", 2016-09-02 16:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fce897159f8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:39:46 UTC], ["updated_at", 2016-09-02 16:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:39:46 UTC], ["updated_at", 2016-09-02 16:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fce8956dda8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fce8956fe78,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:39:46 UTC], ["updated_at", 2016-09-02 16:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fce8953cdc0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fce8953ccf8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:39:46 UTC], ["updated_at", 2016-09-02 16:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fce8951e118,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:39:46 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:39:46 UTC], ["updated_at", 2016-09-02 16:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fce89496330,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fce89496290,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:39:46 UTC], ["updated_at", 2016-09-02 16:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fce89476620,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:39:46 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fce8941e010,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fce8941de30,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:39:46 UTC], ["updated_at", 2016-09-02 16:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fce893d6058,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fce893d5ec8,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:39:46 UTC], ["updated_at", 2016-09-02 16:39:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fce89396d90,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fce89396c28,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:39:46 UTC], ["updated_at", 2016-09-02 16:39:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fce89377238,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fce89377198,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:39:46 UTC], ["updated_at", 2016-09-02 16:39:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fce893343c0,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 16:39:46 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:39:46 UTC], ["updated_at", 2016-09-02 16:39:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fce89c74408,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fce89c74318,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:39:46 UTC], ["updated_at", 2016-09-02 16:39:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fce89c54900,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 16:39:46 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (1.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:40:46 UTC], ["updated_at", 2016-09-02 16:40:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fb52639a188,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:40:46 UTC], ["updated_at", 2016-09-02 16:40:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb526382998,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:40:46 UTC], ["updated_at", 2016-09-02 16:40:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:40:46 UTC], ["updated_at", 2016-09-02 16:40:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb527998c28,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fb527998b88,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:40:46 UTC], ["updated_at", 2016-09-02 16:40:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5279882d8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fb527988238,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:40:46 UTC], ["updated_at", 2016-09-02 16:40:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fb527980bc8,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:40:46 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:40:46 UTC], ["updated_at", 2016-09-02 16:40:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fb527963370,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fb5279632d0,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:40:46 UTC], ["updated_at", 2016-09-02 16:40:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fb5279519e0,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:40:46 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fb526296728,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb526296688,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:40:46 UTC], ["updated_at", 2016-09-02 16:40:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fb5279212b8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb527921218,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:40:46 UTC], ["updated_at", 2016-09-02 16:40:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fb5279008d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb527900838,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:40:46 UTC], ["updated_at", 2016-09-02 16:40:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fb5278ebc08,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fb5278ebb68,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:40:46 UTC], ["updated_at", 2016-09-02 16:40:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fb5278c39d8,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 16:40:46 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:40:46 UTC], ["updated_at", 2016-09-02 16:40:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fb527889bc0,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fb527889b20,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:40:46 UTC], ["updated_at", 2016-09-02 16:40:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fb52627cb98,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 16:40:46 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:41:08 UTC], ["updated_at", 2016-09-02 16:41:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fe94aff16b8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:41:08 UTC], ["updated_at", 2016-09-02 16:41:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe94e013be8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:41:08 UTC], ["updated_at", 2016-09-02 16:41:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:41:08 UTC], ["updated_at", 2016-09-02 16:41:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe94dbc52f8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fe94dbc5230,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:41:08 UTC], ["updated_at", 2016-09-02 16:41:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fe94af6f6b8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fe94af6f618,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:41:08 UTC], ["updated_at", 2016-09-02 16:41:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fe94af5c860,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:41:08 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:41:08 UTC], ["updated_at", 2016-09-02 16:41:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fe94db764c8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fe94db76428,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:41:08 UTC], ["updated_at", 2016-09-02 16:41:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fe94db64458,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:41:08 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fe94db1c360,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe94db1c2c0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:41:08 UTC], ["updated_at", 2016-09-02 16:41:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fe94dafe108,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe94dafe068,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:41:08 UTC], ["updated_at", 2016-09-02 16:41:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fe94af55e48,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe94af55da8,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:41:08 UTC], ["updated_at", 2016-09-02 16:41:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fe94daddfc0,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fe94daddf20,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:41:08 UTC], ["updated_at", 2016-09-02 16:41:08 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fe94dab6a60,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 16:41:08 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:41:08 UTC], ["updated_at", 2016-09-02 16:41:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fe94b0f5320,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fe94b0f5230,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:41:08 UTC], ["updated_at", 2016-09-02 16:41:08 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fe94da86ea0,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 16:41:08 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:41:37 UTC], ["updated_at", 2016-09-02 16:41:37 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7f9724b6a7c0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:41:37 UTC], ["updated_at", 2016-09-02 16:41:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f972223dbe0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:41:37 UTC], ["updated_at", 2016-09-02 16:41:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:41:37 UTC], ["updated_at", 2016-09-02 16:41:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f9724a54660,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f9724a545c0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:41:37 UTC], ["updated_at", 2016-09-02 16:41:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f9724a3e518,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f9724a3e428,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:41:37 UTC], ["updated_at", 2016-09-02 16:41:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f9720fc8d20,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:41:37 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:41:37 UTC], ["updated_at", 2016-09-02 16:41:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7f9724a0e4d0,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f9724a0e430,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:41:37 UTC], ["updated_at", 2016-09-02 16:41:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f9720fb9230,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:41:37 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f9721a0ae78,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9721a0adb0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:41:37 UTC], ["updated_at", 2016-09-02 16:41:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f97249ed9d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f97249ed938,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:41:37 UTC], ["updated_at", 2016-09-02 16:41:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f9720f78050,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f97249e7fb0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:41:37 UTC], ["updated_at", 2016-09-02 16:41:37 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7f9722206fc8,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7f9722206f28,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:41:37 UTC], ["updated_at", 2016-09-02 16:41:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7f9720f70a30,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 16:41:37 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:41:37 UTC], ["updated_at", 2016-09-02 16:41:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7f97219e1848,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f97219e17a8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:41:37 UTC], ["updated_at", 2016-09-02 16:41:37 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f97249a42d8,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 16:41:37 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:42:06 UTC], ["updated_at", 2016-09-02 16:42:06 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fde4656e498,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:06 UTC], ["updated_at", 2016-09-02 16:42:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fde4657c728,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:06 UTC], ["updated_at", 2016-09-02 16:42:06 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:06 UTC], ["updated_at", 2016-09-02 16:42:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fde436c3b70,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fde436c3ad0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:42:06 UTC], ["updated_at", 2016-09-02 16:42:06 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fde436a9ef0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fde436a9e50,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:42:06 UTC], ["updated_at", 2016-09-02 16:42:06 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fde42963138,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:42:06 UTC], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:06 UTC], ["updated_at", 2016-09-02 16:42:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fde464ad1a8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fde464ad108,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:06 UTC], ["updated_at", 2016-09-02 16:42:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fde464970d8,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:42:06 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fde43693330,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fde43693290,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:06 UTC], ["updated_at", 2016-09-02 16:42:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fde43678d00,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fde43678c60,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:06 UTC], ["updated_at", 2016-09-02 16:42:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fde429389d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fde42938938,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:06 UTC], ["updated_at", 2016-09-02 16:42:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fde46444ce8,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fde46444c48,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:06 UTC], ["updated_at", 2016-09-02 16:42:06 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fde46425c08,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 16:42:06 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:06 UTC], ["updated_at", 2016-09-02 16:42:06 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fde463efd38,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fde463efc98,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:42:06 UTC], ["updated_at", 2016-09-02 16:42:06 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fde436522e0,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 16:42:06 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:42:15 UTC], ["updated_at", 2016-09-02 16:42:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7ffb9d981098,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:15 UTC], ["updated_at", 2016-09-02 16:42:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ffb9e15b4d0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:15 UTC], ["updated_at", 2016-09-02 16:42:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:15 UTC], ["updated_at", 2016-09-02 16:42:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ffb9e118e78,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7ffb9e118db0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:42:15 UTC], ["updated_at", 2016-09-02 16:42:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7ffb9e113360,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7ffb9e1132c0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:42:15 UTC], ["updated_at", 2016-09-02 16:42:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ffb9d8e8488,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:42:15 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:15 UTC], ["updated_at", 2016-09-02 16:42:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7ffb9a2322e0,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7ffb9a232240,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:15 UTC], ["updated_at", 2016-09-02 16:42:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ffb9e0f3308,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:42:15 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7ffb9e0d3738,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffb9e0d3698,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:15 UTC], ["updated_at", 2016-09-02 16:42:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7ffb9e0c2820,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffb9e0c2780,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:15 UTC], ["updated_at", 2016-09-02 16:42:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7ffb9d8aa430,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffb9d8aa390,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:15 UTC], ["updated_at", 2016-09-02 16:42:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7ffb9d891c78,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7ffb9d891bd8,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:15 UTC], ["updated_at", 2016-09-02 16:42:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7ffb9d87ad48,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 16:42:15 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:15 UTC], ["updated_at", 2016-09-02 16:42:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7ffb9d871068,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7ffb9d870fa0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:42:15 UTC], ["updated_at", 2016-09-02 16:42:15 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ffb9a2137c8,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 16:42:15 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:42:33 UTC], ["updated_at", 2016-09-02 16:42:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.4ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fef7707a058,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:33 UTC], ["updated_at", 2016-09-02 16:42:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fef76a6e920,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:33 UTC], ["updated_at", 2016-09-02 16:42:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:33 UTC], ["updated_at", 2016-09-02 16:42:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fef73a3ff10,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fef73a3fe48,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:42:33 UTC], ["updated_at", 2016-09-02 16:42:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fef769f33b0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fef769f3310,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:42:33 UTC], ["updated_at", 2016-09-02 16:42:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fef769e1610,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:42:33 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:33 UTC], ["updated_at", 2016-09-02 16:42:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fef769b0308,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fef769b0268,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:33 UTC], ["updated_at", 2016-09-02 16:42:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fef73a2df18,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:42:33 UTC], ["id", 2]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fef7471ebc8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fef7471eb28,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:33 UTC], ["updated_at", 2016-09-02 16:42:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fef74705fd8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fef74705f38,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:33 UTC], ["updated_at", 2016-09-02 16:42:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fef76983c18,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fef76983b78,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:33 UTC], ["updated_at", 2016-09-02 16:42:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fef7697b310,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fef7697b270,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:33 UTC], ["updated_at", 2016-09-02 16:42:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fef769530e0,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 16:42:33 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:33 UTC], ["updated_at", 2016-09-02 16:42:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fef76918350,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fef76918260,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:42:33 UTC], ["updated_at", 2016-09-02 16:42:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fef7325ef58,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 16:42:33 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.3ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:42:55 UTC], ["updated_at", 2016-09-02 16:42:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fa8fd051128,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:55 UTC], ["updated_at", 2016-09-02 16:42:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa8f90336e0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:55 UTC], ["updated_at", 2016-09-02 16:42:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:55 UTC], ["updated_at", 2016-09-02 16:42:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8fa723e18,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fa8fa723d78,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:42:55 UTC], ["updated_at", 2016-09-02 16:42:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8fa70a170,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fa8fa70a080,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:42:55 UTC], ["updated_at", 2016-09-02 16:42:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fa8fa6f3380,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:42:55 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:55 UTC], ["updated_at", 2016-09-02 16:42:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fa8fa6c0e08,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fa8fa6c0d68,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:55 UTC], ["updated_at", 2016-09-02 16:42:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fa8fa699790,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:42:55 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8fa662a38,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8fa662970,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:55 UTC], ["updated_at", 2016-09-02 16:42:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8fa649ec0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8fa649e20,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:55 UTC], ["updated_at", 2016-09-02 16:42:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fa8fa631dc0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8fa631d20,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:55 UTC], ["updated_at", 2016-09-02 16:42:55 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fa8fa618938,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fa8fa618898,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:42:55 UTC], ["updated_at", 2016-09-02 16:42:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fa8fa5f1e50,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 16:42:55 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:42:55 UTC], ["updated_at", 2016-09-02 16:42:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fa8fa5b8330,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fa8fa5b8290,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:42:55 UTC], ["updated_at", 2016-09-02 16:42:55 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fa8fa5a2530,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 16:42:55 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:48:34 UTC], ["updated_at", 2016-09-02 16:48:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fce3ddf2fd8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:48:34 UTC], ["updated_at", 2016-09-02 16:48:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fce3de01970,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:48:34 UTC], ["updated_at", 2016-09-02 16:48:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:48:34 UTC], ["updated_at", 2016-09-02 16:48:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fce3b6939d8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fce3b6938e8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:48:34 UTC], ["updated_at", 2016-09-02 16:48:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fce3dd71ca8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fce3dd71bb8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:48:34 UTC], ["updated_at", 2016-09-02 16:48:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fce3b67b090,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:48:34 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:48:34 UTC], ["updated_at", 2016-09-02 16:48:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fce3dd68798,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fce3dd686f8,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:48:34 UTC], ["updated_at", 2016-09-02 16:48:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fce3a969c58,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:48:34 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fce3b63a6a8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fce3b63a608,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:48:34 UTC], ["updated_at", 2016-09-02 16:48:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fce3b620938,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fce3b620870,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:48:34 UTC], ["updated_at", 2016-09-02 16:48:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fce3dd206c8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fce3dd20628,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:48:34 UTC], ["updated_at", 2016-09-02 16:48:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fce3dcfb9b8,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fce3dcfb918,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:48:34 UTC], ["updated_at", 2016-09-02 16:48:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fce3dcd89b8,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 16:48:34 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:48:34 UTC], ["updated_at", 2016-09-02 16:48:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fce3dca3268,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fce3dca31c8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:48:34 UTC], ["updated_at", 2016-09-02 16:48:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fce3dc91ae0,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 16:48:34 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:54:31 UTC], ["updated_at", 2016-09-02 16:54:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fb60e7580c0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:54:31 UTC], ["updated_at", 2016-09-02 16:54:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb60bf42b58,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:54:31 UTC], ["updated_at", 2016-09-02 16:54:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:54:31 UTC], ["updated_at", 2016-09-02 16:54:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb60e6b0398,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fb60e6b02f8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:54:31 UTC], ["updated_at", 2016-09-02 16:54:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fb60e692910,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fb60e692870,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:54:31 UTC], ["updated_at", 2016-09-02 16:54:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fb60e67bb70,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:54:31 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:54:31 UTC], ["updated_at", 2016-09-02 16:54:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fb60e649670,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fb60e6495d0,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:54:31 UTC], ["updated_at", 2016-09-02 16:54:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fb60e631cc8,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:54:31 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fb60bea9278,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb60bea3f30,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:54:31 UTC], ["updated_at", 2016-09-02 16:54:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fb60be8a788,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb60be8a6c0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:54:31 UTC], ["updated_at", 2016-09-02 16:54:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fb60e5fa480,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb60e5fa3e0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:54:31 UTC], ["updated_at", 2016-09-02 16:54:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fb60e5ea918,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fb60e5ea878,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:54:31 UTC], ["updated_at", 2016-09-02 16:54:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fb60be626e8,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 16:54:31 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:54:31 UTC], ["updated_at", 2016-09-02 16:54:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fb60e5a1470,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fb60e5a13d0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:54:31 UTC], ["updated_at", 2016-09-02 16:54:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fb60e58b580,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 16:54:31 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:56:33 UTC], ["updated_at", 2016-09-02 16:56:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fd240952f08,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:56:33 UTC], ["updated_at", 2016-09-02 16:56:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd23c98e098,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:56:33 UTC], ["updated_at", 2016-09-02 16:56:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:56:33 UTC], ["updated_at", 2016-09-02 16:56:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd240823ec0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd240823da8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:56:33 UTC], ["updated_at", 2016-09-02 16:56:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fd24080a150,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd24080a0b0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:56:33 UTC], ["updated_at", 2016-09-02 16:56:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd23f7eb558,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:56:33 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:56:33 UTC], ["updated_at", 2016-09-02 16:56:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fd23f7b8f90,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fd23f7b8e28,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:56:33 UTC], ["updated_at", 2016-09-02 16:56:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd23f7a2100,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:56:33 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fd23d40ee50,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd23d40ed60,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:56:33 UTC], ["updated_at", 2016-09-02 16:56:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fd23d8eda98,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd23d8ed9f8,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:56:33 UTC], ["updated_at", 2016-09-02 16:56:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fd23f761858,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd23f761790,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:56:33 UTC], ["updated_at", 2016-09-02 16:56:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fd23f7488a8,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fd23f748808,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:56:33 UTC], ["updated_at", 2016-09-02 16:56:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fd23f732300,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 16:56:33 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:56:33 UTC], ["updated_at", 2016-09-02 16:56:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fd23f7005f8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fd23f700558,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:56:33 UTC], ["updated_at", 2016-09-02 16:56:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd23f6ea7f8,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 16:56:33 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 16:56:33 UTC], ["updated_at", 2016-09-02 16:56:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.4ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fdf6d88aca8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fdf6d8994d8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fdf6d8091d0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fdf6d809130,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fdf697e3740,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fdf697e3650,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fdf697d07a8,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:57:16 UTC], ["id", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fdf6a15b610,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fdf6a15b570,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fdf6a148740,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:57:16 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fdf6a138ef8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdf6a138e30,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fdf6a121c80,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdf6a121be0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fdf6a9a1450,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdf6a9a1388,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fdf697794f8,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fdf69779458,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fdf697722c0,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 16:57:16 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fdf69758a78,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fdf697589b0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fdf6d3329e0,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 16:57:16 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fdf6d2991a0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fdf6d299088,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:57:16 UTC], ["updated_at", 2016-09-02 16:57:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fdf69700148,'0.1E4',9(18)>], ["updated_at", 2016-09-02 16:57:16 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (5.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.2ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ffee5097b80,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7ffee5096938,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ffee4ed73b8,'0.1E4',9(18)>], ["updated_at", 2016-09-02 16:59:41 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7ffee84624b0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ffee4dd5e10,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ffee424b4c8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7ffee424b428,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7ffee4da7088,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7ffee4da6fe8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ffee4d8f398,'0.18E4',9(18)>], ["updated_at", 2016-09-02 16:59:41 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7ffee83b0cd8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7ffee83b0c38,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ffee83a3ee8,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 16:59:41 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7ffee4d549a0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffee4d548d8,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7ffee4d470c0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffee4d47020,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7ffee8371ba0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffee8371b00,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7ffee4d35398,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7ffee4d352f8,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7ffee4d2e048,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 16:59:41 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7ffee8328180,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7ffee83280e0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 16:59:41 UTC], ["updated_at", 2016-09-02 16:59:41 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ffee8311db8,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 16:59:41 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ff4128c7950,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7ff4128c6b68,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ff417377888,'0.1E4',9(18)>], ["updated_at", 2016-09-02 17:00:56 UTC], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Tue, 09 Aug 2016], ["unit", "天"], ["total", #<BigDecimal:7ff4172ff6f8,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7ff4172ff608,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Tue, 09 Aug 2016], ["total", #<BigDecimal:7ff4169c0218,'0.1032E4',9(18)>], ["updated_at", 2016-09-02 17:00:56 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7ff41727f070,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff416992908,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ff417236118,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7ff417236078,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7ff414977b50,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7ff414977ab0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ff414966968,'0.18E4',9(18)>], ["updated_at", 2016-09-02 17:00:56 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7ff4172173a8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7ff4172172e0,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ff4172059f0,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 17:00:56 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7ff416951c00,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff416951b60,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7ff4171c49c8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff4171c4928,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7ff4171bfce8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff4171bfbd0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7ff4171a6d88,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7ff4171a6ce8,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7ff41717fd00,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 17:00:56 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7ff414954bc8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7ff414954b28,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 17:00:56 UTC], ["updated_at", 2016-09-02 17:00:56 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ff4169130b8,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 17:00:56 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fd64aa47db0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd64a74cb38,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd64a5ddbd0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd64a5ddab8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fd64a5bfdb0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd64a5bfcc0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd64a58fbb0,'0.18E4',9(18)>], ["updated_at", 2016-09-02 17:01:53 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fd64aa2bb38,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fd64aa2b980,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd64b469d70,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 17:01:53 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fd64a4f6d98,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd64a4f6c58,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fd64b442450,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd64b4422c0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fd64a4a6e38,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd64a4a6c08,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fd64b423cd0,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fd64b423be0,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fd64a43c6a0,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 17:01:53 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fd64a3dd308,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fd64a3dd268,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd64a3c5410,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 17:01:53 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.3ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (1.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd64a2f4838,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd64a2f4680,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd64a9fb028,'0.1E4',9(18)>], ["updated_at", 2016-09-02 17:01:53 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Tue, 09 Aug 2016], ["unit", "天"], ["total", #<BigDecimal:7fd64a2b7140,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fd64a2b7028,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Tue, 09 Aug 2016], ["total", #<BigDecimal:7fd64a29c930,'0.1032E4',9(18)>], ["updated_at", 2016-09-02 17:01:53 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd64b8b1ef0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd64b8b1d60,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fd64b37bd28,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd64b37bc10,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Sun, 09 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fd64a24e078,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fd64a24df88,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:01:53 UTC], ["updated_at", 2016-09-02 17:01:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Sun, 09 Oct 2016], ["total", #<BigDecimal:7fd64a2263e8,'0.3064E4',9(18)>], ["updated_at", 2016-09-02 17:01:53 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fcfac092760,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fcfaf922ad0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fcfacb3b310,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fcfacb3b270,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fcfb0129788,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fcfb01296e8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fcfb0112a60,'0.18E4',9(18)>], ["updated_at", 2016-09-02 17:02:33 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fcfaf8b0750,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fcfaf8b0660,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fcfaf8a9888,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 17:02:33 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fcfab94ee40,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcfab94ed50,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fcfb00b8c40,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcfb00b8b50,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fcfaf888890,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcfaf8887f0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fcfb00980d0,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fcfb0099ef8,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fcfb0071200,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 17:02:33 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fcfaf863978,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fcfaf8638d8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fcfacb29f70,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 17:02:33 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.3ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fcfac7b1668,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fcfac7b1578,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fcfaf81b970,'0.1E4',9(18)>], ["updated_at", 2016-09-02 17:02:33 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Tue, 09 Aug 2016], ["unit", "天"], ["total", #<BigDecimal:7fcfac78a9c8,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fcfac78a8d8,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Tue, 09 Aug 2016], ["total", #<BigDecimal:7fcfac778098,'0.1032E4',9(18)>], ["updated_at", 2016-09-02 17:02:33 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fcfac760d58,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fcfac760c68,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fcfaf808d48,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fcfaf808c58,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fcfad7e6bc8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fcfad7e6ad8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fcfac731508,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fcfac731418,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:02:33 UTC], ["updated_at", 2016-09-02 17:02:33 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fcfac7224b8,'0.4064E4',9(18)>], ["updated_at", 2016-09-02 17:02:33 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (3.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7ff6a2a9f718,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff6a6399848,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ff6a62ab350,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7ff6a62ab260,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7ff6a628bc80,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7ff6a628bbe0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ff6a6853708,'0.18E4',9(18)>], ["updated_at", 2016-09-02 17:03:31 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7ff6a3113f40,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7ff6a3113e28,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ff6a3100c88,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 17:03:31 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7ff6a30fb940,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff6a30fb8a0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7ff6a622a688,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff6a622a5c0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7ff6a68297f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ff6a6829728,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7ff6a6813d60,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7ff6a6813cc0,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7ff6a3ff0a90,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 17:03:31 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7ff6a62103f0,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7ff6a6210300,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ff6a3fd1fa0,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 17:03:31 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ff6a3f90e10,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7ff6a3f90d20,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ff6a619b140,'0.1E4',9(18)>], ["updated_at", 2016-09-02 17:03:31 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Tue, 09 Aug 2016], ["unit", "天"], ["total", #<BigDecimal:7ff6a6170b20,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7ff6a6170a08,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Tue, 09 Aug 2016], ["total", #<BigDecimal:7ff6a3f6ba48,'0.1032E4',9(18)>], ["updated_at", 2016-09-02 17:03:31 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ff6a3f48778,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7ff6a3f48660,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7ff6a6168880,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7ff6a6168790,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7ff6a3f39f20,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7ff6a3f39e30,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7ff6a613bd80,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7ff6a613bbf0,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:03:31 UTC], ["updated_at", 2016-09-02 17:03:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7ff6a6128ff0,'0.4064E4',9(18)>], ["updated_at", 2016-09-02 17:03:31 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
InvoiceTest: test_generate_lineitems
------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:03:44 UTC], ["updated_at", 2016-09-02 17:03:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:03:44 UTC], ["updated_at", 2016-09-02 17:03:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb7988b5c48,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb7988b51f8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:03:44 UTC], ["updated_at", 2016-09-02 17:03:44 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fb79d222e30,'0.1E4',9(18)>], ["updated_at", 2016-09-02 17:03:44 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Tue, 09 Aug 2016], ["unit", "天"], ["total", #<BigDecimal:7fb79d19aad0,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fb79d19a9e0,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:03:44 UTC], ["updated_at", 2016-09-02 17:03:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Tue, 09 Aug 2016], ["total", #<BigDecimal:7fb79ca7b308,'0.1032E4',9(18)>], ["updated_at", 2016-09-02 17:03:44 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb79a1d30e0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb79a1d2ff0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:03:44 UTC], ["updated_at", 2016-09-02 17:03:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fb79d17a2a8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb79d17a190,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:03:44 UTC], ["updated_at", 2016-09-02 17:03:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fb79d160f38,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb79d160e20,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:03:44 UTC], ["updated_at", 2016-09-02 17:03:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fb7991e8540,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fb7991e8428,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:03:44 UTC], ["updated_at", 2016-09-02 17:03:44 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fb79ca6a7b0,'0.4064E4',9(18)>], ["updated_at", 2016-09-02 17:03:44 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.3ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Tue, 09 Aug 2016], ["unit", "天"], ["total", #<BigDecimal:7f9a3a82d058,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7f9a3a827e78,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Tue, 09 Aug 2016], ["total", #<BigDecimal:7f9a3b9cbcd8,'0.32E2',9(18)>], ["updated_at", 2016-09-02 17:14:24 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f9a3b6e4600,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f9a3b6e4510,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f9a3ee0f788,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f9a3ee0f620,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f9a3edf65f8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f9a3edf6508,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7f9a3c911a58,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7f9a3c911968,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7f9a3c8fbf00,'0.3032E4',9(18)>], ["updated_at", 2016-09-02 17:14:24 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f9a3eddf5d8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f9a3eddf4e8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f9a3b6cd3b0,'0.1E4',9(18)>], ["updated_at", 2016-09-02 17:14:24 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (1.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7f9a3b64d318,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f9a3b6458e8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f9a3eccd208,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f9a3eccd168,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f9a3ecb7bd8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f9a3ecb7b38,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f9a3eca5b90,'0.18E4',9(18)>], ["updated_at", 2016-09-02 17:14:24 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7f9a3ec77ba0,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f9a3ec77b00,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f9a3ec66918,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 17:14:24 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f9a3b9419e8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9a3b941948,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f9a3ec44cc8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9a3ec44c28,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f9a3ec27d08,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9a3ec27c68,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7f9a3b5f6810,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7f9a3b5f6770,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7f9a3ec17d40,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 17:14:24 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7f9a3ebcfce8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f9a3ebcfc48,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 17:14:24 UTC], ["updated_at", 2016-09-02 17:14:24 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f9a3ebbd8b8,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 17:14:24 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7faf8a83c480,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7faf8a8374f8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf8e8b8ec8,'0.1E4',9(18)>], ["updated_at", 2016-09-02 17:15:11 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7faf8e881ef0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7faf8e881e00,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7faf8e870f10,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7faf8e870df8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7faf8e420028,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7faf8e4237c8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7faf8e403568,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7faf8e403478,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7faf8e859860,'0.3032E4',9(18)>], ["updated_at", 2016-09-02 17:15:11 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7faf8e839740,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7faf8e839650,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7faf8e820240,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7faf8e820150,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7faf8e811e98,'0.1032E4',9(18)>], ["updated_at", 2016-09-02 17:15:11 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7faf8af65590,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7faf8e349fc8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7faf8e2c0a70,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7faf8e2c09d0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7faf8e2aa068,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7faf8e2a9f78,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf8e298368,'0.18E4',9(18)>], ["updated_at", 2016-09-02 17:15:11 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7faf8aeff6c8,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7faf8aeff600,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf8e28a678,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 17:15:11 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7faf8e260b48,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faf8e260aa8,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7faf8b1efdb0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faf8b1efd10,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7faf8aec6940,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7faf8aec68a0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7faf8a0d2c30,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7faf8a0d2b90,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7faf8e24be00,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 17:15:11 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7faf8ae8d820,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7faf8ae8d780,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 17:15:11 UTC], ["updated_at", 2016-09-02 17:15:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7faf8e22a5c0,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 17:15:11 UTC], ["id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.9ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb84bf17e98,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb84bf17d80,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fb84bf07750,'0.1E4',9(18)>], ["updated_at", 2016-09-02 17:27:46 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb84be7a878,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb84be7a5f8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fb84c8ec838,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fb84c8ec680,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fb84be41cd0,'0.1032E4',9(18)>], ["updated_at", 2016-09-02 17:27:46 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (1.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb84c4944c0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb84c494358,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fb84bdb13b0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb84bdb11f8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fb84bd78f10,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb84bd78ce0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fb84d121238,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fb84d121148,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fb84bd51528,'0.3032E4',9(18)>], ["updated_at", 2016-09-02 17:27:46 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fb84bcc1e50,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb84bc98168,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb84c8cff80,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fb84c8cfdf0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fb84c3dd950,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fb84c3dd860,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fb84bba2f88,'0.18E4',9(18)>], ["updated_at", 2016-09-02 17:27:46 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fb84bb60c00,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fb84bb60b60,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fb84c3c5ee0,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 17:27:46 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fb84bb10b88,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb84bb10ac0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fb84baf9230,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb84baf9168,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fb84bad31e8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb84bad3148,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fb84bab2178,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fb84bab2e98,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fb84ba5be40,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 17:27:46 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fb84c2ad210,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fb84c2ad120,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 17:27:46 UTC], ["updated_at", 2016-09-02 17:27:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fb84c245e58,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 17:27:46 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 17:29:04 UTC], ["updated_at", 2016-09-02 17:29:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fe7eb7aa1e0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:29:04 UTC], ["updated_at", 2016-09-02 17:29:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe7eb790650,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:29:04 UTC], ["updated_at", 2016-09-02 17:29:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:29:04 UTC], ["updated_at", 2016-09-02 17:29:04 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe7ead7cf38,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fe7ead7ce98,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:04 UTC], ["updated_at", 2016-09-02 17:29:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fe7ead64500,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fe7ead64438,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:04 UTC], ["updated_at", 2016-09-02 17:29:04 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fe7ead3d950,'0.18E4',9(18)>], ["updated_at", 2016-09-02 17:29:04 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:29:04 UTC], ["updated_at", 2016-09-02 17:29:04 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fe7eb58eb40,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fe7eb58ea28,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:29:04 UTC], ["updated_at", 2016-09-02 17:29:04 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fe7eb56cd10,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 17:29:04 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fe7eb527990,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe7eb527850,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:29:04 UTC], ["updated_at", 2016-09-02 17:29:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fe7eaccd330,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe7eaccd218,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:29:04 UTC], ["updated_at", 2016-09-02 17:29:04 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fe7eacb7670,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe7eacb74e0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:29:04 UTC], ["updated_at", 2016-09-02 17:29:04 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fe7eb4fc588,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fe7eb4ff058,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:29:04 UTC], ["updated_at", 2016-09-02 17:29:04 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fe7eac7d808,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 17:29:04 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:29:04 UTC], ["updated_at", 2016-09-02 17:29:04 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fe7eac46a60,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fe7eac46998,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 17:29:04 UTC], ["updated_at", 2016-09-02 17:29:04 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fe7eac37998,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 17:29:04 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:29:04 UTC], ["updated_at", 2016-09-02 17:29:04 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:29:05 UTC], ["updated_at", 2016-09-02 17:29:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe7ec09afc0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fe7ec09ae08,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:05 UTC], ["updated_at", 2016-09-02 17:29:05 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fe7eb43f5f0,'0.1E4',9(18)>], ["updated_at", 2016-09-02 17:29:05 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:29:05 UTC], ["updated_at", 2016-09-02 17:29:05 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:29:05 UTC], ["updated_at", 2016-09-02 17:29:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe7eabbc9a0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fe7eabbc860,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:05 UTC], ["updated_at", 2016-09-02 17:29:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fe7eb3e6db0,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fe7eb3e6ba8,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:05 UTC], ["updated_at", 2016-09-02 17:29:05 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fe7eb3d54c0,'0.1032E4',9(18)>], ["updated_at", 2016-09-02 17:29:05 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:29:05 UTC], ["updated_at", 2016-09-02 17:29:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:29:05 UTC], ["updated_at", 2016-09-02 17:29:05 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe7eb3651c0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fe7eb365030,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:05 UTC], ["updated_at", 2016-09-02 17:29:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fe7eb31c6f0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fe7eb31c600,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:05 UTC], ["updated_at", 2016-09-02 17:29:05 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fe7eab4d168,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fe7eab4cc40,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:05 UTC], ["updated_at", 2016-09-02 17:29:05 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fe7eaae5ae0,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fe7eaae5400,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:05 UTC], ["updated_at", 2016-09-02 17:29:05 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fe7eb2d56d8,'0.3032E4',9(18)>], ["updated_at", 2016-09-02 17:29:05 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7ffe3b457e28,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ffe3da69530,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ffe3d960918,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7ffe3d960828,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7ffe3d9107b0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7ffe3d910670,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ffe3d8ea470,'0.18E4',9(18)>], ["updated_at", 2016-09-02 17:29:52 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7ffe3d89b690,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7ffe3d89b5f0,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ffe3d87af80,'0.2959E2',18(27)>], ["updated_at", 2016-09-02 17:29:52 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7ffe3d82a170,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffe3d82a008,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7ffe3afea1b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffe3afea110,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7ffe3afb9358,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7ffe3afb91a0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7ffe3af61310,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7ffe3af61018,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7ffe3af23a60,'0.366904E4',18(27)>], ["updated_at", 2016-09-02 17:29:52 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7ffe3ae895f0,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7ffe3ae894d8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ffe3ae5bc40,'0.118356E4',18(27)>], ["updated_at", 2016-09-02 17:29:52 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ffe3adf85c8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7ffe3adf8460,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ffe3add3d18,'0.1E4',9(18)>], ["updated_at", 2016-09-02 17:29:52 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ffe3ad39d80,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7ffe3ad39c18,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7ffe3ad0bef8,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7ffe3ad0b520,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7ffe3ace8660,'0.1032E4',9(18)>], ["updated_at", 2016-09-02 17:29:52 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ffe3ac63eb0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7ffe3ac63c30,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7ffe3ac33eb8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7ffe3ac33da0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7ffe3ac09960,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7ffe3ac09780,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7ffe3abca300,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7ffe3abc9d38,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-02 17:29:52 UTC], ["updated_at", 2016-09-02 17:29:52 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7ffe3ab4b730,'0.3032E4',9(18)>], ["updated_at", 2016-09-02 17:29:52 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 16:38:27 UTC], ["updated_at", 2016-09-04 16:38:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (3.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fa281522440,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:38:27 UTC], ["updated_at", 2016-09-04 16:38:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa281518a80,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:38:27 UTC], ["updated_at", 2016-09-04 16:38:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:38:27 UTC], ["updated_at", 2016-09-04 16:38:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:38:27 UTC], ["updated_at", 2016-09-04 16:38:27 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:38:27 UTC], ["updated_at", 2016-09-04 16:38:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:38:27 UTC], ["updated_at", 2016-09-04 16:38:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:38:27 UTC], ["updated_at", 2016-09-04 16:38:27 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:38:27 UTC], ["updated_at", 2016-09-04 16:38:27 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:38:27 UTC], ["updated_at", 2016-09-04 16:38:27 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 16:39:54 UTC], ["updated_at", 2016-09-04 16:39:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fb9f3d43f50,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:39:54 UTC], ["updated_at", 2016-09-04 16:39:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb9f68194a0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:39:54 UTC], ["updated_at", 2016-09-04 16:39:54 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:39:54 UTC], ["updated_at", 2016-09-04 16:39:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:39:54 UTC], ["updated_at", 2016-09-04 16:39:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:39:54 UTC], ["updated_at", 2016-09-04 16:39:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:39:54 UTC], ["updated_at", 2016-09-04 16:39:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:39:54 UTC], ["updated_at", 2016-09-04 16:39:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:39:54 UTC], ["updated_at", 2016-09-04 16:39:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:39:54 UTC], ["updated_at", 2016-09-04 16:39:54 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:40:36 UTC], ["updated_at", 2016-09-04 16:40:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:40:36 UTC], ["updated_at", 2016-09-04 16:40:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:40:36 UTC], ["updated_at", 2016-09-04 16:40:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:40:36 UTC], ["updated_at", 2016-09-04 16:40:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:40:36 UTC], ["updated_at", 2016-09-04 16:40:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:40:36 UTC], ["updated_at", 2016-09-04 16:40:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 16:40:36 UTC], ["updated_at", 2016-09-04 16:40:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7ff8e2c801d0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:40:36 UTC], ["updated_at", 2016-09-04 16:40:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff8e2c5f778,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:40:36 UTC], ["updated_at", 2016-09-04 16:40:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:40:36 UTC], ["updated_at", 2016-09-04 16:40:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:41:29 UTC], ["updated_at", 2016-09-04 16:41:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:41:29 UTC], ["updated_at", 2016-09-04 16:41:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:41:29 UTC], ["updated_at", 2016-09-04 16:41:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:41:29 UTC], ["updated_at", 2016-09-04 16:41:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:41:29 UTC], ["updated_at", 2016-09-04 16:41:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:41:29 UTC], ["updated_at", 2016-09-04 16:41:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 16:41:29 UTC], ["updated_at", 2016-09-04 16:41:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7ff3845b44e0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:41:29 UTC], ["updated_at", 2016-09-04 16:41:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff384595770,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:41:29 UTC], ["updated_at", 2016-09-04 16:41:29 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:41:29 UTC], ["updated_at", 2016-09-04 16:41:29 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:42:23 UTC], ["updated_at", 2016-09-04 16:42:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:42:23 UTC], ["updated_at", 2016-09-04 16:42:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:42:23 UTC], ["updated_at", 2016-09-04 16:42:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:42:23 UTC], ["updated_at", 2016-09-04 16:42:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:42:23 UTC], ["updated_at", 2016-09-04 16:42:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:42:23 UTC], ["updated_at", 2016-09-04 16:42:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 16:42:23 UTC], ["updated_at", 2016-09-04 16:42:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fa2be113038,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:42:23 UTC], ["updated_at", 2016-09-04 16:42:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa2bc4187d0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:42:23 UTC], ["updated_at", 2016-09-04 16:42:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:42:23 UTC], ["updated_at", 2016-09-04 16:42:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 16:48:38 UTC], ["updated_at", 2016-09-04 16:48:38 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (3.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7f8f2e0f0ba8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:48:38 UTC], ["updated_at", 2016-09-04 16:48:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f8f2e0d35d0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:48:38 UTC], ["updated_at", 2016-09-04 16:48:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:48:38 UTC], ["updated_at", 2016-09-04 16:48:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:48:38 UTC], ["updated_at", 2016-09-04 16:48:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:48:38 UTC], ["updated_at", 2016-09-04 16:48:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:48:38 UTC], ["updated_at", 2016-09-04 16:48:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:48:38 UTC], ["updated_at", 2016-09-04 16:48:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:48:38 UTC], ["updated_at", 2016-09-04 16:48:38 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:48:38 UTC], ["updated_at", 2016-09-04 16:48:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:49:18 UTC], ["updated_at", 2016-09-04 16:49:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:49:18 UTC], ["updated_at", 2016-09-04 16:49:18 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:49:18 UTC], ["updated_at", 2016-09-04 16:49:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:49:18 UTC], ["updated_at", 2016-09-04 16:49:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:49:18 UTC], ["updated_at", 2016-09-04 16:49:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:49:18 UTC], ["updated_at", 2016-09-04 16:49:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 16:49:18 UTC], ["updated_at", 2016-09-04 16:49:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.5ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fb94a0b2a38,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:49:18 UTC], ["updated_at", 2016-09-04 16:49:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb94e3ebcf0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:49:18 UTC], ["updated_at", 2016-09-04 16:49:18 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:49:18 UTC], ["updated_at", 2016-09-04 16:49:18 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:52:34 UTC], ["updated_at", 2016-09-04 16:52:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:52:34 UTC], ["updated_at", 2016-09-04 16:52:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:52:34 UTC], ["updated_at", 2016-09-04 16:52:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:52:34 UTC], ["updated_at", 2016-09-04 16:52:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:52:34 UTC], ["updated_at", 2016-09-04 16:52:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:52:34 UTC], ["updated_at", 2016-09-04 16:52:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 16:52:34 UTC], ["updated_at", 2016-09-04 16:52:34 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7faf3b93ed28,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:52:34 UTC], ["updated_at", 2016-09-04 16:52:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7faf3aae3850,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:52:34 UTC], ["updated_at", 2016-09-04 16:52:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:52:34 UTC], ["updated_at", 2016-09-04 16:52:34 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:58:40 UTC], ["updated_at", 2016-09-04 16:58:40 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:58:40 UTC], ["updated_at", 2016-09-04 16:58:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:58:40 UTC], ["updated_at", 2016-09-04 16:58:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:58:40 UTC], ["updated_at", 2016-09-04 16:58:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 16:58:40 UTC], ["updated_at", 2016-09-04 16:58:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:58:40 UTC], ["updated_at", 2016-09-04 16:58:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 16:58:40 UTC], ["updated_at", 2016-09-04 16:58:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fd313c7f770,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:58:40 UTC], ["updated_at", 2016-09-04 16:58:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd3160310b0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 16:58:40 UTC], ["updated_at", 2016-09-04 16:58:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 16:58:40 UTC], ["updated_at", 2016-09-04 16:58:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:07:12 UTC], ["updated_at", 2016-09-04 17:07:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.5ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:07:12 UTC], ["updated_at", 2016-09-04 17:07:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:07:13 UTC], ["updated_at", 2016-09-04 17:07:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:07:13 UTC], ["updated_at", 2016-09-04 17:07:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:07:13 UTC], ["updated_at", 2016-09-04 17:07:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:07:13 UTC], ["updated_at", 2016-09-04 17:07:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 17:07:13 UTC], ["updated_at", 2016-09-04 17:07:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fd88f020098,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:07:13 UTC], ["updated_at", 2016-09-04 17:07:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd88bff1890,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:07:13 UTC], ["updated_at", 2016-09-04 17:07:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:07:13 UTC], ["updated_at", 2016-09-04 17:07:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("invoice_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["invoice_id", "1"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fc5f4697050,'0.0',9(18)>], ["updated_at", 2016-09-04 17:07:42 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("invoice_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["invoice_id", "1"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("invoice_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["invoice_id", "1"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("invoice_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["invoice_id", "1"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("invoice_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["invoice_id", "1"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fc5f4d69068,'0.0',9(18)>], ["updated_at", 2016-09-04 17:07:42 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fc5f4d09438,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fc5f4586418,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("invoice_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["invoice_id", "1"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("invoice_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["invoice_id", "1"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fc5f6086830,'0.0',9(18)>], ["updated_at", 2016-09-04 17:07:42 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("invoice_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["invoice_id", "2"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fc5f43de610,'0.0',9(18)>], ["updated_at", 2016-09-04 17:07:42 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("invoice_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["invoice_id", "2"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("invoice_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["invoice_id", "2"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("invoice_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["invoice_id", "2"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("invoice_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["invoice_id", "2"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["updated_at", 2016-09-04 17:07:42 UTC], ["id", 2]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("invoice_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["invoice_id", "3"], ["created_at", 2016-09-04 17:07:42 UTC], ["updated_at", 2016-09-04 17:07:42 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fc5f42d6b00,'0.0',9(18)>], ["updated_at", 2016-09-04 17:07:42 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 17:08:32 UTC], ["updated_at", 2016-09-04 17:08:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fb70d08e730,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:08:32 UTC], ["updated_at", 2016-09-04 17:08:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb70d085b08,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:08:32 UTC], ["updated_at", 2016-09-04 17:08:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:08:32 UTC], ["updated_at", 2016-09-04 17:08:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:08:32 UTC], ["updated_at", 2016-09-04 17:08:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:08:32 UTC], ["updated_at", 2016-09-04 17:08:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:08:32 UTC], ["updated_at", 2016-09-04 17:08:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:08:32 UTC], ["updated_at", 2016-09-04 17:08:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:08:32 UTC], ["updated_at", 2016-09-04 17:08:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:08:32 UTC], ["updated_at", 2016-09-04 17:08:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 17:09:00 UTC], ["updated_at", 2016-09-04 17:09:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7ffa5c874638,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:09:00 UTC], ["updated_at", 2016-09-04 17:09:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ffa5c857038,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:09:00 UTC], ["updated_at", 2016-09-04 17:09:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:09:00 UTC], ["updated_at", 2016-09-04 17:09:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:09:00 UTC], ["updated_at", 2016-09-04 17:09:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:09:00 UTC], ["updated_at", 2016-09-04 17:09:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:09:00 UTC], ["updated_at", 2016-09-04 17:09:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:09:00 UTC], ["updated_at", 2016-09-04 17:09:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:09:00 UTC], ["updated_at", 2016-09-04 17:09:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:09:00 UTC], ["updated_at", 2016-09-04 17:09:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 17:11:16 UTC], ["updated_at", 2016-09-04 17:11:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7f903bff1b30,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:11:16 UTC], ["updated_at", 2016-09-04 17:11:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f903c062380,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:11:16 UTC], ["updated_at", 2016-09-04 17:11:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:11:16 UTC], ["updated_at", 2016-09-04 17:11:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:11:16 UTC], ["updated_at", 2016-09-04 17:11:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:11:16 UTC], ["updated_at", 2016-09-04 17:11:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:11:16 UTC], ["updated_at", 2016-09-04 17:11:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:11:16 UTC], ["updated_at", 2016-09-04 17:11:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:11:17 UTC], ["updated_at", 2016-09-04 17:11:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:11:17 UTC], ["updated_at", 2016-09-04 17:11:17 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 17:11:38 UTC], ["updated_at", 2016-09-04 17:11:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7f9455a0b068,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:11:38 UTC], ["updated_at", 2016-09-04 17:11:38 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f94559f2d88,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:11:38 UTC], ["updated_at", 2016-09-04 17:11:38 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:11:39 UTC], ["updated_at", 2016-09-04 17:11:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:11:39 UTC], ["updated_at", 2016-09-04 17:11:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:11:39 UTC], ["updated_at", 2016-09-04 17:11:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:11:39 UTC], ["updated_at", 2016-09-04 17:11:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:11:39 UTC], ["updated_at", 2016-09-04 17:11:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:11:39 UTC], ["updated_at", 2016-09-04 17:11:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:11:39 UTC], ["updated_at", 2016-09-04 17:11:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:12:26 UTC], ["updated_at", 2016-09-04 17:12:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:12:26 UTC], ["updated_at", 2016-09-04 17:12:26 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 17:29:49 UTC], ["updated_at", 2016-09-04 17:29:49 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fe49db6ce28,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:29:49 UTC], ["updated_at", 2016-09-04 17:29:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe49db554f8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:29:49 UTC], ["updated_at", 2016-09-04 17:29:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:29:49 UTC], ["updated_at", 2016-09-04 17:29:49 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:32:03 UTC], ["updated_at", 2016-09-04 17:32:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:32:03 UTC], ["updated_at", 2016-09-04 17:32:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:32:13 UTC], ["updated_at", 2016-09-04 17:32:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:32:13 UTC], ["updated_at", 2016-09-04 17:32:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:37:27 UTC], ["updated_at", 2016-09-04 17:37:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.6ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:37:27 UTC], ["updated_at", 2016-09-04 17:37:27 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:37:32 UTC], ["updated_at", 2016-09-04 17:37:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:37:32 UTC], ["updated_at", 2016-09-04 17:37:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fe534e86dd8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe537868520,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe535676700,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fe535676200,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fe5340a15b0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fe5340a14e8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fe53564e020,'0.18E4',9(18)>], ["updated_at", 2016-09-04 17:39:59 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe5355448c8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fe5355447b0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fe5355263a0,'0.1E4',9(18)>], ["updated_at", 2016-09-04 17:39:59 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe534cc5670,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fe534cc5468,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe535454f30,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fe535454e18,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fe53542ec40,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fe53542eb28,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fe5354143e0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fe5354142a0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:39:59 UTC], ["updated_at", 2016-09-04 17:39:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7feb1506bb40,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7feb15058720,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7feb11ebbcd0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7feb11ebbc08,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7feb11ea10d8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7feb11ea1010,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7feb11e91b10,'0.18E4',9(18)>], ["updated_at", 2016-09-04 17:40:32 UTC], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7feb11de2d40,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7feb11de2598,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7feb11dc0a38,'0.1E4',9(18)>], ["updated_at", 2016-09-04 17:40:32 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7feb12d0f228,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7feb12d0f138,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7feb11cf3e70,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7feb11cf3d08,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7feb11cda880,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7feb11cda6a0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7feb12cb5278,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7feb12cb5110,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:40:32 UTC], ["updated_at", 2016-09-04 17:40:32 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f94134c6720,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f94134c6608,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f94134addd8,'0.1E4',9(18)>], ["updated_at", 2016-09-04 17:40:53 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f94129fec48,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f94129feb58,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f94129dfeb0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f94129dfd98,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f941168ad38,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f941168aba8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7f9413455660,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7f9413455520,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7f9411652118,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 17:40:53 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f9413406560,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f9413406470,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f94133fd1b8,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7f94133fcfd8,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7f94133dd2c8,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 17:40:53 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7f94133bd978,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f941185af28,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f94128ff4f0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f94128ff388,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f94128e4ad8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f94128e4a38,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f94128c4eb8,'0.18E4',9(18)>], ["updated_at", 2016-09-04 17:40:53 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7f94115181d0,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f9411518130,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f94114f9618,'0.2959E2',18(27)>], ["updated_at", 2016-09-04 17:40:53 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f9413346300,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9413346210,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f941289f000,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f941289ef38,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f9412886988,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f94128867f8,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7f94114a33a8,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7f94114a3268,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7f9411850b68,'0.366904E4',18(27)>], ["updated_at", 2016-09-04 17:40:53 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7f94132fc778,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f94132fc6b0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-04 17:40:53 UTC], ["updated_at", 2016-09-04 17:40:53 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f94132cddb0,'0.118356E4',18(27)>], ["updated_at", 2016-09-04 17:40:53 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 17:55:28 UTC], ["updated_at", 2016-09-04 17:55:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fe159dd6a70,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:55:28 UTC], ["updated_at", 2016-09-04 17:55:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe159dbe858,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:55:28 UTC], ["updated_at", 2016-09-04 17:55:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:55:28 UTC], ["updated_at", 2016-09-04 17:55:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:55:28 UTC], ["updated_at", 2016-09-04 17:55:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:55:28 UTC], ["updated_at", 2016-09-04 17:55:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:55:28 UTC], ["updated_at", 2016-09-04 17:55:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:55:28 UTC], ["updated_at", 2016-09-04 17:55:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:55:28 UTC], ["updated_at", 2016-09-04 17:55:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:55:28 UTC], ["updated_at", 2016-09-04 17:55:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:56:00 UTC], ["updated_at", 2016-09-04 17:56:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:56:00 UTC], ["updated_at", 2016-09-04 17:56:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:56:00 UTC], ["updated_at", 2016-09-04 17:56:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:56:00 UTC], ["updated_at", 2016-09-04 17:56:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:56:00 UTC], ["updated_at", 2016-09-04 17:56:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:56:00 UTC], ["updated_at", 2016-09-04 17:56:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 17:56:00 UTC], ["updated_at", 2016-09-04 17:56:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fbea36c3478,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:56:00 UTC], ["updated_at", 2016-09-04 17:56:00 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fbea3d41778,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:56:00 UTC], ["updated_at", 2016-09-04 17:56:00 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.5ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:56:01 UTC], ["updated_at", 2016-09-04 17:56:01 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.6ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd532334168,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd532334050,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd533943aa8,'0.1E4',9(18)>], ["updated_at", 2016-09-04 17:57:07 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd533928de8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd533928ca8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fd533912a20,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd533912930,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fd533901658,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd533901540,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fd5338f1230,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fd5338f1140,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fd5338db138,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 17:57:07 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd533891880,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd533891790,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fd533881cc8,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fd533881bd8,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fd5338793e8,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 17:57:07 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.3ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fd532265930,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd5316d58e0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.3ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd5315cfe78,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd5315cfd38,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fd5315b4420,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd5315b4380,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd53158fad0,'0.18E4',9(18)>], ["updated_at", 2016-09-04 17:57:07 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fd53153f058,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fd53153ef18,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd5322075b0,'0.2959E2',18(27)>], ["updated_at", 2016-09-04 17:57:07 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fd53150f6f0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd53150f628,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fd5321c25a0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd5321c2370,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fd530841fb8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd530841ec8,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fd5321b8ca8,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fd5321b8be0,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fd5314b6d70,'0.366904E4',18(27)>], ["updated_at", 2016-09-04 17:57:07 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fd531435c48,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fd53142eee8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-04 17:57:07 UTC], ["updated_at", 2016-09-04 17:57:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd5313cf8f8,'0.118356E4',18(27)>], ["updated_at", 2016-09-04 17:57:07 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.4ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fcb0d039f00,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fcb0d022148,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fcb0abdab28,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fcb0abdaa60,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fcb0abb8ac8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fcb0abb89d8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fcb0ab93908,'0.18E4',9(18)>], ["updated_at", 2016-09-04 17:57:22 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fcb0ab4b8b0,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fcb0ab4b798,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fcb0ab3a128,'0.2959E2',18(27)>], ["updated_at", 2016-09-04 17:57:22 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fcb09f42528,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcb09f42488,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fcb09f2ba80,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcb09f2b990,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fcb0aaf2850,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fcb0aaf2508,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fcb0aacaaa8,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fcb0aaca918,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fcb0aabb0d0,'0.366904E4',18(27)>], ["updated_at", 2016-09-04 17:57:22 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fcb0aa785f0,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fcb0aa78528,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fcb09ea3a90,'0.118356E4',18(27)>], ["updated_at", 2016-09-04 17:57:22 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fcb09e60f10,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fcb09e60bc8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fcb0aa32820,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fcb0aa326b8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fcb09e51ba0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fcb09e51a88,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fcb09e29768,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fcb09e29510,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fcb09de12b0,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 17:57:22 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fcb09dab408,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fcb09dab2c8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fcb0a9c0388,'0.1E4',9(18)>], ["updated_at", 2016-09-04 17:57:22 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fcb0a980878,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fcb0a9806c0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fcb0a958e68,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fcb0a958c38,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 17:57:22 UTC], ["updated_at", 2016-09-04 17:57:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fcb0a942b68,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 17:57:22 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:01:11 UTC], ["updated_at", 2016-09-04 18:01:11 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f9f5b699248,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f9f5b6990e0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f9f5b688ba0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f9f5b688a88,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f9f5b678e58,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f9f5b678d68,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7f9f5b6682d8,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7f9f5b6681e8,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7f9f5b6588d8,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 18:01:12 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f9f5a5fd088,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f9f5a5fcf98,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f9f5b6135a8,'0.1E4',9(18)>], ["updated_at", 2016-09-04 18:01:12 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f9f5b5fa7b0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f9f5b5fa698,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f9f5b5e9578,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7f9f5b5e9488,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7f9f5b5d1838,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 18:01:12 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7f9f5a593cf0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f9f5a569950,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f9f5a95aac8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f9f5a95aa00,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f9f5a4c0558,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f9f5a4c0490,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f9f5b3a2990,'0.18E4',9(18)>], ["updated_at", 2016-09-04 18:01:12 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7f9f5b8b9500,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f9f5b8b9398,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f9f5a482780,'0.2959E2',18(27)>], ["updated_at", 2016-09-04 18:01:12 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f9f5b3795b8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9f5b379108,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f9f5a422150,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9f5a4220b0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f9f5b3605b8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9f5b360518,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7f9f5a933b58,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7f9f5a933ab8,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7f9f5a3f24a0,'0.366904E4',18(27)>], ["updated_at", 2016-09-04 18:01:12 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7f9f5b310ec8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f9f5b310ce8,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-04 18:01:12 UTC], ["updated_at", 2016-09-04 18:01:12 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f9f5b2f8bc0,'0.118356E4',18(27)>], ["updated_at", 2016-09-04 18:01:12 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd5f7029868,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd5f7029728,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fd5f7018ce8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd5f7018bf8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fd5f7008460,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd5f7008370,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fd5f3fedcd0,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fd5f3fedbe0,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fd5f3fd7d90,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 18:02:07 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (3.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd5f6bec138,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd5f6becde0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fd5f6bd7b48,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fd5f6bd7a30,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fd5f6bc5b50,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 18:02:07 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd5f6b7cef0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd5f6b7ce00,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd5f3fadbf8,'0.1E4',9(18)>], ["updated_at", 2016-09-04 18:02:07 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fd5f6b6e940,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd5f3f564c0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd5f6adf1f0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd5f6adf150,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fd5f6aceb48,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd5f6aceaa8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd5f6aaff18,'0.18E4',9(18)>], ["updated_at", 2016-09-04 18:02:07 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fd5f6a7edf0,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fd5f6a7ed50,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd5f3f2d278,'0.2959E2',18(27)>], ["updated_at", 2016-09-04 18:02:07 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fd5f3f1e278,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd5f3f1e1d8,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fd5f3f0e6e8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd5f3f0e648,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fd5f2a12b40,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd5f2a12aa0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fd5f2a021c8,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fd5f2a02128,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fd5f6a47828,'0.366904E4',18(27)>], ["updated_at", 2016-09-04 18:02:07 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fd5f6a166b0,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fd5f6a16610,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-04 18:02:07 UTC], ["updated_at", 2016-09-04 18:02:07 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd5f6a05360,'0.118356E4',18(27)>], ["updated_at", 2016-09-04 18:02:07 UTC], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fecf3ff2778,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fecf3ff2638,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fecf3fd94a8,'0.1E4',9(18)>], ["updated_at", 2016-09-04 18:17:13 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fecf5645c00,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fecf5645b10,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fecf5634a18,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fecf5634900,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fecf3fb0530,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fecf3fb0440,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fecf5617e68,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fecf5617d78,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fecf3fa9be0,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 18:17:13 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fecf55dccc8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fecf55dcbd8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fecf55ccf08,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fecf55ccdf0,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fecf55b7810,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 18:17:13 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fecf3f3b578,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fecf3f194f0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:17:13 UTC], ["updated_at", 2016-09-04 18:17:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd35403a2a8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd35403a190,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fd352551e78,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fd352551d88,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fd3525390f8,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 18:20:03 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd352520f08,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd352520e18,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd354003a50,'0.1E4',9(18)>], ["updated_at", 2016-09-04 18:20:03 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd3517cb8d0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd3517cb7e0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fd3517bb5e8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd3517bb4f8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fd3517ab0f8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fd3517aaf90,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fd351799c40,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fd351799b50,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fd351781938,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 18:20:03 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fd3515dcec0,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fd3515bf780,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fd3514c7030,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd3514c6ba8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fd3523fb268,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fd3523fb178,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd3523eb020,'0.18E4',9(18)>], ["updated_at", 2016-09-04 18:20:03 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fd351464d40,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fd351464c50,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd35143c048,'0.2959E2',18(27)>], ["updated_at", 2016-09-04 18:20:03 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fd3523c9100,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd3523c9060,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fd3513ec980,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd3513ec8e0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fd3523b2a68,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fd3523b2950,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fd3523a00e8,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fd3523a0638,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fd3513ad9b0,'0.366904E4',18(27)>], ["updated_at", 2016-09-04 18:20:03 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fd35135f620,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fd35135f490,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-04 18:20:03 UTC], ["updated_at", 2016-09-04 18:20:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fd352350db8,'0.118356E4',18(27)>], ["updated_at", 2016-09-04 18:20:03 UTC], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:39:46 UTC], ["updated_at", 2016-09-04 18:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:39:46 UTC], ["updated_at", 2016-09-04 18:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fac2168bcb0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fac2168bb98,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:39:46 UTC], ["updated_at", 2016-09-04 18:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fac216703e8,'0.1E4',9(18)>], ["updated_at", 2016-09-04 18:39:46 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:39:46 UTC], ["updated_at", 2016-09-04 18:39:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:39:46 UTC], ["updated_at", 2016-09-04 18:39:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fac21e08768,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fac21e08678,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:39:46 UTC], ["updated_at", 2016-09-04 18:39:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fac216308b0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fac216307c0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:39:46 UTC], ["updated_at", 2016-09-04 18:39:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fac216203c0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fac216202d0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:39:46 UTC], ["updated_at", 2016-09-04 18:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fac2160b128,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fac2160afc0,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:39:46 UTC], ["updated_at", 2016-09-04 18:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fac215f1070,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 18:39:46 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:39:46 UTC], ["updated_at", 2016-09-04 18:39:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:39:46 UTC], ["updated_at", 2016-09-04 18:39:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fac215998e8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fac21599780,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:39:46 UTC], ["updated_at", 2016-09-04 18:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fac21572c70,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fac215729c8,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:39:46 UTC], ["updated_at", 2016-09-04 18:39:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fac21548790,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 18:39:46 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 18:39:46 UTC], ["updated_at", 2016-09-04 18:39:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fac21d8a138,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:39:46 UTC], ["updated_at", 2016-09-04 18:39:46 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fac214f9820,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:39:46 UTC], ["updated_at", 2016-09-04 18:39:46 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 18:40:40 UTC], ["updated_at", 2016-09-04 18:40:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (3.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fea10f40f40,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:40:40 UTC], ["updated_at", 2016-09-04 18:40:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fea10f323c8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:40:40 UTC], ["updated_at", 2016-09-04 18:40:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:40:40 UTC], ["updated_at", 2016-09-04 18:40:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:40:40 UTC], ["updated_at", 2016-09-04 18:40:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fea11573cf0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fea11573bd8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:40:40 UTC], ["updated_at", 2016-09-04 18:40:40 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fea1186ff80,'0.1E4',9(18)>], ["updated_at", 2016-09-04 18:40:40 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:40:40 UTC], ["updated_at", 2016-09-04 18:40:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:40:40 UTC], ["updated_at", 2016-09-04 18:40:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fea1185cfc0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fea1185c7a0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:40:40 UTC], ["updated_at", 2016-09-04 18:40:40 UTC]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fea114b8680,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fea114b8568,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:40:40 UTC], ["updated_at", 2016-09-04 18:40:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fea114a3438,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 18:40:40 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:40:40 UTC], ["updated_at", 2016-09-04 18:40:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:40:40 UTC], ["updated_at", 2016-09-04 18:40:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fea11440fe0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fea11440450,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:40:40 UTC], ["updated_at", 2016-09-04 18:40:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fea11419e68,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fea11419d50,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:40:40 UTC], ["updated_at", 2016-09-04 18:40:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fea1140a828,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fea1140a5d0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:40:40 UTC], ["updated_at", 2016-09-04 18:40:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fea113f2d40,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fea113f2bb0,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:40:40 UTC], ["updated_at", 2016-09-04 18:40:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fea10df5438,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 18:40:40 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f868d082c38,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f868d082af8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f868d071730,'0.1E4',9(18)>], ["updated_at", 2016-09-04 18:41:03 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f868ad52ce0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f868ad52bf0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f868ad422f0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f868ad42200,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f868d029bd8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f868d029ae8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7f868d021640,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7f868d021550,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7f868b08b3d0,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 18:41:03 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f868a7ca3b8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f868a7ca2a0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f868a7ba3f0,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7f868a7ba300,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7f868a347f98,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 18:41:03 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7f868a654790,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f868a6359d0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" IS NULL[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同1的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f868a50c158,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f868ac21ce0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f868ac21bf0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f868ac115e8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f868ac114f8,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" IS NULL[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同1的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["total", #<BigDecimal:7f868abfba18,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7f868a48ef00,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f868a48eac8,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f868abd0d18,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f868abd0c00,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f868abb2d68,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f868abb2bd8,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f868a425618,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f868a425500,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7f868a41c568,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7f868a41c450,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7f868a3f7f10,'0.366904E4',18(27)>], ["updated_at", 2016-09-04 18:41:03 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" IS NULL[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同1的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["total", #<BigDecimal:7f86898af8b0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7f868989e948,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f868989e858,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-04 18:41:03 UTC], ["updated_at", 2016-09-04 18:41:03 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:45:39 UTC], ["updated_at", 2016-09-04 18:45:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:45:39 UTC], ["updated_at", 2016-09-04 18:45:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f8ebb51bed0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f8ebb51bdb8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:45:39 UTC], ["updated_at", 2016-09-04 18:45:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f8ebd747bd0,'0.1E4',9(18)>], ["updated_at", 2016-09-04 18:45:39 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:45:39 UTC], ["updated_at", 2016-09-04 18:45:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:45:39 UTC], ["updated_at", 2016-09-04 18:45:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f8ebd704358,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f8ebd704268,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:45:39 UTC], ["updated_at", 2016-09-04 18:45:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f8ebb50bc38,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f8ebb50bb48,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:45:39 UTC], ["updated_at", 2016-09-04 18:45:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f8ebb502d68,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f8ebb502c78,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:45:39 UTC], ["updated_at", 2016-09-04 18:45:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7f8ebd6ef1d8,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7f8ebd6ef098,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:45:39 UTC], ["updated_at", 2016-09-04 18:45:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7f8ebd6dcfd8,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 18:45:39 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:45:39 UTC], ["updated_at", 2016-09-04 18:45:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:45:39 UTC], ["updated_at", 2016-09-04 18:45:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f8ebd6943a0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f8ebd6942b0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:45:39 UTC], ["updated_at", 2016-09-04 18:45:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f8ebd684068,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7f8ebb8c3fb0,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:45:39 UTC], ["updated_at", 2016-09-04 18:45:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7f8ebb8b2af8,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 18:45:39 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:45:49 UTC], ["updated_at", 2016-09-04 18:45:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:45:49 UTC], ["updated_at", 2016-09-04 18:45:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa48bcf2c68,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fa48bcf2b28,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:45:49 UTC], ["updated_at", 2016-09-04 18:45:49 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fa48af62800,'0.1E4',9(18)>], ["updated_at", 2016-09-04 18:45:49 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:45:50 UTC], ["updated_at", 2016-09-04 18:45:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:45:50 UTC], ["updated_at", 2016-09-04 18:45:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa48af215a8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fa48af21490,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:45:50 UTC], ["updated_at", 2016-09-04 18:45:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fa48bcc9ca0,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fa48bcc9bb0,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:45:50 UTC], ["updated_at", 2016-09-04 18:45:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fa48af105a0,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 18:45:50 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:45:50 UTC], ["updated_at", 2016-09-04 18:45:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:45:50 UTC], ["updated_at", 2016-09-04 18:45:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa48bcb3dd8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fa48bcb3ce8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:45:50 UTC], ["updated_at", 2016-09-04 18:45:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fa48bca3b90,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fa48bca3aa0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:45:50 UTC], ["updated_at", 2016-09-04 18:45:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fa48bc93790,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fa48bc936a0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:45:50 UTC], ["updated_at", 2016-09-04 18:45:50 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fa48bc82bc0,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fa48bc82ad0,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:45:50 UTC], ["updated_at", 2016-09-04 18:45:50 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fa48aed1e40,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 18:45:50 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fdbc8d31de0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fdbc8d31cc8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fdbcb999888,'0.1E4',9(18)>], ["updated_at", 2016-09-04 18:46:22 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fdbcb970c30,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fdbcb970b40,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fdbc8d091b0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fdbc8d090c0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fdbcb958ec8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fdbcb958d88,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fdbc8cf3978,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fdbc8cf3888,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fdbcb949a18,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 18:46:22 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fdbc8cc2e18,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fdbc8cc2d28,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fdbc8cab8a8,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fdbc8cab7b8,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fdbc8c996f8,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 18:46:22 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fdbcb8122f8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fdbc9fdc2d8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" IS NULL[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同1的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fdbc8b9be18,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fdbc9ea65a8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fdbc9ea64e0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fdbc9e9caa8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fdbc9e9ca08,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" IS NULL[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同1的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["total", #<BigDecimal:7fdbc9e373d8,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fdbc8b91e40,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fdbc8b91d00,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fdbc9dd55c0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdbc9dd54f8,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fdbc9daf6e0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdbc9daf5f0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fdbc9d950d8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fdbc9d94fe8,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fdbc8b7a038,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fdbc8b79d40,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:46:22 UTC], ["updated_at", 2016-09-04 18:46:22 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fdbc9d668a0,'0.366904E4',18(27)>], ["updated_at", 2016-09-04 18:46:22 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" IS NULL[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同1的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["total", #<BigDecimal:7fdbc8b69f58,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:46:23 UTC], ["updated_at", 2016-09-04 18:46:23 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fdbc8b59130,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fdbc8b59040,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-04 18:46:23 UTC], ["updated_at", 2016-09-04 18:46:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe9bd717998,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fe9bd717880,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fe9bd6fed58,'0.1E4',9(18)>], ["updated_at", 2016-09-04 18:48:28 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe9bcda3150,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fe9bcda3060,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fe9bd6d6df8,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fe9bd6d6d08,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fe9bd6c5058,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 18:48:28 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe9bcd8b870,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fe9bcd8b780,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fe9bc0f3158,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fe9bc0f3068,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fe9bd696bb8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fe9bd696aa0,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fe9bd68ecd8,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fe9bd68ebe8,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fe9bd6853e0,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 18:48:28 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fe9bd518520,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fe9bcd397c8,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" IS NULL[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同1的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fe9bd422cb0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fe9bd418030,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fe9bd413f30,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fe9bd408860,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fe9bd4087c0,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" IS NULL[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同1的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["total", #<BigDecimal:7fe9bd3e86a0,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fe9bd3d8fc0,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fe9bd3d8bb0,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fe9bd3998e8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe9bd399690,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fe9bc0ea1e8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe9bc0ea0f8,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fe9bd358488,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fe9bd3583e8,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fe9bd342228,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fe9bd342188,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fe9bd321550,'0.366904E4',18(27)>], ["updated_at", 2016-09-04 18:48:28 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("lineitems"."total") FROM "lineitems" WHERE "lineitems"."invoice_id" IS NULL[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同1的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["total", #<BigDecimal:7fe9bcc12020,'0.0',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fe9bd2e0118,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fe9bcc03f70,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-04 18:48:28 UTC], ["updated_at", 2016-09-04 18:48:28 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.3ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 18:50:31 UTC], ["updated_at", 2016-09-04 18:50:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fa74c0d2708,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:50:31 UTC], ["updated_at", 2016-09-04 18:50:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa74c0bbc10,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:50:31 UTC], ["updated_at", 2016-09-04 18:50:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:50:31 UTC], ["updated_at", 2016-09-04 18:50:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:50:31 UTC], ["updated_at", 2016-09-04 18:50:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa749e81668,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fa749e81550,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:50:31 UTC], ["updated_at", 2016-09-04 18:50:31 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:50:31 UTC], ["updated_at", 2016-09-04 18:50:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:50:31 UTC], ["updated_at", 2016-09-04 18:50:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa749de24f0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fa749de2298,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:50:31 UTC], ["updated_at", 2016-09-04 18:50:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fa74a852bb0,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fa74a852a48,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:50:31 UTC], ["updated_at", 2016-09-04 18:50:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:50:31 UTC], ["updated_at", 2016-09-04 18:50:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:50:31 UTC], ["updated_at", 2016-09-04 18:50:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa749d723a8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fa749d72128,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:50:31 UTC], ["updated_at", 2016-09-04 18:50:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fa749d3a430,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fa749d3a020,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:50:31 UTC], ["updated_at", 2016-09-04 18:50:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fa749d0be78,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fa749d0bd10,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:50:31 UTC], ["updated_at", 2016-09-04 18:50:31 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fa749cf9188,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fa749cf9070,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:50:31 UTC], ["updated_at", 2016-09-04 18:50:31 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8d3d4b600,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fa8d3d4b4e8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.3ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fa8d46b2748,'0.1E4',9(18)>], ["updated_at", 2016-09-04 18:51:23 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8d3cf8ba8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fa8d3cf8a40,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fa8d5130940,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fa8d5130828,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fa8d3cd0ae0,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 18:51:23 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8d4612590,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fa8d4612298,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8d48fa050,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fa8d48f9f38,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8d45f8140,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fa8d45f9040,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fa8d45dbd38,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fa8d45dba90,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fa8d3c888a8,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 18:51:23 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fa8d45722e8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fa8d455aa08,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同1的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fa8d3b73440,'0.18E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8d3b7bb90,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fa8d44d3350,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8d3b7bb18,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fa8d44c1d08,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同1的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["total", #<BigDecimal:7fa8d3b48ab0,'0.2959E2',18(27)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fa8d3b53870,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fa8d48d3298,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8d44086c8,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8d4408628,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fa8d48c8280,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8d48c8820,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fa8d43dad18,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fa8d43dac00,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fa8d43bafe0,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fa8d43bac98,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fa8d436a798,'0.366904E4',18(27)>], ["updated_at", 2016-09-04 18:51:23 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同1的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["total", #<BigDecimal:7fa8d4332c08,'0.118356E4',18(27)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fa8d43399e0,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fa8d4321660,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-04 18:51:23 UTC], ["updated_at", 2016-09-04 18:51:23 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fb883fed100,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb883fd55a0,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.2ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同1的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7fb883df73a0,'0.18E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb88302c568,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fb882d23100,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fb88302c4f0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7fb883defb28,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同1的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["total", #<BigDecimal:7fb883dc49f0,'0.2959E2',18(27)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7fb883dc7588,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7fb883daf5f0,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.7ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fb883d7d190,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb883d7d0f0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7fb883d5ee20,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb883d5ed30,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7fb883d243b0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7fb883d1f9c8,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7fb883cf42a0,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7fb883cf41d8,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7fb883cb5230,'0.366904E4',18(27)>], ["updated_at", 2016-09-04 18:56:35 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同1的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["total", #<BigDecimal:7fb883c65078,'0.118356E4',18(27)>], ["contract_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7fb883c67aa8,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7fb883c55dd0,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb883b6c748,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb883b6c428,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fb883b4c920,'0.1E4',9(18)>], ["updated_at", 2016-09-04 18:56:35 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb883ae4488,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb883ae4258,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fb883acc680,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fb883acc590,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fb883a9f5e0,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 18:56:35 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb883a5ce20,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb883a5cd30,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fb883a46e90,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb882c03ce8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fb883a164e8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb883a163f8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fb882bd9768,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fb882bd9600,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 18:56:35 UTC], ["updated_at", 2016-09-04 18:56:35 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fb8821228d8,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 18:56:35 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:08:40 UTC], ["updated_at", 2016-09-04 19:08:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:08:40 UTC], ["updated_at", 2016-09-04 19:08:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb37f0a3310,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb37f0a31a8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:08:40 UTC], ["updated_at", 2016-09-04 19:08:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fb37f0935a0,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fb37f093488,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:08:40 UTC], ["updated_at", 2016-09-04 19:08:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fb37f063b70,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 19:08:40 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:08:40 UTC], ["updated_at", 2016-09-04 19:08:40 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:08:40 UTC], ["updated_at", 2016-09-04 19:08:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb37f022940,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb37f022850,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:08:40 UTC], ["updated_at", 2016-09-04 19:08:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fb37f012090,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb37f011f78,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:08:40 UTC], ["updated_at", 2016-09-04 19:08:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fb37cc814f0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb37cc81338,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:08:40 UTC], ["updated_at", 2016-09-04 19:08:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fb37f001c40,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fb37f001b28,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:08:40 UTC], ["updated_at", 2016-09-04 19:08:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fb37c7cb910,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 19:08:40 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:08:40 UTC], ["updated_at", 2016-09-04 19:08:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:08:40 UTC], ["updated_at", 2016-09-04 19:08:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fb37c798f10,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fb37c798e20,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:08:40 UTC], ["updated_at", 2016-09-04 19:08:40 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fb37ca898a0,'0.1E4',9(18)>], ["updated_at", 2016-09-04 19:08:40 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 19:08:40 UTC], ["updated_at", 2016-09-04 19:08:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fb37c650b58,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 19:08:40 UTC], ["updated_at", 2016-09-04 19:08:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fb37c61be58,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 19:08:40 UTC], ["updated_at", 2016-09-04 19:08:40 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:10:13 UTC], ["updated_at", 2016-09-04 19:10:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:10:13 UTC], ["updated_at", 2016-09-04 19:10:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fbeb2fb6bc0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fbeb2fb6a80,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:10:13 UTC], ["updated_at", 2016-09-04 19:10:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fbeb2fa73c8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fbeb2fa72d8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:10:13 UTC], ["updated_at", 2016-09-04 19:10:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fbeb24eab88,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fbeb24eaa70,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:10:13 UTC], ["updated_at", 2016-09-04 19:10:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fbeb24e32e8,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fbeb24e31f8,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:10:13 UTC], ["updated_at", 2016-09-04 19:10:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fbeb2f41f78,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 19:10:13 UTC], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:10:13 UTC], ["updated_at", 2016-09-04 19:10:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:10:13 UTC], ["updated_at", 2016-09-04 19:10:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fbeb2ec2a48,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fbeb2ec2958,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:10:13 UTC], ["updated_at", 2016-09-04 19:10:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fbeb2eab8c0,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fbeb2eab780,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:10:13 UTC], ["updated_at", 2016-09-04 19:10:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fbeb2e891d0,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 19:10:13 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:10:13 UTC], ["updated_at", 2016-09-04 19:10:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:10:13 UTC], ["updated_at", 2016-09-04 19:10:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fbeb1873580,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fbeb1873328,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:10:13 UTC], ["updated_at", 2016-09-04 19:10:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fbeb2482e20,'0.1E4',9(18)>], ["updated_at", 2016-09-04 19:10:13 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 19:10:13 UTC], ["updated_at", 2016-09-04 19:10:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7fbeb2de23f8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 19:10:13 UTC], ["updated_at", 2016-09-04 19:10:13 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7fbeb2dc0988,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 19:10:13 UTC], ["updated_at", 2016-09-04 19:10:13 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f9715ab02a8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f9715ab0190,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7f9715a9b218,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7f9715a9b128,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.4ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7f971421bd50,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 19:10:59 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f9715a52e28,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f9715a52d38,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7f9715a3a300,'0.1E4',9(18)>], ["updated_at", 2016-09-04 19:10:59 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f97141e1830,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f97141e1740,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f9715a10bb8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f9715a10ac8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f9715a01168,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7f9715a01078,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7f97159f0e58,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7f97159f0d18,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7f97159992c0,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 19:10:59 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7f97158290e8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.0ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7f9712fe5a00,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mRentPhase Load (0.1ms)[0m  [1m[34mSELECT "rent_phases".* FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7f9712ec51e8,'0.18E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7f9712eccab0,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f9712eaf230,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7f9712ecc970,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7f9712e9fa10,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["total", #<BigDecimal:7f9712e55c80,'0.2959E2',18(27)>], ["contract_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7f9712e5d818,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7f9712e3d6d0,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7f9712df6b40,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9712df6aa0,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7f9712dddd48,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9712dddc58,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7f9712dc4820,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7f9712dc4758,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7f9712dac540,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7f9712dac450,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7f9714132f88,'0.366904E4',18(27)>], ["updated_at", 2016-09-04 19:10:59 UTC], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["total", #<BigDecimal:7f9712d24050,'0.118356E4',18(27)>], ["contract_id", "1"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7f9712d2c908,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7f9712d1c490,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-04 19:10:59 UTC], ["updated_at", 2016-09-04 19:10:59 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.2ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:14:15 UTC], ["updated_at", 2016-09-04 19:14:15 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:14:16 UTC], ["updated_at", 2016-09-04 19:14:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fcefb497a10,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fcefb4978a8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:14:16 UTC], ["updated_at", 2016-09-04 19:14:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7fcefb485bd0,'0.1E4',9(18)>], ["updated_at", 2016-09-04 19:14:16 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:14:16 UTC], ["updated_at", 2016-09-04 19:14:16 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:14:16 UTC], ["updated_at", 2016-09-04 19:14:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fcefe002510,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fcefe002420,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:14:16 UTC], ["updated_at", 2016-09-04 19:14:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7fcefb46f948,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fcefb46f7b8,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:14:16 UTC], ["updated_at", 2016-09-04 19:14:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7fcefc14a0c8,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 19:14:16 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:14:16 UTC], ["updated_at", 2016-09-04 19:14:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:14:16 UTC], ["updated_at", 2016-09-04 19:14:16 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7fcefaf43028,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fcefaf42e98,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:14:16 UTC], ["updated_at", 2016-09-04 19:14:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7fcefaf2b810,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fcefaf2b658,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:14:16 UTC], ["updated_at", 2016-09-04 19:14:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7fcefaf1bf78,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7fcefaf1be10,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:14:16 UTC], ["updated_at", 2016-09-04 19:14:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7fcefc140d98,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7fcefc143a70,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:14:16 UTC], ["updated_at", 2016-09-04 19:14:16 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7fcefb43d2b8,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 19:14:16 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:14:39 UTC], ["updated_at", 2016-09-04 19:14:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:14:39 UTC], ["updated_at", 2016-09-04 19:14:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ff547800bf8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7ff547800a90,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:14:39 UTC], ["updated_at", 2016-09-04 19:14:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7ff544fd50c0,'0.1E4',9(18)>], ["updated_at", 2016-09-04 19:14:39 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:14:39 UTC], ["updated_at", 2016-09-04 19:14:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:14:39 UTC], ["updated_at", 2016-09-04 19:14:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ff544f9cba8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7ff544f9cab8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:14:39 UTC], ["updated_at", 2016-09-04 19:14:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7ff544f94610,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7ff544f944f8,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:14:39 UTC], ["updated_at", 2016-09-04 19:14:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7ff544f7e298,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 19:14:39 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:14:39 UTC], ["updated_at", 2016-09-04 19:14:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:14:39 UTC], ["updated_at", 2016-09-04 19:14:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7ff544f4ce28,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7ff544f4cd38,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:14:39 UTC], ["updated_at", 2016-09-04 19:14:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7ff544594e30,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7ff544594cc8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:14:39 UTC], ["updated_at", 2016-09-04 19:14:39 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7ff544584210,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7ff544584120,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:14:39 UTC], ["updated_at", 2016-09-04 19:14:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7ff544574018,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7ff544575f30,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:14:39 UTC], ["updated_at", 2016-09-04 19:14:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7ff544f34df0,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 19:14:39 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 19:14:39 UTC], ["updated_at", 2016-09-04 19:14:39 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7ff544dd6c88,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 19:14:39 UTC], ["updated_at", 2016-09-04 19:14:39 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7ff544dc7d28,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 19:14:39 UTC], ["updated_at", 2016-09-04 19:14:39 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ContractTest: test_contract_testing
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "A Testing Contract"], ["start_date", Thu, 25 Aug 2016], ["end_date", Fri, 24 Feb 2017], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "试用期"], ["start_date", Thu, 25 Aug 2016], ["end_date", Tue, 25 Oct 2016], ["cycle", 2], ["monthly_price", #<BigDecimal:7feb4be074f8,'0.9E3',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "rent_phases" ("name", "start_date", "end_date", "cycle", "monthly_price", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "正式入住"], ["start_date", Wed, 26 Oct 2016], ["end_date", Fri, 24 Feb 2017], ["cycle", 3], ["monthly_price", #<BigDecimal:7feb4bdfe218,'0.12E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rent_phases" WHERE "rent_phases"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mInvoice Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Fri, 15 Jul 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-07-15账单"], ["start_date", Thu, 25 Aug 2016], ["end_date", Mon, 24 Oct 2016], ["due_date", Fri, 15 Jul 2016], ["total", #<BigDecimal:7feb4bd36830,'0.18E4',9(18)>], ["contract_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 25 Aug 2016], ["end_date", Sat, 24 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7feb4b520fd8,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7feb4bd22e48,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Sep 2016], ["end_date", Mon, 24 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7feb4b520f60,'0.9E3',9(18)>], ["unit_price", #<BigDecimal:7feb4b68e690,'0.9E3',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-09-15账单"], ["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["due_date", Thu, 15 Sep 2016], ["total", #<BigDecimal:7feb4bcf3670,'0.2959E2',18(27)>], ["contract_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Tue, 25 Oct 2016], ["unit", "天"], ["total", #<BigDecimal:7feb4bcfa650,'0.2959E2',18(36)>], ["unit_price", #<BigDecimal:7feb4bce07a0,'0.2959E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? ORDER BY "invoices"."id" ASC LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Sep 2016], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 25 Oct 2016], ["end_date", Thu, 24 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7feb4b664520,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7feb4b664480,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 25 Nov 2016], ["end_date", Sat, 24 Dec 2016], ["unit", "月"], ["total", #<BigDecimal:7feb4bc81638,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7feb4bc81520,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 25 Dec 2016], ["end_date", Tue, 24 Jan 2017], ["unit", "月"], ["total", #<BigDecimal:7feb4bc63bb0,'0.12E4',9(18)>], ["unit_price", #<BigDecimal:7feb4bc639f8,'0.12E4',9(18)>], ["invoice_id", "2"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 25 Jan 2017], ["end_date", Wed, 25 Jan 2017], ["unit", "天"], ["total", #<BigDecimal:7feb4bc411c8,'0.3945E2',18(36)>], ["unit_price", #<BigDecimal:7feb4bc41088,'0.3945E2',18(36)>], ["invoice_id", "2"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 25 Jan 2017], ["total", #<BigDecimal:7feb4bbf9238,'0.366904E4',18(27)>], ["updated_at", 2016-09-04 19:16:36 UTC], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvoice Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "invoices" WHERE "invoices"."contract_id" = ? AND "invoices"."due_date" = ? LIMIT ?[0m  [["contract_id", "1"], ["due_date", Thu, 15 Dec 2016], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("title", "start_date", "end_date", "due_date", "total", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["title", "合同A Testing Contract的2016-12-15账单"], ["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["due_date", Thu, 15 Dec 2016], ["total", #<BigDecimal:7feb4c098cd0,'0.118356E4',18(27)>], ["contract_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Thu, 26 Jan 2017], ["end_date", Fri, 24 Feb 2017], ["unit", "天"], ["total", #<BigDecimal:7feb4bbc3318,'0.118356E4',18(36)>], ["unit_price", #<BigDecimal:7feb4bb9a508,'0.3945E2',18(36)>], ["invoice_id", "3"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mContract Load (0.1ms)[0m  [1m[34mSELECT  "contracts".* FROM "contracts" WHERE "contracts"."name" = ? LIMIT ?[0m  [["name", "A Testing Contract"], ["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."contract_id" = ?[0m  [["contract_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "2"]]
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "3"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
InvoiceTest: test_generate_lineitems_case_1
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7feb4d1441d8,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7feb4d1440e8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.0ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["total", #<BigDecimal:7feb4baa3e10,'0.1E4',9(18)>], ["updated_at", 2016-09-04 19:16:36 UTC], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_2
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7feb4c090ee0,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7feb4c0900a8,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Fri, 09 Sep 2016], ["unit", "天"], ["total", #<BigDecimal:7feb4ba33e30,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7feb4ba33d40,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.1ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Fri, 09 Sep 2016], ["total", #<BigDecimal:7feb4ba11ab0,'0.1032E4',9(18)>], ["updated_at", 2016-09-04 19:16:36 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
InvoiceTest: test_the_lineitems_case_3
--------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "contracts" ("name", "start_date", "end_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test contract"], ["start_date", Sat, 01 Jan 2011], ["end_date", Thu, 02 Feb 2012], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("start_date", "end_date", "contract_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["contract_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Tue, 09 Aug 2016], ["end_date", Thu, 08 Sep 2016], ["unit", "月"], ["total", #<BigDecimal:7feb4d13f570,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7feb4d137f00,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Fri, 09 Sep 2016], ["end_date", Sat, 08 Oct 2016], ["unit", "月"], ["total", #<BigDecimal:7feb4b58e150,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7feb4b58df70,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Sun, 09 Oct 2016], ["end_date", Tue, 08 Nov 2016], ["unit", "月"], ["total", #<BigDecimal:7feb4b574b88,'0.1E4',9(18)>], ["unit_price", #<BigDecimal:7feb4b574a48,'0.1E4',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "lineitems" ("start_date", "end_date", "unit", "total", "unit_price", "invoice_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["start_date", Wed, 09 Nov 2016], ["end_date", Wed, 09 Nov 2016], ["unit", "天"], ["total", #<BigDecimal:7feb4b9b2da8,'0.32E2',9(18)>], ["unit_price", #<BigDecimal:7feb4b9b2ba0,'0.32E2',9(18)>], ["invoice_id", "1"], ["created_at", 2016-09-04 19:16:36 UTC], ["updated_at", 2016-09-04 19:16:36 UTC]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineitem Load (0.2ms)[0m  [1m[34mSELECT "lineitems".* FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invoices" SET "end_date" = ?, "total" = ?, "updated_at" = ? WHERE "invoices"."id" = ?[0m  [["end_date", Wed, 09 Nov 2016], ["total", #<BigDecimal:7feb4b991fe0,'0.3032E4',9(18)>], ["updated_at", 2016-09-04 19:16:36 UTC], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "lineitems" WHERE "lineitems"."invoice_id" = ?[0m  [["invoice_id", "1"]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
RentPhaseTest: test_bill_list
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
